<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Pythonic Excursions - Oil and Gas</title><link href="https://aegis4048.github.io/" rel="alternate"></link><link href="https://aegis4048.github.io/feeds/oil-and-gas.atom.xml" rel="self"></link><id>https://aegis4048.github.io/</id><updated>2025-04-25T00:00:00-07:00</updated><subtitle>Stories about Python and Data Science</subtitle><entry><title>Operation of Oil-Flooded Screw Compressor Explained</title><link href="https://aegis4048.github.io/operation_of_oil_flooded_screw_compressor_explained" rel="alternate"></link><published>2025-04-25T00:00:00-07:00</published><updated>2025-04-25T00:00:00-07:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2025-04-25:/operation_of_oil_flooded_screw_compressor_explained</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="introduction"&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; This post focuses exclusively on the application of oil-flooded screw compressors in the oil and gas industry. It does not cover other compressor types (such as rotary vane, reciprocating, dry screw, etc.) or other applications (like refrigeration, power generation, air compression, etc.).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Oil-flooded rotary screw compressors provide a reliable and efficient solution for gas compression across a wide range of applications in the oil and gas industry. These applications include, but are not limited to:&lt;/p&gt;
&lt;blockquote class="quote quote2" style="font-family: unset; font-size: unset; font-style: unset; padding-bottom: 12px"&gt; &lt;div class="terminology" style="margin-top: 2px"&gt;&lt;strong&gt;Vapor Recovery:&lt;/strong&gt; Capturing vapors from low-pressure vessels like heater treaters, vapor recovery towers (VRT), or atmospheric storage tanks and compressing them into the gas sales line. Without compression, these vapors lack sufficient pressure to enter the sales line and would need to be flared or vented, resulting in both environmental harm and lost revenue from valuable rich gas.&lt;/div&gt; &lt;div class="terminology"&gt;&lt;strong&gt;Boosting:&lt;/strong&gt; Large gas pipelines operate at high pressures (1000â€“5000 psig), typically handled by multi-stage reciprocating compressors. However, these recips require stable, high suction pressures. Screw compressors excel at stabilizing fluctuating inlet pressures from production wellsites and boosting gas to the required suction pressure for recips, making them ideal for this intermediate role.&lt;/div&gt; &lt;div class="terminology"&gt;&lt;strong&gt;Wellhead Compression:&lt;/strong&gt; Installing a compressor between the wellhead and sales line reduces backpressure on the wellhead, increasing hydrocarbon flow rates. This can also help remove accumulated liquids in shut-in wells, kick-starting production.&lt;/div&gt; &lt;/blockquote&gt;&lt;p&gt;Typical rotary screw compressors operate with suction pressures ranging from 0 to 50 psig and discharge pressures up to 350 psig. This post dives into the technical details of oil-flooded screw compressor operations, specifically tailored for operatorsâ€”whether you're renting or purchasing the unit. Designed for customer operators, this guide provides practical insights into the working mechanism, key vessels and components, P&amp;ID (Piping and Instrumentation Diagram), flow control strategies, and common maintenance issues. By the end, you'll have a solid understanding of the essential technical knowledge needed to operate screw compressors effectively.&lt;/p&gt;
&lt;div class="row" id="fig-1"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 1:&lt;/strong&gt; Flogistix FX17 gas-engine oil-flooded screw compressor.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="slideshow-wrapper" id="slideshow-1"&gt;
&lt;div class="linkedin-slideshow"&gt;
&lt;div class="slideshow-band top-band"&gt;
&lt;div class="slideshow-title"&gt;Simplified Oil-Flooded Screw Compressor P&amp;IDs.&lt;/div&gt;
&lt;div class="fullscreen-toggle"&gt;
&lt;svg class="enter-fullscreen" height="24" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;svg class="exit-fullscreen" height="24" style="display:none;" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slides-container"&gt;
&lt;div class="slide active"&gt;&lt;img class="slide-image" src="jupyter_images/screw_PFD2a.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_PFD4a.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_PFD3a.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_PFD1a.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slideshow-band bottom-band"&gt;
&lt;div class="page-counter"&gt;1/4&lt;/div&gt;
&lt;div class="progress-track"&gt;
&lt;div class="progress-step active"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="bottom-nav"&gt;
&lt;button class="nav-button bottom-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button bottom-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;button class="nav-button image-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button image-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Slideshow 1:&lt;/strong&gt; Simplified P&amp;IDs of the 4 most common configuration of oil-flooded screw compressors. Refer to &lt;a class="internal-link" href="#4.-Compressor-Package-Key-Equipment-Summary"&gt;Section 4&lt;/a&gt; for key equipment details. Refer to &lt;a class="internal-link" href="#5.-Process-flow,-model-types-and-P&amp;ID"&gt;Section 5&lt;/a&gt; for process flow and P&amp;ID details.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#introduction"&gt;&lt;span class="toc_label"&gt;0.&lt;/span&gt;
            Introduction&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.-Characteristics-of-oil-flooded-screw-compressors"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;
            Characteristics of oil-flooded screw compressors&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.-Screw-compressor-(core)-working-principles"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;
            Screw compressor (core) working principles&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#2.1.-Rotors-(male-and-female)"&gt;&lt;span class="toc_label"&gt;2.1.&lt;/span&gt;
                Rotors (male and female)&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.2.-Direct-driven-(non-geared)"&gt;&lt;span class="toc_label"&gt;2.2.&lt;/span&gt;
                Direct-driven (non-geared)&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.3.-Gear-driven-(geared)"&gt;&lt;span class="toc_label"&gt;2.3.&lt;/span&gt;
                Gear-driven (geared)&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.4.-Gear-Ratio-&amp;-Limitations"&gt;&lt;span class="toc_label"&gt;2.4.&lt;/span&gt;
                Gear Ratio &amp; Limitations&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.5.-Driver-and-Driving-Shaft"&gt;&lt;span class="toc_label"&gt;2.5.&lt;/span&gt;
                Driver and Driving Shaft&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#3.-Choice-of-a-Driver:-Electric-Motor-or-Gas-Engine"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;
            Choice of a Driver: Electric Motor or Gas Engine&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#3.1.-Gas-engine-compressor"&gt;&lt;span class="toc_label"&gt;3.1.&lt;/span&gt;
                Gas engine compressor&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#3.2.-Electric-motor-compressor"&gt;&lt;span class="toc_label"&gt;3.2.&lt;/span&gt;
                Electric motor compressor&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#4.-Compressor-Package-Key-Equipment-Summary"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;
            Compressor Package Key Equipment Summary&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5.-Process-flow,-model-types-and-P&amp;ID"&gt;&lt;span class="toc_label"&gt;5.&lt;/span&gt;
            Process flow, model types and P&amp;ID&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Type-A:-Electric-Driver/Electric-Pump-Dump/Electric-Recycle"&gt;&lt;span class="toc_label"&gt;Type A.&lt;/span&gt;
                Full electric&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Type-B:-Electric/Pneumatic-Dump/Electric-Recycle"&gt;&lt;span class="toc_label"&gt;Type B.&lt;/span&gt;
                Electric w/ pneumatic dump&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Type-C:-Electric/Pneumatic-Dump/Pneumatic-Recycle"&gt;&lt;span class="toc_label"&gt;Type C.&lt;/span&gt;
                Electric w/ pneumatic dump &amp; recycle &lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Type-D:-Gas-Engine/Pneumatic-Dump/Pneumatic-Recycle"&gt;&lt;span class="toc_label"&gt;Type D.&lt;/span&gt;
                Gas engine&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;&lt;span class="toc_label"&gt;6.&lt;/span&gt;
            Pneumatic liquid dump cycle (blowcase)&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#note_1"&gt;&lt;span class="toc_label"&gt;Note 1:&lt;/span&gt;
                Pressure equalizing valve (CV-1001)&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#7.-Control-Devices-Working-Mechanisms"&gt;&lt;span class="toc_label"&gt;7.&lt;/span&gt;
            Control Devices Working Mechanisms&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#7.1.-Electric-flow-control-valve"&gt;&lt;span class="toc_label"&gt;7.1.&lt;/span&gt;
                Electric flow control valve&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.2.-Pneumatic-flow-control-valve"&gt;&lt;span class="toc_label"&gt;7.2.&lt;/span&gt;
                Pneumatic flow control valve&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.3.-Solenoid-valve"&gt;&lt;span class="toc_label"&gt;7.3.&lt;/span&gt;
                Solenoid valve&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.4.-3-Way-thermostatic-valve"&gt;&lt;span class="toc_label"&gt;7.4.&lt;/span&gt;
                3-Way thermostatic valve&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.5.-Liquid-level-switches"&gt;&lt;span class="toc_label"&gt;7.5.&lt;/span&gt;
                Liquid level switches&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#7.5.1.-3-Way-pneumatic-type"&gt;&lt;span class="toc_label"&gt;7.5.1.&lt;/span&gt;
                    3-Way pneumatic type&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.5.2.-Electric-type"&gt;&lt;span class="toc_label"&gt;7.5.2.&lt;/span&gt;
                    Electric type&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#7.6.-Electric-liquid-pump"&gt;&lt;span class="toc_label"&gt;7.6.&lt;/span&gt;
                Electric liquid pump&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.7.-Pressure-safety-valves"&gt;&lt;span class="toc_label"&gt;7.7.&lt;/span&gt;
                Pressure safety valves&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.8.-Transmitters"&gt;&lt;span class="toc_label"&gt;7.8.&lt;/span&gt;
                Transmitters&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#7.9.-Suction-control-valve"&gt;&lt;span class="toc_label"&gt;7.9.&lt;/span&gt;
                Suction control valve&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#8.-Pressure-control"&gt;&lt;span class="toc_label"&gt;8.&lt;/span&gt;
            Pressure control&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#8.1.-VFD-and-PID-Loop"&gt;&lt;span class="toc_label"&gt;8.1.&lt;/span&gt;
                VFD and PID Loop&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.2.-Recycle-mode"&gt;&lt;span class="toc_label"&gt;8.2.&lt;/span&gt;
                Recycle mode&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.-Pressure-setpoint-scenarios"&gt;&lt;span class="toc_label"&gt;8.3.&lt;/span&gt;
                Pressure setpoint scenarios&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#8.3.1.-VRT-vapor-recovery"&gt;&lt;span class="toc_label"&gt;8.3.1.&lt;/span&gt;
                    VRT vapor recovery&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.2.-Tank-vapor-recovery"&gt;&lt;span class="toc_label"&gt;8.3.2.&lt;/span&gt;
                    Tank vapor recovery&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.3.-Heater-vapor-recovery"&gt;&lt;span class="toc_label"&gt;8.3.3.&lt;/span&gt;
                    Heater vapor recovery&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.4.-Separator-drawdown"&gt;&lt;span class="toc_label"&gt;8.3.4.&lt;/span&gt;
                    Separator drawdown&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.5.-Casing-drawdown"&gt;&lt;span class="toc_label"&gt;8.3.5.&lt;/span&gt;
                    Casing drawdown&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#8.3.5.1.-SRP-Casing-drawdown"&gt;&lt;span class="toc_label"&gt;8.3.5.1.&lt;/span&gt;
                        SRP Casing drawdown&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#8.3.5.2.-ESP-Casing-drawdown"&gt;&lt;span class="toc_label"&gt;8.3.5.2.&lt;/span&gt;
                        ESP Casing drawdown&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#note_2"&gt;&lt;span class="toc_label"&gt;Note 2:&lt;/span&gt;
                    Relief to flare/combustor&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#9.-Temperature-control"&gt;&lt;span class="toc_label"&gt;9.&lt;/span&gt;
            Temperature control&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#9.1.-Electric-models"&gt;&lt;span class="toc_label"&gt;9.1.&lt;/span&gt;
                    Electric models&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#9.2.-Gas-engine-models"&gt;&lt;span class="toc_label"&gt;9.2.&lt;/span&gt;
                    Gas engine models&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10.-Lube-oil-contamination-problems"&gt;&lt;span class="toc_label"&gt;10.&lt;/span&gt;
            Lube oil contamination problems&lt;/a&gt;
&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#10.1.-Frequent-shutdown/autostart-units"&gt;&lt;span class="toc_label"&gt;10.1.&lt;/span&gt;
                    Frequent shutdown/autostart units&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10.2.-Oversized-electric-units"&gt;&lt;span class="toc_label"&gt;10.2.&lt;/span&gt;
                    Oversized electric units&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10.3.-High-discharge-pressure-vapor-recovery"&gt;&lt;span class="toc_label"&gt;10.3.&lt;/span&gt;
                    High discharge pressure&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10.4.-High-BTU-vapor-recovery-(above-2000-Btu)"&gt;&lt;span class="toc_label"&gt;10.4.&lt;/span&gt;
                    High BTU&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#warning-impact-of-water"&gt;&lt;span class="toc_label"&gt;Warning 1.&lt;/span&gt;
                            Impact of water on phase envelope&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#10.5.-High-inlet-temperature-VRT/Tank-vapor-recovery-(above-110F)"&gt;&lt;span class="toc_label"&gt;10.5.&lt;/span&gt;
                    High inlet temperature&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#11.-Shutdown-triggers"&gt;&lt;span class="toc_label"&gt;11.&lt;/span&gt;
            Shutdown triggers&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#12.-Rental-vs.-Purchase"&gt;&lt;span class="toc_label"&gt;12.&lt;/span&gt;
            Rental vs. Purchase&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="1.-Characteristics-of-oil-flooded-screw-compressors"&gt;1. Characteristics of oil-flooded screw compressors&lt;a class="anchor-link" href="#1.-Characteristics-of-oil-flooded-screw-compressors"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;div class="highlights" id="key1"&gt;
&lt;div class="highlights-title"&gt;1. Single-stage, high compression ratio&lt;/div&gt;
&lt;div class="highlights-content"&gt;Unlike reciprocating compressors, which are multi-stage, screw compressors operate in a single stage with compression ratios as high as 27. For example, at 3,000 feet above sea level (ASL), atmospheric pressure is 13.2 psia. A screw compressor can discharge up to 13.2 x 27 = 356.4 psia (341.7 psig) before reaching its horsepower limit.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key2"&gt;
&lt;div class="highlights-title"&gt;2. Ideal for upstream wellsites&lt;/div&gt;
&lt;div class="highlights-content"&gt;Most upstream sales line pressures range between 60â€“250 psig, which falls within the operating range of screw compressors. When operating within this range, screw compressors outperform reciprocating compressors for three key reasons: 1) fewer moving parts, resulting in lower maintenance and downtime; 2) lower cost; and 3) better handling of fluctuating inlet pressures. Wellsites, unlike plants, often experience significant pressure swings from the wellhead, which reciprocating compressors struggle to manage.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key3"&gt;
&lt;div class="highlights-title"&gt;3. Lubricating (cooling) oil&lt;/div&gt;
&lt;div class="highlights-content"&gt;The lubricating oil in screw compressors serves three critical purposes. First, it provides a sealing between the two helical rotors (refer to &lt;a class="internal-link" href="#2.1.-Rotors-(male-and-female)"&gt;Section 2.1.&lt;/a&gt; for rotor details). This sealing is necessary for compression because the male and female rotors are designed to avoid direct contact. Second, it lubricates the moving parts, reducing friction and wear. Third, it absorbs and dissipates the heat generated during compression. Cooled oil enters the compression chamber, directly contacting the heated and compressed gas. The oil absorbs the heat, exits the chamber, passes through a cooling fan, and re-enters the chamber to continue the cooling cycle. Lubricating oil represents the highest operating cost for screw compressors, as it requires frequent replacement. For a deeper dive into lube oil-related issues, refer to &lt;a class="internal-link" href="#10.-Lube-oil-contamination-problems"&gt;Section 10&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key4"&gt;
&lt;div class="highlights-title"&gt;4. Variables affecting flowrate capacity and horsepower&lt;/div&gt;
&lt;div class="highlights-content"&gt;
&lt;p&gt;
            Flowrate capacity and horsepower (HP) consumption are influenced by &lt;u&gt;&lt;i&gt;(1) suction pressure&lt;/i&gt;&lt;/u&gt;, &lt;u&gt;&lt;i&gt;(2) discharge pressure&lt;/i&gt;&lt;/u&gt;, and &lt;u&gt;&lt;i&gt;(3) timing gear ratio&lt;/i&gt;&lt;/u&gt;. Typically, discharge pressure cannot be controlled by operators, as it is determined by the sales line pressure. Higher discharge pressures require more horsepower. Increasing suction pressure boosts flowrate capacity but also increases power consumption. While suction pressure cannot be adjusted for atmospheric tanks (as they lack back pressure valves), it can be adjusted for wellheads or vessels like heater treaters, low-pressure separators, or vapor recovery towers (VRTs) using back pressure valves (BPVs). To increase suction pressure and flowrate capacity, raise the BPV setpoint. For vapor recovery on atmospheric tanks or if adjusting the BPV setpoint is not desired, the only alternative is to change the gear ratio by swapping gears (refer to &lt;a class="internal-link" href="#2.3.-Gear-driven-(geared)"&gt;Section 2.3&lt;/a&gt; for explanations on gears). Increasing the gear ratio enhances flowrate capacity but also increases HP consumption. &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; below summarizes the relationships between suction pressure, discharge pressure, gear ratio, flowrate capacity, and HP consumption.
        &lt;/p&gt;
&lt;p&gt;
            Horsepower is another critical factor. Every compressor has a maximum horsepower limit, and operations must stay within this limit. Increasing suction pressure or gear ratios may boost flowrate capacity but can cause the compressor to fail if it exceeds the machine's HP capacity. The scenario highlighted in red in &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; illustrates a compressor running out of HP due to high suction and discharge pressures. In such cases, a larger compressor with a higher HP capacity is required.
        &lt;/p&gt;
&lt;p&gt;
            It's important to note that there is no direct correlation between flowrate and horsepower consumption. For example, if a compressor's maximum flowrate capacity is 500 MCFD, increasing the flowrate from 100 MCFD to 300 MCFD will not affect HP consumption as long as it operates within the designed capacity. However, exceeding the design capacity by increasing suction pressure or gear ratio will result in higher HP demand.
        &lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="table-1" style=""&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_table_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 1:&lt;/strong&gt; A table summarizing the impact of increasing or decreasing suction, discharge, and gear ratios on compressor flowrate capacity and HP consumption.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="row full_screen_margin_100 mobile_responsive_plot_full_width" id="table-2" style=""&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_table_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 2:&lt;/strong&gt; Compressor sizing calculation using the &lt;a href="https://www.leroigas.com/en-us/products/hg12-and-hgf12-series" target="_blank"&gt;Leroi HG12 series&lt;/a&gt; compressor model and Flogistix internal sizing software. The model has a maximum of 125 HP. The table is sorted by the highest flowrate capacity. Compare the changes in numbers with varying gear, suction, and discharge conditions with &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; for a better understanding of their relationships. Note that the scenario highlighted in red exceeds the 125 HP limit, requiring a larger compressor. A potential solution is upgrading to the next bigger model, the &lt;a href="https://www.leroigas.com/en-us/products/hg17-hgf17-hgs17-and-hgfs17-series" target="_blank"&gt;Leroi HG17 series&lt;/a&gt;, which offers a maximum of 180 HP.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key5"&gt;
&lt;div class="highlights-title"&gt;5. Operating ranges&lt;/div&gt;
&lt;div class="highlights-content"&gt;
&lt;p&gt;This section outlines the general operating ranges of a screw compressor. These ranges are not definitive and can vary based on parts/models, applications, and operating conditions. Treat this as a general guideline rather than absolute.&lt;/p&gt;
&lt;hr/&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Discharge pressure&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;60â€“350 psig. The upper limit of 350 psig is constrained by machine capability, while the lower limit of 60 psig is set by the minimum lube oil injection pressure required. For example, a Leroi compressor manual specifies that lube oil injection pressure must be at least 60â€“100 psig greater than the suction pressure.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Suction pressure&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;0â€“50 psig. This range is set by machine capability. Exceeding 50 psig can cause machine downtime due to insufficient horsepower.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Temperature&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;120â€“230Â°F. Compressors are typically operated at the maximum allowable temperature (230Â°F) to minimize the risk of lube oil contamination from gas condensation. Refer to &lt;a class="internal-link" href="#10.-Lube-oil-contamination-problems"&gt;Section 10&lt;/a&gt; for more details on oil contamination issues.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Flowrate capacity&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;20â€“2,000 MSCFD. The lower limit of 20 MSCFD is necessary to keep the compressor running hot and operating above the gas dew point temperature, preventing gas condensation that contaminates lube oil. Too little volume cannot generate enough heat of compression to keep the compressor hot. Note that this range depends on the manufacturer/model. The maximum flowrate limit can be extended by installing additional compressors.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Horsepower Capacity&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;50â€“300 HP. This range varies significantly depending on the manufacturer/model.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font"&gt;
&lt;div class="col-3 bold"&gt;&lt;p&gt;Gear Ratio&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-1 bold"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-8"&gt;&lt;p&gt;1â€“3. While a higher gear ratio increases flowrate capacity, it also consumes more power. The gear ratio cannot exceed the machine's horsepower limit.&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key6"&gt;
&lt;div class="highlights-title"&gt;6. Shared cooling fan.&lt;/div&gt;
&lt;div class="highlights-content"&gt;
&lt;p&gt;Three components require cooling: compressed gas, lube oil, and cooling water (for gas-engine models only). The cooling oil is typically maintained at the compressor's maximum allowable temperature (~230Â°F) to prevent liquid condensation. Direct contact between the cooling oil and compressed gas reduces the gas temperature to near 230Â°F. However, this is still higher than midstream pipeline specifications (120â€“140Â°F). The gas is further cooled by an air-cooled fan before discharge. A single fan is used for both gas and lube oil cooling. The fan targets the gas discharge temperature, with the skid PLC adjusting fan RPM to meet the 120Â°F target. Oil temperature is regulated by a 3-way thermostatic valve set to 230Â°F, which mixes fan cooled oil and bypassed hot oil to maintain the setpoint. The thermostat valve determines the hot-cold mixing ratio needed to meet the target temperature. This is similar to how a domestic shower controls water temperature. See &lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4.&lt;/a&gt; for 3-way thermostat valve details.&lt;/p&gt;
&lt;p&gt;For gas-engine models, cooling water is used to cool the engine. The cooling water may share the same fan as the oil and gas or have its own dedicated fan, depending on the model design.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="2.-Screw-compressor-(core)-working-principles"&gt;2. Screw compressor (core) working principles&lt;a class="anchor-link" href="#2.-Screw-compressor-(core)-working-principles"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; The term "compressor" can refer to two things: a complete compressor package, which includes suction/discharge scrubbers, fans, valves, piping, and the "core" compressor, or the "core" compressor itself. The "core" compressor is the part of the package where actual compression occurs, consisting of two helical rotors inside a compression chamber. This section focuses exclusively on the "core" compressor.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The core of an oil-flooded screw compressor consists of two helical rotorsâ€”a male and a female rotorâ€”enclosed within a compression chamber. The rotors are driven by a shaft, which transfers torque from a driver (either a gas engine or an electric motor) to the rotors. A screw compressor can be either &lt;strong&gt;direct-driven&lt;/strong&gt; (non-geared) or &lt;strong&gt;gear-driven&lt;/strong&gt;. In a direct-driven configuration, the driving shaft is directly connected to the rotor. In a gear-driven configuration, the driving shaft is connected to timing gears, and the shaft linking the gear to the rotor turns the rotor through the gear. In most screw compressor applications, the driving shaft is connected to the male rotor, but in oil-flooded screw compressors used in the oil and gas industry, the shaft is typically connected to the female rotor or gear. The rotor/gear connected to the shaft (e.g., the female rotor) is the one doing the work, while the other rotor/gear (e.g., the male rotor) spins freely as it is driven by the intermeshing action of the female rotor/gear. As the rotors rotate, gas is drawn into the chamber through the suction port. The intermeshing rotors trap and progressively reduce the volume of the gas as it moves along the length of the rotors toward the discharge port. This reduction in volume increases the gas pressure. The chamber is "flooded" with lubricating oil, which serves multiple purposes: it seals the gaps between the rotors, lubricates the moving parts, and absorbs the heat generated during compression. The compressed gas, now mixed with oil, exits the chamber and is separated from the oil in a downstream discharge scrubber before being sent to the pipeline, while the lube oil is recirculated back into the system.&lt;/p&gt;
&lt;div class="row" id="fig-2"&gt;
&lt;div class="col-12 col-md-6"&gt;&lt;img src="jupyter_images/screw_gif_1.gif"/&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-6"&gt;&lt;img src="jupyter_images/screw_gif_3.gif"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; 3D animation of screw compressor working principle. Low pressure gas enters from the top (blue) and high pressure gas leaves from below (red). GIFs adapted from: &lt;a href="https://www.youtube.com/watch?v=wg_2E_p6_V8" target="_blank"&gt;video source&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; Screw compressor key parts labeled. Image adapted from: &lt;a href="https://www.youtube.com/watch?v=wg_2E_p6_V8" target="_blank"&gt;video source&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; Compression chamber, shaft, and driver of a screw compressor. The driver (in this example, an electric motor) transfers its torque to the rotor through a driver shaft. The shaft turns either the male or female rotor, while the other rotor spins freely due to the intermeshing action of the driven rotor. Compression takes place inside the compression chamber.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.1.-Rotors-(male-and-female)"&gt;2.1. Rotors (male and female)&lt;a class="anchor-link" href="#2.1.-Rotors-(male-and-female)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A screw compressor features twin helical rotors: one with fewer lobes, called the male rotor, and one with more lobes, called the female rotor. In the upstream oil and gas industry, oil-flooded screw compressors typically use a &lt;strong&gt;4:6 (male:female) female-driven design&lt;/strong&gt;. For a non-geared, direct-female driven compressor, this means that for every 1,000 RPM of the female rotor, the male rotor will rotate at 1,500 RPM due to the lobe ratio. The driving rotor (female) receives rotational energy from the driver, while the driven rotor (male) is turned by the intermeshing action of the driving rotor. (Note that this RPM ratio and the driven rotor configuration do not apply to geared units. In geared units, the female "gear" drives the male "gear," and the male "rotor," connected to the male gear, turns the female rotor.)&lt;/p&gt;
&lt;p&gt;Properly manufactured rotors in oil-flooded screw compressors should never experience metal-to-metal contact, as this minimizes wear and ensures longevity. The lubricating oil provides a sealing barrier between the rotors, preventing gas from escaping during compression and allowing the rotors to maintain indirect contact through an oil film. This is possible because liquids, such as oil, are incompressible.&lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; An illustration of the male-female helical rotors for screw compressors. This specific drawing has a 5:6 male-female lobe ratio.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_75 mobile_responsive_plot_full_width" id="fig-6"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic5.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 6:&lt;/strong&gt; An illustration of the male-female helical rotors for screw compressors. This specific drawing has a 4:6 male-female lobe ratio. This design is used in the &lt;a href="https://www.leroigas.com/en-us/products" target="_blank"&gt;Leroi HG series&lt;/a&gt;, which is specifically designed for oil-flooded screw compressors in the oil and gas industry.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.2.-Direct-driven-(non-geared)"&gt;2.2. Direct-driven (non-geared)&lt;a class="anchor-link" href="#2.2.-Direct-driven-(non-geared)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;For any screw compressor application, a driver (gas engine or electric motor) transfers its rotating energy to a driving shaft. In a direct-driven configuration, the shaft is directly connected to one of the rotors. The rotor directly connected to the driving shaft is called the &lt;strong&gt;driving rotor&lt;/strong&gt;, while the other rotor is called the &lt;strong&gt;driven rotor&lt;/strong&gt;, as it is driven by the rolling and intermeshing actions of the driving rotor.&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Energy transfer order&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;A driver (gas engine or electric motor) generates rotating energy.&lt;/li&gt;
&lt;li&gt;Rotating energy is transferred to a driving shaft.&lt;/li&gt;
&lt;li&gt;The driving shaft turns the driving rotor.&lt;/li&gt;
&lt;li&gt;The driven rotor is turned by the rolling and intermeshing actions of the driving rotor.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-7"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic6.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 7:&lt;/strong&gt; An illustration of a direct-driven rotary screw compressor. The driving shaft is connected to a driver (not shown). The driving shaft is directly connected to the driving rotor, turning it, while the driven rotor spins freely due to the intermeshing action of the driving rotor.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-8"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic7.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 8:&lt;/strong&gt; A real-world example of a direct-driven compressor, as illustrated in &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.3.-Gear-driven-(geared)"&gt;2.3. Gear-driven (geared)&lt;a class="anchor-link" href="#2.3.-Gear-driven-(geared)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Some screw compressors come with internal timing gears. In a gear-driven configuration, the driving shaft is indirectly connected to the rotors through a pair of gears. The purpose of the gear pair is to adjust the RPM of the rotors without changing the male:female lobe ratio. Typically, a larger gear is directly connected to the driving shaft. The gear directly connected to the driving shaft is called the &lt;strong&gt;driving gear&lt;/strong&gt;, while the other gear is called the &lt;strong&gt;driven gear&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#fig-9"&gt;Figure 9&lt;/a&gt; below, assume the driving gear has 30 teeth and the driven gear has 15 teeth, resulting in a gear ratio of 2:1. If the driving shaft operates at 1,000 RPM, the driving gear will also rotate at 1,000 RPM. Due to the 2:1 gear ratio, the driven gear will rotate at 2,000 RPM. The driving rotor, connected to the driven gear through the axial bearing, will also rotate at 2,000 RPM. Given a lobe ratio of 4:6 (driving rotor:driven rotor), the driven rotor will rotate at 1,333 RPM (since 2,000 RPM Ã— 4/6 = 1,333 RPM). Despite the input shaft having only 1,000 RPM, the driving rotor achieves 2,000 RPM, and the driven rotor achieves 1,333 RPM, resulting in an overall speed increase. This speed increase provides higher flowrate capacity at the cost of higher horsepower consumption.&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Energy transfer order&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;A driver (gas engine or electric motor) generates rotating energy.&lt;/li&gt;
&lt;li&gt;Rotating energy is transferred to a driving shaft.&lt;/li&gt;
&lt;li&gt;The driving shaft turns the driving gear.&lt;/li&gt;
&lt;li&gt;Driving gear turns the driven gear.&lt;/li&gt;
&lt;li&gt;Driven gear is connected to the driving rotor through its axial bearings. Driven gear turns the driving rotor.&lt;/li&gt;
&lt;li&gt;The driven rotor is turned by the rolling and intermeshing actions of the driving rotor.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="row" id="fig-9"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic8.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 9:&lt;/strong&gt; An illustration of a gear-driven rotary screw compressor. The driving shaft is connected to a driver (not shown). The  Note that there's a gap beween the driving gear and the driven rotor, suggesting that the energy from the driving shaft is not directly transferred to the driven rotor. &lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-10"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic9.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 10:&lt;/strong&gt; A real-world example of a gear-driven compressor, as illustrated in &lt;a class="internal-link" href="#fig-9"&gt;Figure 9&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-11"&gt;
&lt;div class="col-12 col-md-4"&gt;&lt;img src="jupyter_images/screw_gear1.jpg"/&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-4"&gt;&lt;img src="jupyter_images/screw_gear2.jpg"/&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-4"&gt;&lt;img src="jupyter_images/screw_gear3.jpg"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 11:&lt;/strong&gt; Illustration of gears.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.4.-Gear-Ratio-&amp;-Limitations"&gt;2.4. Gear Ratio &amp; Limitations&lt;a class="anchor-link" href="#2.4.-Gear-Ratio-&amp;-Limitations"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Increasing the gear ratio increases rotor RPM, allowing a compressor to process more gas volume. For example in &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;, for Leroi-HG12 model with suction pressure at 30# and discharge pressure at 100#, increasing the gear ratio from 1.46 to 1.74 increased the flowrate capacity from 526 MCFD to 627 MCFD. However, does this mean you can use a massive gear ratio without limits? No. There are two fundamental limitations:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Increasing RPM increases horsepower consumption.&lt;/strong&gt; All machines have their own maximum HP limits, and the RPM cannot exceed the machine's HP capacity.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. The rotors have a maximum tip speed.&lt;/strong&gt; Gear ratios should not cause the machine to exceed this limit. Typical screw compressor tip speed limits range between 30â€“50 m/s (the unit is in metric because rotor diameters use the metric system). For example, the &lt;a href="https://www.leroigas.com/en-us/products/hg12-and-hgf12-series" target="_blank"&gt;Leroi HG12 series&lt;/a&gt; has a rotor diameter of 127.5 mm and a maximum rotor tip speed of 37 m/s. This specific model supports both geared and non-geared configurations. Assume a non-geared configuration with 2150 RPM on the driving shaft. The tip speed of the driving rotor is:&lt;/p&gt;
&lt;div id="eq-1" style="font-size: 0.9rem;"&gt;
    $$
    \begin{align}
      \text{Tip Speed} \space  =\quad  &amp; \pi \times 0.1275\space \text{m} \times 2150 \space \text{RPM} \label{}\\ 
       =\quad  &amp; 859.5 \space \text{m/min} \label{}\\
       =\quad  &amp; \frac{859.5 \space \text{m/min}}{60} = 14.33 \space \text{m/s}\label{}
    \end{align} 
    $$
&lt;/div&gt;&lt;p&gt;Now assume the a geared configuration with a 2.57 gear ratio. The tip speed of the driving rotor becomes:&lt;/p&gt;
&lt;div id="eq-1" style="font-size: 0.9rem;"&gt;
    $$
    \begin{align}
        \text{New RPM} \space  =\quad  &amp; 2150 \space \text{RPM}  \times 2.57 \label{}\\ 
        =\quad  &amp; 5525.5 \space \text{RPM} \label{}\\
       \text{Tip Speed} \space  =\quad  &amp; \pi \times 0.1275\space \text{m} \times 5525.5 \space \text{RPM} \label{}\\ 
       =\quad  &amp; 2214.6 \space \text{m/min} \label{}\\
       =\quad  &amp; \frac{2214.6 \space \text{m/min}}{60} = 36.91 \text{m/s}\label{}
    \end{align} 
    $$
&lt;/div&gt;&lt;p&gt;The calculation shows that the gear ratio should not be increased beyond 2.57 due to the rotor tip speed nearing the mechanical limit of the machine, set at 37 m/s.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.5.-Driver-and-Driving-Shaft"&gt;2.5. Driver and Driving Shaft&lt;a class="anchor-link" href="#2.5.-Driver-and-Driving-Shaft"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The driver is the energy source that generates rotating energy, and the driving shaft is the connecting bridge between the driver and the rotors/gears. A driver can be either a gas engine or an electric motor. The rotational energy from the driver is transferred to the screw rotors through a driving shaft. &lt;a class="internal-link" href="#fig-12-A"&gt;Figure 12-A&lt;/a&gt; and &lt;a class="internal-link" href="#fig-12-B"&gt;12-B&lt;/a&gt; below show gas engine and electric motor driver connections to the compressor through a driving shaft. Note that the engine-driven model has an adapter fitting between the compressor and the engine that covers the driving shaft.&lt;/p&gt;
&lt;div class="row" id="fig-12-A"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic11.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 12-A:&lt;/strong&gt; 3D illustration of a gas engine driver and a compressor. A driver shaft is located inside the adapter fitting between the engine and the compressor.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-12-B"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic10.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 12-B:&lt;/strong&gt; 3D illustration of an electric motor and a compressor. The compressor and the motor are connected through a driver shaft.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="3.-Choice-of-a-Driver:-Electric-Motor-or-Gas-Engine"&gt;3. Choice of a Driver: Electric Motor or Gas Engine&lt;a class="anchor-link" href="#3.-Choice-of-a-Driver:-Electric-Motor-or-Gas-Engine"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;A driver that turns the driving shaft can be either an electric motor or a gas engine. There are pros and cons for both, such as noise, weight, energy efficiency, safety, etc. However, the primary motivation to choose one model over the other in the upstream oil and gas industry is company policy on emissions and the presence of power. Note that the fuel gas and electricity consumption is negligible compared to the volume of gas being captured with compressors in the oil and gas industry. The gas engines I've seen consumes about 1~2% of the captured gas as fuel gas.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Presence of Power&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Even if an operator strongly prefers electric models over gas engines, this preference does not always guarantee the viability of electric model installation. Some facilities lack access to power, or installing a generator may be too expensive. In such cases, the operator is forced to choose a gas engine model due to the lack of alternatives.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Concerns over Emissions&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Some companies prioritize minimizing their carbon footprint, while others do not. Those focused on emissions often prefer electric motors, believing electricity is "cleaner" than burning natural gas. However, this isn't always true, as 59% of U.S. electricity comes from hydrocarbons (coal and natural gas). Depending on the electricity source, electric motors may not be cleaner than gas engines. For instance, one customer study found gas engines cleaner than electric models due to the lack of "clean" electricity source near their facilities.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="3.1.-Gas-engine-compressor"&gt;3.1. Gas engine compressor&lt;a class="anchor-link" href="#3.1.-Gas-engine-compressor"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-13"&gt;Figure 13&lt;/a&gt; below is a picture of the Flogistix FX12 gas engine-driven oil-flooded screw compressor. This specific unit has two cooling fans (both powered by the gas engine): one for the discharge gas and lubricating oil, and another for the engine coolant. Larger units, such as Flogistix FX17 or FX20, share a single fan for cooling the discharge gas, lubricating oil, and engine coolant. This design varies depending on the model. The engine coolant is circulated between the engine and the fan to maintain the engine temperature within safe limits. The burned exhaust gas is vented through the top vent line, which is a source of emissions that some companies aim to remove by using electric models. The unit includes an engine oil reserve and an engine oil level maintainer. The maintainer is equipped with an electric switch that sends a shutdown signal to the PLC when the engine oil level is too low. Additionally, though not shown in the photo, the unit is equipped with a solar panel to power the PLC, as the PLC requires electricity. While the gas engine generates rotational energy, it cannot produce electricity without a generator.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-13"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic13.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 13:&lt;/strong&gt; Flogistix FX12 gas engine-driven oil-flooded screw compressor.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="3.2.-Electric-motor-compressor"&gt;3.2. Electric motor compressor&lt;a class="anchor-link" href="#3.2.-Electric-motor-compressor"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-14"&gt;Figure 14&lt;/a&gt; below is a picture of the Flogistix FX12 electric motor-driven oil-flooded screw compressor. This model has one fan for cooling the discharge gas and lubricating oil. It includes two motors: one for the cooling fan and one for the compressor. Its design is much simpler than the gas engine model, as it eliminates the need for engine coolant, engine oil, exhaust piping, a low engine oil level shutdown switch, a solar panel, and other components. The design and maintenance are simpler than gas engine models simply because fewer parts are involved. However, electric models are not viable in the absence of an electricity source.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-14"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_pic14.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 14:&lt;/strong&gt; Flogistix FX12 electric motor-driven oil-flooded screw compressor.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.-Compressor-Package-Key-Equipment-Summary"&gt;4. Compressor Package Key Equipment Summary&lt;a class="anchor-link" href="#4.-Compressor-Package-Key-Equipment-Summary"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; I recommend switching back and forth with &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;, &lt;a class="internal-link" href="#fig-16"&gt;16&lt;/a&gt;, &lt;a class="internal-link" href="#fig-17"&gt;17&lt;/a&gt;, and &lt;a class="internal-link" href="#fig-18"&gt;18&lt;/a&gt; while reading this section to aid your understanding.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A compressor &lt;strong&gt;"package"&lt;/strong&gt; refers to a complete system of process equipment that handles a compression process. Below is a quick overview of each key equipment before explaining the P&amp;ID and process flow.&lt;/p&gt;
&lt;hr/&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Suction Scrubber&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;A small two-phase separator that removes entrained liquids. Liquids fall due to gravity, while gas flows upward. Residual liquid is captured by a mist extractor/coalescer. Accumulated liquid is periodically removed by a discharge system. The vessel has level switch controller (LS-1010) and liquid dump valve (CV-1011) for automatic dump. It also has high liquid level shutdown (LSHH-1000).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Suction Liquid Discharge System&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Liquid discharge system is needed because the suction scrubber lacks sufficient pressure to push liquids out on its own. The system may use a pressurized blowdown with an integrated blowcase or an electric pump.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Integrated Blowcase&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;The blowcase is integrated inside and at the bottom of the suction scrubber. In &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;, V-100 is the suction scrubber, and V-101 is the blowcase. Liquid knockouts fall to the bottom of the scrubber and on top of the blowcase. Liquid flows downward into the blowcase due to gravity and accumulates inside. A level switch detects the liquid level inside the blowcase and activates a dump cycle when the level rises sufficiently. Pressure equalizing valve (CV-1001), pressure charge valve (CV-1010), liquid dump valve (CV-1011), and liquid level switch (LS-1010) make up the whole automated blowcase liquid dump system. The blowcase is not present in models that use an electric liquid pump for the dump cycle. Refer to &lt;a class="internal-link" href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;Section 6&lt;/a&gt; for detailed blowcase working mechanism. &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Electric Liquid Pump&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Used when a pneumatic liquid dump with a blowcase configuration is undesirable. In &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;, P-100 is the pump, and M-100 is its electric motor. The pump activates via an electrical signal from LSH-1000 when the liquid level is high and turns off once the level reaches the LSL-1000 setpoint.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Compression Chamber&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Where compression occurs. It has two inlets (gas and lube oil) and one outlet (pressurized gas-oil mixture). Intermeshing helical rotors reduce gas volume, increase pressure, and generate heat. Heat is absorbed by the lube oil flooding the chamber. The compressor is controlled by the PLC and powered by a driver. Refer to &lt;a class="internal-link" href="#2.-Screw-compressor-(core)-working-principles"&gt;Section 2&lt;/a&gt; for compressor details.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Driver&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Either a gas engine or electric motor. Generates rotational energy to turn the compressor rotors via a shaft. Separate or shared drivers can also power cooling fans. &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;, &lt;a class="internal-link" href="#fig-16"&gt;16&lt;/a&gt;, and &lt;a class="internal-link" href="#fig-17"&gt;17&lt;/a&gt; show eletric compressors. &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt; shows a gas engine compressor.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Discharge Scrubber&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;A small two-phase separator that separates pressurized and mixed-phase lube oil and gas. The vessel also acts as a reservoir for lube oil. Gas flows upward, while lube oil falls due to gravity. Around 97% of the lube oil is separated, but 3% remains as mist, requiring a coalescer to minimize oil loss. While the coalescer captures most of the entrained oil, a tiny fraction is lost to the gas line over time, necessitating periodic oil refills. Unlike the suction scrubber, the discharge scrubber doesn't require an independent liquid discharge system due to its high pressure. The vessel is equipped with a low-level shutdown for lube oil loss.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Fuel Pot Scrubber&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Used for gas-engine model only. In &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;, V-600 is the fuel pot scrubber. Combustion engine demands clean, dry fuel gas, achieved through the fuel pot scrubber which removes any residual entrained liquids one more time after the discharge scrubber (V-300). Unlike the suction scrubber V-100, V-600 doesn't need a blowcase dump system - its position downstream of the compressor provides sufficient pressure for liquid removal, though it still requires a level switch (LS-6000) and dump valve (CV-6000) for automation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Back Pressure Valve&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;A back pressure valve (BPV) is installed on the outlet line of the discharge scrubber. It maintains a set pressure on the vessel, ensuring proper lube oil injection pressure. The &lt;a href="https://www.leroigas.com/en-us/products" target="_blank"&gt;Leroi HG series&lt;/a&gt; manual specifies oil injection pressure to be 60â€“100 psi higher than the suction pressure.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Cooling Fan&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Provides cooling for engine coolant (gas engine model only), lube oil, and compressed gas. Lube oil and gas share one fan, while engine coolant may share the same fan or have an independent one. The fan driver can be a gas engine or electric motor.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;3-Way Thermostatic Valve&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;Adjusts the mixing ratio of hot oil (bypass cooler) and cooled oil to achieve a target temperature. This valve is crucial because lube oil and gas share the same fan, and the fan primarily targets gas temperature, requiring an additional control mechanism for the cooling oil target temperature.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Recycle Valve&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;When open, directs pressurized gas back to the suction scrubber. Because the suction side operates at a much lower pressure than the discharge side, gas preferentially flows back to the suction side. The valve receives open/close signals from the PLC. Recycle mode activates when the gas source vessel (tanks, VRTs, heaters, separators) lacks sufficient gas volume. Overdrawing the source vessel can lead to pressure control failure or vessel collapse. Recycle mode is preferred over a hard shutdown for operational continuity. The valve may be electric or pneumatic. &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt; and &lt;a class="internal-link" href="#fig-16"&gt;16&lt;/a&gt; show electric models. &lt;a class="internal-link" href="#fig-17"&gt;Figure 17&lt;/a&gt; and &lt;a class="internal-link" href="#fig-18"&gt;18&lt;/a&gt; show pneumatic models.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="row eq-terms-font eq-terms-border" style="border: none;"&gt;
&lt;div class="col-12 col-md-3 bold"&gt;&lt;p&gt;Skid&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-1 bold d-none d-md-block"&gt;&lt;p&gt;:&lt;p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class="col-12 col-md-8"&gt;
&lt;p&gt;A metal base on which compressor package components are mounted. The skid allows the compressor package to be transported by trucks or trailers.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr/&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="5.-Process-flow,-model-types-and-P&amp;ID"&gt;5. Process flow, model types and P&amp;ID&lt;a class="anchor-link" href="#5.-Process-flow,-model-types-and-P&amp;ID"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;This section explains the general process flow and piping and instrumentation diagrams (P&amp;ID) for oil-flooded screw compressor operations. The P&amp;IDs are simplified for illustration purposes and do not include all components. This section covers the four most common oil-flooded screw compressor design scenarios, listed from the simplest to the most complex designs (not in order of customer demand). For efficient learning, I recommend reading them in order. Zoom in or click on the diagrams in &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;, &lt;a class="internal-link" href="#fig-16"&gt;16&lt;/a&gt;, &lt;a class="internal-link" href="#fig-17"&gt;17&lt;/a&gt;, and &lt;a class="internal-link" href="#fig-18"&gt;18&lt;/a&gt; for magnified view. Refer &lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt; for P&amp;ID component labels.&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Process Flow Order&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Gas enters the suction scrubber; entrained liquids fall to the bottom and are periodically removed via pressurized gas blowdown or liquid pump.&lt;/li&gt;
&lt;li&gt;In the suction scrubber, gas travels upward, with residual liquid mist captured by a mist extractor.&lt;/li&gt;
&lt;li&gt;Gas and lube oil enter the compression chamber, where both are mixed and pressurized. When the oil enters the chamber, its temperature is fixed at around 230Â°F, controlled by the thermostatic valve setpoint.&lt;/li&gt;
&lt;li&gt;Heat is generated during compression. Lube oil absorbs it, causing the temperature to rise by 3â€“6Â°F higher than 230Â°F.&lt;/li&gt;
&lt;li&gt;The pressurized two-phase mixture exits the chamber.&lt;/li&gt;
&lt;li&gt;The two-phase mixture enters the discharge scrubber.&lt;/li&gt;
&lt;li&gt;In the discharge scrubber, 97% of the lube oil separates and falls to the bottom, while 3% is captured by a coalescer. A tiny fraction is still lost to the pipeline, requiring periodic lube oil refills.&lt;/li&gt;
&lt;li&gt;Gas is cooled by a fan to meet pipeline temperature requirements before leaving the skid.&lt;/li&gt;
&lt;li&gt;Separated lube oil undergoes a cooling process. Depending on its temperature, some oil bypasses the cooling fan, while some enters the fan to be cooled. The hot bypass oil (B port) and cooled oil (C port) mix at the 3-way thermostatic valve. The valve adjusts the mixing ratio to maintain the lube oil setpoint temperature around 230Â°F. The mixed oil exits the valve through the A port.&lt;/li&gt;
&lt;li&gt;Lube oil passes through the oil filter and re-enters the compression chamber to repeat the cycle.&lt;/li&gt;
&lt;li&gt;If the PLC activates recycle mode, the recycle valve opens, and gas is circulated within the skid instead of being discharged out of the skid.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="pid-terms" id="table-3"&gt;
&lt;div&gt;&lt;h4&gt;P&amp;ID Component Labels&lt;/h4&gt;&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border" style="border-top: 1.1px solid rgb(220 220 220 / 50%);"&gt;
&lt;div class="col-md-2"&gt;V-100&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Suction scrubber.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;V-101&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Integrated blowcase.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;V-300&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Discharge scrubber.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;V-600&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Fuel pot scrubber gas engine model.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;C-200&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Screw compressor.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;M-200&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Electric motor driver for compressor C-200.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;E-201&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Gas engine driver for C-200 and A-400.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;M-400&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Electric motor driver for aftercooler A-401 and A-402.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;A-400&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Aftercooler for gas engine coolant.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;A-401&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Aftercooler for lube oil.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;A-402&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Aftercooler for compressed gas.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PLC-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Control panel for the compressor package.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PSV-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure safety valve for suction scrubber (V-100).
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PSV-1010&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure safety valve for blowcase (V-101).
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PSV-3000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure safety valve for discharge scrubber (V-300).
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PSV-6000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure safety valve for fuel pot scrubber (V-600).
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;CV-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Recycle valve. Can be either pneumatic or electric. Fail-close.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;XV-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Solenoid valve for CV-1000 pneumatic supply control. Receives an electric signal from PLC-1000. Used only for pneumatic-type CV-1000.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;CV-1001&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure equalizing valve. Fail-open.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;CV-1010&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure charge valve. Fail-close.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;CV-1011&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Liquid dump valve for V-101. Fail-close.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;CV-6000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Liquid dump valve for V-600. Fail-close.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LS-1010&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Liquid level switch controller for V-101. Controls pneumatic supply to CV-1001, CV-1010, and CV-1011.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LS-6000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Liquid level switch controller for V-600. Controls pneumatic supply to CV-6000.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LSHH-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            High liquid level shutdown switch for V-100. Sends an electric signal to PLC-1000.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LSLL-3000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Low liquid level shutdown switch for V-300. Sends an electric signal to PLC-1000.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;BPR-3000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Back pressure regulator for V-300. Controls lube oil injection pressure. Set 60-100# higher than suction pressure.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;TCV-4000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            3-Way thermostatic valve for lube oil. Determines the mixing ratio of hot oil (cooler bypass) and cold oil to achieve a setpoint temperature of 230F.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;PR-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Pressure reducing regulator for recycle/blowcase gas. Protects equipment from overpressurization. Set below 50#.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;P-100&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Electric liquid pump to remove V-100 liquid.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;M-100&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Electric motor driver for P-100.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LSH-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            High level switch controller for V-100, M-100, and P-100. Sends a turn on signal to M-100.
        &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row eq-terms-font eq-terms-border"&gt;
&lt;div class="col-md-2"&gt;LSL-1000&lt;/div&gt;
&lt;div class="col-md-1 d-none d-md-block"&gt;:&lt;/div&gt;
&lt;div class="col-md-9"&gt;
            Low level switch controller for V-100, M-100, and P-100. Sends a turn off signal to M-100.
        &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 3:&lt;/strong&gt; P&amp;IDs component labels for &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;, &lt;a class="internal-link" href="#fig-16"&gt;16&lt;/a&gt;, &lt;a class="internal-link" href="#fig-17"&gt;17&lt;/a&gt;, and &lt;a class="internal-link" href="#fig-18"&gt;18&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Type-A:-Electric-Driver/Electric-Pump-Dump/Electric-Recycle"&gt;Type A: Electric Driver/Electric Pump Dump/Electric Recycle&lt;a class="anchor-link" href="#Type-A:-Electric-Driver/Electric-Pump-Dump/Electric-Recycle"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;Configuration motive&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;This is the least popular model due to higher cost. This configuration is fully electric, with the compressor driver, recycle valve, and liquid dump system all powered electrically. It is the simplest design among the four but also the least common. This is because running an electric liquid pump increases operation and maintenance costs compared to a pneumatic liquid dump system. This configuration is typically used when:&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;ol&gt;
&lt;li&gt;The customer prefers an electric model over a gas engine to minimize carbon footprint.&lt;/li&gt;
&lt;li&gt;They don't have clean instrument air supply to (instead of natural gas) to operate pneumatic valves.&lt;/li&gt;
&lt;li&gt;It is not easy or feasible to route control valve vent gas to a clean disposal system (most flow control valves vent used pilot gas)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;p&gt;All conditions must be satisfied for this configuration to be chosen. While most operators do not prioritize control valve vent gas due to minimal emissions, some companies maintain a zero-tolerance stance on emissions, making this design necessary.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text"&gt;Characteristics&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;Because the system uses an electric motor-driven liquid pump for liquid discharge, it does not require complex control valves or pneumatic pilot gas lines to operate a pneumatic dump system. It also eliminates the need for an integrated blowcase inside the suction scrubber. Instead, the system uses two additional liquid level switches (positioned below the high liquid level kill switch) to control the pump. In &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt; below, when the liquid level rises above LSH-1000, the switch sends a signal to turn on the pump. The pump operates until the liquid level drops to LSL-1000, at which point it turns off.&lt;/p&gt;
&lt;p&gt;However, this configuration has some downsides. The electric actuator for the recycle valve requires significantly higher maintenance costs and more frequent maintenance compared to a pneumatically operated recycle valve. Additionally, the operational and maintenance costs of the electric pump are higher than those of a pneumatic dump system.&lt;/p&gt;
&lt;div class="row" id="fig-15"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PFD1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 15:&lt;/strong&gt; Simplified P&amp;ID for electric motor driver for rotor + eletric recycle valve + eletric pump liquid dump. Not all parts details are shown for simplicity.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Type-B:-Electric/Pneumatic-Dump/Electric-Recycle"&gt;Type B: Electric/Pneumatic Dump/Electric Recycle&lt;a class="anchor-link" href="#Type-B:-Electric/Pneumatic-Dump/Electric-Recycle"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;Configuration motive&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;This is the 3rd popular model among the four. This configuration is partially electric. The compressor driver and recycle valve are electrically powered, but the liquid dump system remains pneumatic. This configuration is typically used when:&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;ol&gt;
&lt;li&gt;The customer prefers an electric model over a gas engine to minimize carbon footprint.&lt;/li&gt;
&lt;li&gt;They don't have clean instrument air supply to (instead of natural gas) to operate pneumatic valves.&lt;/li&gt;
&lt;li&gt;They do not want to operate an electric liquid dump system due to higher costs and maintenance efforts.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;p&gt;All conditions must be satisfied for this configuration to be chosen. For the recycle valve, pneumatic valves are cheaper and easier to maintain, but some operators avoid them because they vent exhaust pilot gas. As a result, an electric actuator is used to power the recycle valve.&lt;/p&gt;
&lt;p&gt;The flow control valves for the pneumatic dump system has the same vent pilot gas issues. However, replacing them with an electric liquid pump is often not desirable due to higher costs and maintenance efforts compared to the competitive advantages of a pneumatic dump system. Therefore, a compromise is made by retaining the pneumatic liquid dump system while using an electric actuator for the recycle valve.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text"&gt;Characteristics&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;The key advancement over the previous fully electric model (&lt;a class="internal-link" href="#Type-A:-Electric-Driver/Electric-Pump-Dump/Electric-Recycle"&gt;Type A&lt;/a&gt;) is the &lt;u&gt;blowcase system&lt;/u&gt; - a term derived from its function of using pressurized gas to "blow away" accumulated liquid. The  blowcase replaces the electric pump by utilizing the compressor's readily available discharge pressure. When liquid in V-101 exceeds the LS-1010 setpoint, the system automatically initiates a dump cycle, using 30-50# gas from the V-300 discharge scrubber line to push out accumulated liquid. Rather than depending on external power, this design repurposes the compressor's existing energy, reducing maintenance costs and eliminating unnecessary electrical components. By making full use of already available pressure, the system delivers a more cost-effective solution. Refer to &lt;a class="internal-link" href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;Section 6&lt;/a&gt; for blowcase operation details.&lt;/p&gt;
&lt;p&gt;One downside of this configuration stems from the pilot gas venting issues for the control valve operations. The pneumatically operated valves (CV-1001, CV-1010, and CV-1011) require 20-30 psi of supply gas (either instrument air or gas) to actuate their diaphragms, which is subsequently vented to atmosphere after each operation. While these vent lines could theoretically be connected to a closed disposal system, most field installations vent directly to atmosphere due to the additional piping complexity and cost involved. This venting becomes a continuous source of emissions, representing an environmental tradeoff of the blowcase system's otherwise efficient design. While these gas venting issues can be eliminated by installing an air compressor on site, this adds additional costs for both installation and maintenance of the air compressor, and instrument air line tubings.&lt;/p&gt;
&lt;div class="row" id="fig-16"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PFD2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 16:&lt;/strong&gt; Simplified P&amp;ID for electric motor driver for rotor + electric recycle valve + pneumatic liquid dump. Not all parts details are shown for simplicity.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Type-C:-Electric/Pneumatic-Dump/Pneumatic-Recycle"&gt;Type C: Electric/Pneumatic Dump/Pneumatic Recycle&lt;a class="anchor-link" href="#Type-C:-Electric/Pneumatic-Dump/Pneumatic-Recycle"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;Configuration motive&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;This ranks as the second most common configuration, just slightly behind gas engine models due to rising emission concerns. The system uses a hybrid approach - while the compressor driver is electric, both the recycle valve and liquid dump system operate pneumatically. This configuration typically is used when:&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;ol&gt;
&lt;li&gt;The customer prefers an electric model over a gas engine to minimize carbon footprint.&lt;/li&gt;
&lt;li&gt;The customer considers control valve vent gas emissions to be minimal.&lt;/li&gt;
&lt;li&gt;They do not want to operate an electric liquid dump system due to higher costs and maintenance efforts.&lt;/li&gt;
&lt;li&gt;They have clean instrument air supply to (instead of natural gas) to operate pneumatic valves.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;p&gt;This configuration requires condition 1 plus at least one other condition to justify selection. If an air compressor exists on-site, the electric valve's sole advantage (emissions reduction) becomes irrelevant for compressor applications. Conversely, even without an air compressor, operators often accept the minimal control valve emissions rather than opting for electric recycle valves or liquid pumps due to maintenance cost.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text"&gt;Characteristics&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;The main difference from &lt;a class="internal-link" href="#Type-B:-Electric/Pneumatic-Dump/Electric-Recycle"&gt;Type B&lt;/a&gt; is the replacement of the electric recycle valve CV-1000 with a pneumatic version, chosen for its longer-lasting diaphragm valve that reduces maintenance compared to electric actuators. This modification requires adding a normally-closed solenoid valve XV-1000 on the pilot gas line since pneumatic valves cannot directly interpret electrical signals from PLC-1000. In normal operation, XV-1000 blocks pilot gas to CV-1000, keeping it closed. When PLC-1000 activates recycle mode, it energizes XV-1000 to open, allowing pilot gas to lift CV-1000's diaphragm and open the recycle valve.&lt;/p&gt;
&lt;div class="row" id="fig-17"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PFD3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 17:&lt;/strong&gt; Simplified P&amp;ID for electric motor driver for rotor + pneumatic recycle valve + pneumatic liquid dump. Not all parts details are shown for simplicity.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Type-D:-Gas-Engine/Pneumatic-Dump/Pneumatic-Recycle"&gt;Type D: Gas Engine/Pneumatic Dump/Pneumatic Recycle&lt;a class="anchor-link" href="#Type-D:-Gas-Engine/Pneumatic-Dump/Pneumatic-Recycle"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;Configuration motive&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;Finally the gas engine model. This is the most popular model due to the cheapest cost. Everything is powered by natural gas. This configuration typically is used when:&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;ol&gt;
&lt;li&gt;Customer requires emissions control but lacks access to electric power (no alternative)&lt;/li&gt;
&lt;li&gt;Customer has electric power available, but source is high-emission (e.g., coal-fired plant), making gas engines environmentally preferable&lt;/li&gt;
&lt;li&gt;Customer does not consider emissions reduction a operational priority&lt;/li&gt;
&lt;li&gt;Customer's primary decision factor is achieving lowest operational costs&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;p&gt;Meeting one of the conditions suffices for choosing this configuration. Gas engine models tend to be slightly cheaper than eletric models. Since operating cost is the biggest concern for most operators, people tend to prefer this model.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text"&gt;Characteristics&lt;/span&gt;
&lt;/div&gt;&lt;p&gt;The engine installation differs fundamentally from electric motors by requiring multiple support systems. First, combustion engine demands clean, dry fuel gas, achieved through the fuel pot scrubber (V-600) which removes any residual entrained liquids one more time after the discharge scrubber (V-300). Unlike the suction scrubber V-100, V-600 doesn't need a blowcase dump system - its position downstream of the compressor provides sufficient pressure for liquid removal, though it still requires a level switch (LS-6000) and dump valve (CV-6000) for automation.&lt;/p&gt;
&lt;p&gt;Second, the engine cooling system requires both a coolant and a cooling fan for the coolant. The fan comes in two configurations: either as independent units solely for engine coolant (shown in &lt;a class="internal-link" href="#fig-13"&gt;Figure 13&lt;/a&gt;), or as shared systems that cool both the engine's lube oil and compressed gas simultaneously (demonstrated in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt;). The shared configuration reduces components but requires proper sizing to handle combined thermal loads, while dedicated fans offer more precise temperature control at the cost of additional equipment.&lt;/p&gt;
&lt;p&gt;Third, the engine's rotating shaft directly powers these cooling fans, providing mechanical efficiency by eliminating separate electric motors. This integrated power transmission represents a key advantage of engine-driven configurations.&lt;/p&gt;
&lt;div class="row" id="fig-18"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PFD4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 18:&lt;/strong&gt; Simplified P&amp;ID for gas engine driver for rotor + pneumatic recycle valve + pneumatic liquid dump. Not all parts details are shown for simplicity.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;6. Pneumatic liquid dump cycle (blowcase)&lt;a class="anchor-link" href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The blowcase system solves the limitation of compressor suction scrubbers lacking pressure to dump liquid. These scrubbers separate gas and liquids - gas goes up while liquid falls to the bottom due to gravity. For liquid dumping, suction scrubbers differ from upstream separators because they lack sufficient pressure to dump liquid on their own. While oil-flooded screw compressors have a suction pressure range of 0-50 psig, vapor recovery applications on VRTs (3-5 psig) or atmospheric tanks (0-1 psig) don't reach the minimum 20-30 psig needed for autonomous liquid dumping.&lt;/p&gt;
&lt;p&gt;Liquid from scrubbers is typically dumped to atmospheric storage tanks. The tank's inlet ports are located on its roof. These tanks are usually 20-25 ft tall, requiring the liquid to overcome both the vertical hydrostatic head (10.825 psi for 25 ft tank height Ã— 0.433 psi/ft liquid denstiy) and additional pressure losses through piping and control valves. In practice, operators set dump pressures at 30-50 psig for reliable operation, which explains why upstream heater treaters maintain minimum 20-30 psig. Suction scrubbers usually don't have this much pressure.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;, the blowcase (V-101) uses the compressor's discharge pressure (60-350 psig from V-300 discharge scrubber), regulated down to about 50 psig or less (the compressor's maximum suction pressure rating) via a pressure reducing regulator (PR-1000). When the liquid level in V-101 exceeds the level switch LS-1010 setpoint, the system automatically initiates a dump cycle, using this regulated gas pressure to push out accumulated liquid. This "blow away" function gives the system its name and provides a solution that uses existing system pressure rather than requiring additional power sources such as eletric liquid pumps.&lt;/p&gt;
&lt;p&gt;Read the below &lt;strong&gt;Liquid Dump Cycle Order&lt;/strong&gt; in conjunction with &lt;a class="internal-link" href="#slideshow-2"&gt;Slideshow 2&lt;/a&gt; for better understanding of the dump cycle.&lt;/p&gt;
&lt;div class="ordered-list mt-4"&gt;
&lt;h2&gt;Liquid Dump Cycle Order&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Insufficient liquid in V-101 to trigger dump cycle. LS-1010 remains closed, blocking instrument supply gas. Without supply pressure, fail-close valves (CV-1010 and CV-1011) remain closed while fail-open valve (CV-1001) stays open. Pressure equalizing valve CV-1001 maintains equilibrium between V-100 and V-101 for continuous gravitational liquid flow from V-100 to V-101 (see &lt;a class="internal-link" href="#note_1"&gt;Note 1&lt;/a&gt;). Liquids accumulate in V-100.&lt;/li&gt;
&lt;li&gt;Liquid level reaches threshold. LS-1010's floating element triggers at high level (see &lt;a class="internal-link" href="#7.5.-Liquid-level-switches"&gt;Section 7.5&lt;/a&gt; for level switch operation).&lt;/li&gt;
&lt;li&gt;Level switch opens, allowing pneumatic supply (instrument air/gas at 20-30 psig) to pass through. This is the recommended diaphragm working pressure range for the control valves.&lt;/li&gt;
&lt;li&gt;Pneumatic supply enters diaphragm chambers of CV-1001, CV-1010 and CV-1011. CV-1001 closes (fail-open design). CV-1010 and CV-1011 open (fail-close design). Pressure charge valve CV-1010 admits 50# blowdown gas into V-101. The drain line check valve closes to prevent high-pressure backflow to V-100. With CV-1001 closed, V-101's vapor space pressurizes without due to lack of relief point.&lt;/li&gt;
&lt;li&gt;V-101 vapor pressure exerts downward force on liquid surface. With liquid dump valve CV-1011 open, liquid flows through dump line to relieve pressure.&lt;/li&gt;
&lt;li&gt;Liquid level drops sufficiently. LS-1010's floating element triggers at low level (see &lt;a class="internal-link" href="#7.5.-Liquid-level-switches"&gt;Section 7.5&lt;/a&gt; for level switch operation).&lt;/li&gt;
&lt;li&gt;LS-1010 closes, cutting off pneumatic supply.&lt;/li&gt;
&lt;li&gt;Pneumatic supply "fails". CV-1001 (fail-open) opens. CV-1010 and CV-1011 (fail-close) close.&lt;/li&gt;
&lt;li&gt;With CV-1001 open, V-101 vapor space pressure equalizes with V-100. Check valve opens.&lt;/li&gt;
&lt;li&gt;Liquid resumes draining from V-100 to V-101. Cycle repeats.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="slideshow-wrapper" id="slideshow-2"&gt;
&lt;div class="linkedin-slideshow"&gt;
&lt;div class="slideshow-band top-band"&gt;
&lt;div class="slideshow-title"&gt;Blowcase Working Mechanism&lt;/div&gt;
&lt;div class="fullscreen-toggle"&gt;
&lt;svg class="enter-fullscreen" height="24" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;svg class="exit-fullscreen" height="24" style="display:none;" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slides-container"&gt;
&lt;div class="slide active"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_1.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_2.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_3.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_4.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_5.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_6.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_7.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_8.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_9.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_blowcase_10.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slideshow-band bottom-band"&gt;
&lt;div class="page-counter"&gt;1/10&lt;/div&gt;
&lt;div class="progress-track"&gt;
&lt;div class="progress-step active"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="bottom-nav"&gt;
&lt;button class="nav-button bottom-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button bottom-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;button class="nav-button image-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button image-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Slideshow 2:&lt;/strong&gt; Demonstrates the liquid dump cycle of an integrated blowcase (V-101) system inside a suction scrubber (V-100) using pressurized gas blowdown. The cycle initiates when the liquid level exceeds the level switch controller's (LS-1010) setpoint. During operation, 1) Pressurized gas (30-50 psig range) enters from the discharge scrubber, 2) The gas forces the liquid out through the dump line, and 3) The cycle completes when the liquid level falls below the setpoint. Note that the systems that are not part of the liquid dump cycle (recylce, PSVs, PLC, high level kill switch) are hidden with 90% transparency for enhance reader's understanding.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="alert alert-info" id="note_1"&gt;
&lt;h4&gt;Note 1: Pressure equalizing valve (CV-1001)&lt;/h4&gt;
&lt;p&gt;The pressure equalizing valve (CV-1001) plays a critical role ensuring the gravitational flow of liquid knockouts from suction scrubber (V-100) to blowcase (V-101) through the downward-sloping piping with a check valve.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#slideshow-2"&gt;Slideshow 2&lt;/a&gt;, when dump cycle is off, liquid continues to flow downward from V-100 to V-101 due to gravity. CV-1001, an equalizing valve, maintains pressure equilibrium between V-100 and V-101. CV-1001 remains open during this phaseâ€”it is fail-open, meaning it stays open in the absence of pneumatic supply. The purpose of CV-1001 being open is to ensure the gravitational flow of liquid from V-100 into V-101. Assume the downward-sloping pipe between V-100 and V-101 has a 1-ft height difference between the inlet and outlet. With a liquid density of 0.433 psi/ft in the suction scrubber, a 0.433 psi gravitational hydrostatic head drives the liquid from V-100 into V-101. If some of the liquid in V-101 vaporizes (highly likely due to the volatile nature of the liquids for compressor applications) because of conditional changes, the vapors accumulate and pressurize V-101. While the check valve prevents these volatile vapors from backflowing into V-100, the liquid accumulating in the suction scrubber will be unable to flow downward into V-101 due to the higher pressure vapors of V-101 blocking the other side of the check valve. It is important to note that the absence or failure of CV-1001 can trigger a high-level kill (LSHH-1000) because the liquids in V-100 cannot flow down to V-101.&lt;/p&gt;
&lt;p&gt;When dump cycle is on, CV-1001 is closed to ensure the blowdown gas pressure is directed only to V-101 and to liquid dump destination, preventing pressure from being dissipated into V-100.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="7.-Control-Devices-Working-Mechanisms"&gt;7. Control Devices Working Mechanisms&lt;a class="anchor-link" href="#7.-Control-Devices-Working-Mechanisms"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.1.-Electric-flow-control-valve"&gt;7.1. Electric flow control valve&lt;a class="anchor-link" href="#7.1.-Electric-flow-control-valve"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Electric flow control valves operate on a straightforward principle. Consider the recycle valve shown in &lt;a class="internal-link" href="#fig-19"&gt;Figure 19&lt;/a&gt; and &lt;a class="internal-link" href="#fig-20"&gt;20&lt;/a&gt; as an example. The valve opens when receiving an electric signal from the PLC to initiate recycle mode.&lt;/p&gt;
&lt;p&gt;The valve consists of three primary components: the electric motor which provides driving power, the linear adapter that transfers power to the piston for opening/closing the valve, and the valve body which controls the flow of target fluid.&lt;/p&gt;
&lt;p&gt;The key advantage over pneumatic control valves is zero emissions since it doesn't vent supply gas after each operation on/off. However, this comes with trade-offs: the motor costs more than a pneumatic diaphragm actuator and requires more frequent maintenance.&lt;/p&gt;
&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-19"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 19:&lt;/strong&gt; Electric actuator recycle valve for oil-flooded screw compressor suction scrubber (CV-1000 in &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-20"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 20:&lt;/strong&gt; Electric flow control valve components showing the motor (provides power), linear adapter (transfers to piston), and valve body (controls fluid flow) (CV-1000 in &lt;a class="internal-link" href="#fig-18"&gt;Figure 16&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.2.-Pneumatic-flow-control-valve"&gt;7.2. Pneumatic flow control valve&lt;a class="anchor-link" href="#7.2.-Pneumatic-flow-control-valve"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The working principles of pneumatic control valves are more complex than their electric counterparts. Take a look at the fail-close pneumatic recycle valve (CV-1000) shown in &lt;a class="internal-link" href="#fig-21"&gt;Figure 21&lt;/a&gt; and &lt;a class="internal-link" href="#fig-22"&gt;22&lt;/a&gt;. The pneumatic valves differ from electric types in two primary ways: they lack an electric motor and instead feature a pneumatic supply line. The piston movement mechanism also differs significantly - where electric valves use motor power to directly drive the piston, pneumatic valves rely on supply pressure acting on a diaphragm plate. This pressure exerts force on the diaphragm, which moves upward or downward depending on the configuration, and this motion is transferred to the piston through their mechanical connection.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-23"&gt;Figure 23&lt;/a&gt; shows a pressure equalizing valve (CV-1001). This is a fail-open type valve. The valve stays open in the absence of pressure supply. When supply pressure is present, the pressure enters from the top-side of the diaphragm chamber, and pushes down on the diaphragm plate and the piston, closing the valve.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-24"&gt;Figure 24&lt;/a&gt; and &lt;a class="internal-link" href="#fig-25"&gt;25&lt;/a&gt; illustrate fail-close (FC) and fail-open (FO) valve configurations. The "fail" condition occurs when pressure supply is lost, either through mechanical failure of supply lines or intentional shutdown for process control. Valve selection between FC and FO depends primarily on safety considerations - determining whether the safer failure state is open or closed for the specific application. Secondary considerations include existing piping configuration and process requirements.&lt;/p&gt;&lt;p&gt;A key limitation of pneumatic control valves is their inability to directly receive electric signals. &lt;strong&gt;&lt;u&gt;This necessitates installing a solenoid valve in the pneumatic supply line to interface with electronic control systems.&lt;/u&gt;&lt;/strong&gt; The solenoid valve converts electrical signals from the control system into pneumatic actions. Detailed specifications of solenoid valves are covered in &lt;a class="internal-link" href="#7.3.-3-Way-solenoid-valve"&gt;Section 7.3&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Note that the liquid dump valves (CV-1011 and CV-6000) shown in &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;) are also pneumatic-type flow control valves too.&lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-21"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 21:&lt;/strong&gt; Fail-close pneumatic recycle valve (CV-1000 in &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;) installation for oil-flooded screw compressor suction scrubber. The valve is in closed position.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_75 mobile_responsive_plot_full_width" id="fig-22"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 22:&lt;/strong&gt; Fail-close pneumatic recycle valve (CV-1000 in &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;) components showing fail-close mechanism. The diaphragm-piston assembly connects to the valve body. Supply pressure lifts the diaphragm to open the valve (piston moves upward). On pressure loss, the piston returns to its fail-safe closed position. Pneumatic supply control is achieved through either a solenoid valve (electric signal) or pilot valve (pressure signal). Shown in closed position.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-23"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_eqvalve1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 23:&lt;/strong&gt; Fail-open pneumatic equalizing valve (CV-1001 in &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;, angled-body) installation for oil-flooded screw compressor suction scrubber. Pressure supply enters from the top-side of the pancake to press down on the diaphragm plate, closing the piston. Loss of supply pressure opens the valve. Shown in open position. The silver rectangular object mounted on top of the pancake on the pneumatic supply line is a proportioning valve, which allows gradual entrance of pneumatic supply to prevent the valve from diaphragm plate from slamming shut open/close.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_75 mobile_responsive_plot_full_width" id="fig-24"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_FC.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 24:&lt;/strong&gt; Illustration of fail-close valve. The valve closes on absence ("fail") of pressure supply. Image adapted from: &lt;a href="https://www.youtube.com/watch?v=gHdEis_NhS0" target="_blank"&gt;Kimray video&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_75 mobile_responsive_plot_full_width" id="fig-25"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_FO.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 25:&lt;/strong&gt; Illustration of fail-open valve. The valve opens on absence ("fail") of pressure supply. Image adapted from: &lt;a href="https://www.youtube.com/watch?v=gHdEis_NhS0" target="_blank"&gt;Kimray video&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.3.-Solenoid-valve"&gt;7.3. Solenoid valve&lt;a class="anchor-link" href="#7.3.-Solenoid-valve"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Solenoid valves are essentially an electric control adapters for pneumatically operated valves. It solves the problem of pneumatic valves' inability to read electric signals from a computer. These valves correspond to XV-1000 in &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt;. See &lt;a class="internal-link" href="#fig-26"&gt;Figure 26&lt;/a&gt; below for a representative solenoid valve diagram. Note that the venting of residual pressure between the diaphragm chamber of a flow control valve and the [CYL]  port of a solenoid valve is a source of emissions when natural gas is used for pneumatic supply, instead of air compressors. For demonstration, consider solenoid installation on the pneumatic supply line for the recycle valve CV-1000.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;3-Way Solenoid Operation Sequence&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Energized State (Recycle Mode Active):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;PLC sends electric current through solenoid wiring&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Current creates magnetic field around coil&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Plunger lifts upward, opening flow passage&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Pneumatic supply flows from IN port to CYL port&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Supply pressure activates control valve diaphragm&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Diaphragm lifts piston, opening recycle valve CV-1000&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;De-energized State (Recycle Mode Stopped):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;PLC cuts power to solenoid&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Plunger returns downward via spring force&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Main supply path (IN to CYL) seals shut&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Residual pressure vents through EXH port&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Control valve returns to fail-safe position&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Diaphragm falls with piston. CV-1000 fully shuts&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-26"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_solenoid.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 26:&lt;/strong&gt; An example of a 3-way solenoid valve. [IN] is the inlet. [CYL] is the outlet. [EXH] is the pressure vent port when the solenoid gets close signal from a computure. Image adapted from: &lt;a href="https://www.stcvalve.com/solenoid_valve_specifications_and_dimenisons_3S035.htm" target="_blank"&gt;STC valve&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;hr class="black-hr"/&gt;&lt;p&gt;Another application of solenoid control is in well pad emergency shutdown (ESD) systems. Level gauge sensors monitoring oil/water tanks and pressure transmitters (PTs) installed on separators serve as monitoring devices. When these instruments detect out-of-control conditions, they send emergency signals through electrical wiring to the facility control panel. The system responds by activating a fail-close pneumatically operated shutdown valve (SDV) at the wellhead. This activation occurs when the solenoid interrupts the pneumatic supply pressure that normally keeps the SDV's diaphragm lifted. With the pressure supply cut off, the diaphragm releases and the valve returns to its fail-safe closed position. This automated emergency action prevents hazardous situations including and separator ruptures that could result from overpressure conditions and tank overflows.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#slideshow-3"&gt;Slideshow 3&lt;/a&gt; below illustrates the solenoid installation in the pneumatic supply line to the control valve pilot. This specific configuration shows a suction control valve (see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt;), which is a type of a fail-close pilot-operated pressure reducing regulator. In standard operation without the solenoid, the mounted pilot on the top left maintains primary control of pneumatic supply flow based on downstream pressure requirements. The solenoid installation introduces secondary electronic control that can override the pilot's pressure-based regulation when computer intervention is required.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="slideshow-wrapper" id="slideshow-3"&gt;
&lt;div class="linkedin-slideshow"&gt;
&lt;div class="slideshow-band top-band"&gt;
&lt;div class="slideshow-title"&gt;Solenoid valve installation for pneumatic control valves&lt;/div&gt;
&lt;div class="fullscreen-toggle"&gt;
&lt;svg class="enter-fullscreen" height="24" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;svg class="exit-fullscreen" height="24" style="display:none;" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slides-container"&gt;
&lt;div class="slide active"&gt;&lt;img class="slide-image" src="jupyter_images/screw_solenoid__2.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_solenoid__3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slideshow-band bottom-band"&gt;
&lt;div class="page-counter"&gt;1/2&lt;/div&gt;
&lt;div class="progress-track"&gt;
&lt;div class="progress-step active"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="bottom-nav"&gt;
&lt;button class="nav-button bottom-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button bottom-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;button class="nav-button image-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button image-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Slideshow 3:&lt;/strong&gt; Illustration of a solenoid valve inturruption on a fail-close pilot-operated pressure reducing regulator. Image adapted from: &lt;a href="https://www.youtube.com/watch?v=yo60YLZIEIs" target="_blank"&gt;Kimary video&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="7.4.-3-Way-thermostatic-valve"&gt;7.4. 3-Way thermostatic valve&lt;a class="anchor-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Oil-flooded screw compressors use a 3-way thermostatic valve to control lube oil injection temperature. The lube oil enters the compression chamber, mix with the process gas, and absorbs heat of compression. The 2-phase mixture leaving the chamber pickups 5-15Â°F increase in temperature (except during recycle mode, see &lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;). This temperature maintains the operating temperature of the whole unit.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-27"&gt;Figure 27&lt;/a&gt; shows a typical installation on an electric compressor (the setup is the same for gas engine models). Inside the valve is a wax-based thermal element that expands or contracts in response to temperature, adjusting its position to regulate oil flow. The valve maintains a target temperature at the outlet (A-port) by blending hot bypass oil from the B-port with cooled oil from the C-port. The wax element determines the proper mixing ratio between the hot bypass oil and cooled oil. The wax must be physically swapped in the field to change the setpointâ€”there are no adjustable screws or dials. These valves are usually set anywhere between 200-250Â°F depending on applications.&lt;/p&gt;
&lt;p&gt;Assume a 230Â°F setpoint with a Â±3Â°F tolerance. The illustration below shows how the valve responds under different scenarios based on incoming oil temperature and cooler performance.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;3-Way Thermostat Valve Operation Scenarios @ 230Â°F Setpoint&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;Incoming oil is above 230Â°F (e.g., 250Â°F) and the cooling fan succeeds (e.g., delivers 210Â°F):&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The valve partially opens both the B-port (bypass) and the C-port (cooler) to blend the hot 250Â°F bypass oil with the cooled 210Â°F oil. This mixing balances the streams to achieve the 230Â°F setpoint at the A-port. The thermal actuator dynamically adjusts the flow proportions, ensuring neither B nor C is fully closed under ideal cooling conditions. Example process simulation of this operation is shown in &lt;a class="internal-link" href="#slideshow-4"&gt;Slideshow 4&lt;/a&gt;. For the 250Â°F incoming oil scenario, 84% of bypass cooler (B-port) and the remaining 16% was cooled to 122Â°F (C-port) and achieved 230Â°F temperature at the A-port.&lt;/p&gt;
&lt;/li&gt;
&lt;li style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;Incoming oil is above 230Â°F (e.g., 250Â°F) and the cooling fan fails (e.g., only cools to 240Â°F):&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The valve fully closes the B-port (bypass) and fully opens the C-port to rely solely on the cooled path. However, since the cooled oil is still above the 230Â°F setpoint, the outlet temperature at the A-port will stabilize above target (e.g., 240Â°F). This scenario indicates the cooling fan is undersized or overloaded. High temperature shutdown is likely to trigger.&lt;/p&gt;
&lt;/li&gt;
&lt;li style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;Incoming oil is below 230Â°F (e.g., 210Â°F):&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Since the oil is already below the 230Â°F setpoint, the valve fully closes the C-port (cooler) and fully opens the B-port (bypass). All flow is diverted through the bypass to avoid unnecessary cooling. The outlet temperature at the A-port will match the incoming temperature (210Â°F), and no mixing is performed. This indicates insufficient heat of compression generated due to lack of gas volume.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;&lt;div class="row" id="fig-27"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_thermo1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 27:&lt;/strong&gt; 3-way thermostatic valve installation on an electric oil-flooded screw compressor skid. Left side shows the connected piping and air cooler. The upper fan bundle handles oil cooling (connected to the thermostatic valve), while the lower bundle handles gas aftercooling (unrelated to the valve). The valve's internal wax expansion element automatically adjusts to maintain the A-port outlet temperature at its factory-set point (typically 200-250Â°F). The wax position determines the mixing ratio between hot bypass oil (entering through B-port) and cooled oil (entering through C-port). Changing the temperature setpoint requires field replacement of the wax element.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="slideshow-wrapper" id="slideshow-4"&gt;
&lt;div class="linkedin-slideshow"&gt;
&lt;div class="slideshow-band top-band"&gt;
&lt;div class="slideshow-title"&gt;3-Way thermostatic valve hot/cool split ratio simulation (with BR&amp;E ProMax)&lt;/div&gt;
&lt;div class="fullscreen-toggle"&gt;
&lt;svg class="enter-fullscreen" height="24" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;svg class="exit-fullscreen" height="24" style="display:none;" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slides-container"&gt;
&lt;div class="slide active"&gt;&lt;img class="slide-image" src="jupyter_images/screw_thermo_promax_3.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_thermo_promax_2.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_thermo_promax_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slideshow-band bottom-band"&gt;
&lt;div class="page-counter"&gt;1/3&lt;/div&gt;
&lt;div class="progress-track"&gt;
&lt;div class="progress-step active"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="bottom-nav"&gt;
&lt;button class="nav-button bottom-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button bottom-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;button class="nav-button image-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button image-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;
&lt;strong&gt;Slideshow 4:&lt;/strong&gt; Simulation of 3-way thermostatic valve operation set at 230Â°F with varying inlet oil temperatures, demonstrating oil flow splits between the cooler bypass (hot, B-port) and cooler path (cold, C-port) to maintain target outlet temperature at A-port. The simulation assumes constant cooler performance with fixed sizing (configuration not shown). The valve's internal thermal element (typically an expanding wax thermocouple) automatically adjusts the hot/cold mixing ratio through real-time temperature response, with the simulation calculating the exact split ratios required to achieve the 230Â°F setpoint.
    &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;hr/&gt;
&lt;p&gt;The role of the 3-way thermostat valve differs between electric and gas engine compressor models. While detailed temperature control operations for both models are discussed in &lt;a class="internal-link" href="#9.-Temperature-control"&gt;Section 9&lt;/a&gt;, the following provides a quick overview of the functional differences between model types:&lt;/p&gt;
&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;Electric&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Electric compressors have a dedicated motor driver for the cooling fan. The motor receives a control signal from the PLC to adjust fan RPM based on lube oil temperature feedback. Fan RPM adjustment provides the primary temperature control. The thermostat valve serves as a secondary backup, preventing high-temperature spikes if the fan cannot react quickly enough to sudden load changes. Refer to &lt;a class="internal-link" href="#9.1.-Electric-models"&gt;Section 9.1&lt;/a&gt; for details on electric model temperature control.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;Gas Engine&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Gas engine compressors have only one driverâ€”the engine crankshaftâ€”which extends to both sides: one side drives the compressor rotors, and the other side drives the cooling fan through a belt-pulley assembly. The PLC prioritizes RPM control for the rotors, causing the cooling fan RPM to float. Real-time fan speed control is not possible. The thermostat valve acts as the sole real-time temperature control. However, the valve cannot maintain the target temperature if the fan cannot remove sufficient heat, especially during recycle mode (see &lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;) when both compressor and fan RPM decrease, reducing cooling capacity. Refer to &lt;a class="internal-link" href="#9.2.-Gas-engine-models"&gt;Section 9.2&lt;/a&gt; for gas engine temperature control details.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Electric models benefit from having two temperature control mechanisms: fan RPM adjustment as the primary control, and the thermostat valve as the secondary control. Gas engine models rely solely on the thermostat valve. This fundamental difference makes electric models superior in cooling performance compared to gas engine models.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.5.-Liquid-level-switches"&gt;7.5. Liquid level switches&lt;a class="anchor-link" href="#7.5.-Liquid-level-switches"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Unlike pressure or temperature transmitters (typically under &lt;span&gt;$&lt;/span&gt;1,000), continuous level transmitters are significantly more expensive (&lt;span&gt;$&lt;/span&gt;2,000-&lt;span&gt;$&lt;/span&gt;6,000). As a cost-effective alternative, many systems use simple float switches instead of continuous monitoring devices. These switches employ a floating element to detect when liquid levels reach predetermined setpoints, triggering dump valve signals, alarms, or shutdowns without providing constant level data. Continuous monitoring type level gauge transmitters are usually used for storage tanks, while float switches are used for separators and scrubbers.&lt;/p&gt;
&lt;p&gt;Liquid level switches have a floating element that detects liquid level rise and fall inside a vessel. The floating element density is lighter than the liquid. The floating element connects to the bolted body through a thin rod that triggers the switch depending on the position of the floating element. Level switches can be pneumatic type or electric type. When liquid level reaches setpoint levels, the switch connects/disconnects the electric circuit or allows/cuts off pneumatic supply.&lt;/p&gt;
&lt;p&gt;For oil-flooded screw compressors, these level switch signals are shown in &lt;a class="internal-link" href="#fig-17"&gt;Figure 17&lt;/a&gt;: suction scrubber high level shutdown (LSHH-1000), discharge scrubber low level shutdown (LSLL-3000), and blowcase liquid dump (LS-1010).&lt;/p&gt;
&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-28"&gt;
&lt;div class="col"&gt;&lt;img alt="3-way thermostatic valve installation" src="jupyter_images/screw_level_switch1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 28:&lt;/strong&gt; Murphy LS200 (left, eletric) and LS200NDVOR (right, pneumatic, w/ pressure regulator) liquid level switches. Image adpated from: &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;FW Murphy&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.5.1.-3-Way-pneumatic-type"&gt;7.5.1. 3-Way pneumatic type&lt;a class="anchor-link" href="#7.5.1.-3-Way-pneumatic-type"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Liquid level switches operate on identical principles to 3-way solenoid valves (&lt;a class="internal-link" href="#7.3.-3-Way-solenoid-valve"&gt;Section 7.3&lt;/a&gt;), with one key distinction: instead of receiving electrical signals from a control system, the pneumatic switches are actuated by a floating element that detects liquid levels at a predetermined height. Both devices feature the same three-port configuration (inlet, outlet, vent) and share the same emission issues when vented to atmosphere without a closed capture system and when air compressors are unavailable.&lt;/p&gt;
&lt;p&gt;Pneumatic liquid level switches control the passage of pneumatic supply based on a predefined level setpoint. The setpoint is usually the install height of the switch. They are used for periodic liquid dumping, emergency shutdowns, and alarms. 
&lt;a class="internal-link" href="#slideshow-5"&gt;Slideshow 5&lt;/a&gt; demonstrates the working mechanism of a pneumatic level switch paired with a dump valve for vessel liquid removal.&lt;/p&gt;
&lt;p&gt;This provides a detailed view of the blowcase (V-101), level switch (LS-1010), and dump valve (CV-1011) operations, which were also shown in &lt;a class="internal-link" href="#slideshow-2"&gt;Slideshow 2&lt;/a&gt;. The key difference is that Slideshow 2 splits the pneumatic supply downstream of the level switch into three lines to simultaneously control three valves (CV-1001, CV-1010, and CV-1011), while Slideshow 5 simplifies the demonstration by showing only one pneumatic line for one dump valve.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-29"&gt;Figure 29&lt;/a&gt; illustrates a &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200NDVO&lt;/a&gt; level switch installed on an oil-flooded screw compressor's suction scrubber. The black rectangular component atop the switch is its pneumatic adapter (Dump Valve Operator, DVO), which directs pneumatic flow based on the floating element's position. This installation features an emission-conscious design with tubing routing vent gas to a closed capture system - a newer configuration responding to increasing environmental concerns about pneumatic gas venting. Most field installations lack this vent capture capability.&lt;/p&gt;
&lt;p&gt;In contrast, &lt;a class="internal-link" href="#fig-31"&gt;Figure 31&lt;/a&gt; demonstrates conventional atmospheric venting, evident by the missing third tubing on the pneumatic adapter. However, this particular installation uses compressed air (rather than natural gas) for pneumatic supply, making atmospheric venting environmentally acceptable.&lt;/p&gt;
&lt;div class="ordered-list mt-4"&gt;
&lt;h2&gt;Liquid Level Switch Operation Sequence&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Standby State:&lt;/u&gt; Liquid level is low (switch inactive). Supply [IN] port remains blocked while Vent [EXH] port stays open (disconnected from Supply [IN]).&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Level Rise:&lt;/u&gt; Liquid reaches activation height, triggering the switch.&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Supply Activation:&lt;/u&gt; Switch opens Supply [IN] to Supply [OUT] flow path while closing Vent [EXH].&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Diaphragm Activation:&lt;/u&gt; Pneumatic pressure lifts the dump valve diaphragm.&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Dump Phase:&lt;/u&gt; Valve fully opens, releasing accumulated liquid.&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Level Drop:&lt;/u&gt; Liquid falls below setpoint, triggering switch reset.&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Supply Cutoff:&lt;/u&gt; Switch closes Supply [IN] and reopens Vent [EXH].&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Pressure Venting:&lt;/u&gt; Residual diaphragm pressure exhausts through Vent [EXH].&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Emission Control:&lt;/u&gt; Venting occurs either to atmosphere (&lt;a class="internal-link" href="#fig-31"&gt;Figure 31&lt;/a&gt;) or closed capture system (&lt;a class="internal-link" href="#fig-29"&gt;Figure 29&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;&lt;u&gt;System Reset:&lt;/u&gt; Dump valve fully closes, completing the cycle.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="slideshow-wrapper" id="slideshow-5"&gt;
&lt;div class="linkedin-slideshow"&gt;
&lt;div class="slideshow-band top-band"&gt;
&lt;div class="slideshow-title"&gt;Liquid Level Switch &amp; Dump Valve Working Mechanism&lt;/div&gt;
&lt;div class="fullscreen-toggle"&gt;
&lt;svg class="enter-fullscreen" height="24" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;svg class="exit-fullscreen" height="24" style="display:none;" viewbox="0 0 24 24" width="24"&gt;&lt;path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slides-container"&gt;
&lt;div class="slide active"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow1.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow2.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow3.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow4.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow5.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow6.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow7.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow8.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow9.png"/&gt;&lt;/div&gt;
&lt;div class="slide"&gt;&lt;img class="slide-image" src="jupyter_images/screw_level_switch_slideshow10.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="slideshow-band bottom-band"&gt;
&lt;div class="page-counter"&gt;1/10&lt;/div&gt;
&lt;div class="progress-track"&gt;
&lt;div class="progress-step active"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;div class="progress-step"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="bottom-nav"&gt;
&lt;button class="nav-button bottom-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button bottom-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;button class="nav-button image-prev"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;button class="nav-button image-next"&gt;&lt;svg viewbox="0 0 24 24"&gt;&lt;path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Slideshow 5:&lt;/strong&gt; Demonstrates operation of a liquid level switch with fail-close dump valve. When liquid exceeds the setpoint (determined by switch installation height), the switch activates and permits pneumatic supply (15-30 psig natural gas or air) to flow. This pressure acts on a diaphragm containing a 10-15 psig spring (set below pneumatic supply operating pressure), forcing it upward to open the dump valve. When level drops, the switch deactivates to cut supply pressure while venting residual pressure through the vent port, allowing the spring to return the diaphragm to its fail-safe closed position. Valve diagram adapted from: &lt;a href="https://www.youtube.com/watch?v=yo60YLZIEIs" target="_blank"&gt;Kimary video&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width mt-3" id="fig-29"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_level_switch_suction_scrubber.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 29:&lt;/strong&gt; Pneumatic liquid level switch installation on an oil-flooded screw compressor suction scrubber for liquid dump control. This specific model is a &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200NDVO&lt;/a&gt; pneumatic level switch. The wall-mounted switch (via NPT connection) features a pneumatic adapter that receives mechanical signals from its floating element, functioning as a flow director. This compressor application benefits from easier vent routing to a closed capture system since the entire assembly is self-contained on a compact skid. In contrast, field installations for separator dump valves rarely use closed capture systems due to the greater complexity and difficulty of running vent tubing across larger field installations.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-30"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_level_switch_suction_scrubber2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 30:&lt;/strong&gt; More detailed look at the &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200NDVO&lt;/a&gt; liquid level switch shown in &lt;a class="internal-link" href="#fig-29"&gt;Figure 29&lt;/a&gt;. The black rectangle mounted on top of the silver switch body is the pneumatic adapter. The manufacturer designates this adapter as a "Dump Valve Operator (DVO)." Image adapted from: &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;FW Murphy&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_75 mobile_responsive_plot_full_width" id="fig-31"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_level_switch_suction_scrubber3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 31:&lt;/strong&gt; Field installation of a 2-phase suction scrubber, level switch, and dump valve serving a 3-stage reciprocating compressor. The pneumatic adapter's configuration - missing the third tubing - confirms atmospheric venting of the pneumatic supply for the level switch. This installation utilizes compressed air (rather than natural gas) as the pneumatic medium, making the atmospheric venting environmentally acceptable since only clean air is exhausted. Note that the level switch used in this photo is not Murphy LS200.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.5.2.-Electric-type"&gt;7.5.2. Electric type&lt;a class="anchor-link" href="#7.5.2.-Electric-type"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Electric liquid level switches are much simpler than pneumatic types. When levels rise/fall to a setpoint, the internal electric circuits connect and allow current to flow. When the switch is off, there's constant current supply into the switch, but no flow out due to disconnected circuits. When circuits connect, current flows to a control panel as a signal. Electric switches aren't normally used for dump valves, but mostly for abnormal/safety situation alarms/shutdowns to a control panel, or to activate electric pumps.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-32"&gt;Figure 32&lt;/a&gt; shows &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200&lt;/a&gt; electric level switch, and &lt;a class="internal-link" href="#fig-33"&gt;Figure 33&lt;/a&gt; shows the electric switch installation on discharge scrubber for low lube oil liquid level kill, and on suction scrubber for high knock out liquid level kill.&lt;/p&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-32"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_level_switch_electric2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 32:&lt;/strong&gt; Product illustration of &lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200&lt;/a&gt; electric liquid level switch.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-33"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_level_switch_electric1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 33:&lt;/strong&gt; Shows level switch installations on an oil-flooded screw compressor. Left: Low lube oil level kill switch for discharge scrubber (wiring incomplete, captured during manufacturing). Right: High liquid level kill switch for suction scrubber (wiring complete, connected to PLC via junction box). The vertical positioning difference between switches demonstrates how setpoints are determined by installation height - the high-level switch mounts higher than the low-level switch.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="7.6.-Electric-liquid-pump"&gt;7.6. Electric liquid pump&lt;a class="anchor-link" href="#7.6.-Electric-liquid-pump"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Fully electric compressor models that use an electric pump for suction scrubber liquid dumping (instead of the integrated blowcase system described in &lt;a class="internal-link" href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;Section 6&lt;/a&gt;) utilize two electric liquid level switches for pump control: a middle switch that sends the turn-on signal to the pump when liquid reaches the upper level, and a bottom switch that sends the turn-off signal when liquid falls to the lower level, as shown in &lt;a class="internal-link" href="#fig-34"&gt;Figure 34&lt;/a&gt; where these switches correspond to the middle (pump on) and bottom (pump off) positions.&lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-34"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_electric_pump1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 34:&lt;/strong&gt; Electric liquid pump used in conjunction with suction scrubber's two electric level switches (&lt;a href="https://www.fwmurphy.com/product/ls200-series/" target="_blank"&gt;Murphy LS200&lt;/a&gt;) for pump turn on/off signals.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row justify-content-center mt-4 video" id="video-1"&gt; &lt;!-- Added justify-content-center --&gt;
&lt;div class="col-auto"&gt; &lt;!-- Changed to col-auto --&gt;
&lt;div style="width: 315px; max-width: 100%; margin: 0 auto;"&gt; &lt;!-- Added wrapper div --&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" frameborder="0" height="560" src="https://www.youtube.com/embed/KF2uy5U0Xlo" title="YouTube video player" width="315"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Video 1:&lt;/strong&gt; Simple demonstration of a float switch-activated electric pump. &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.7.-Pressure-safety-valves"&gt;7.7. Pressure safety valves&lt;a class="anchor-link" href="#7.7.-Pressure-safety-valves"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Most compressors use spring-loaded pressure safety valves (PSVs) for overpressure protection. As shown in &lt;a class="internal-link" href="#fig-35"&gt;Figure 35&lt;/a&gt;, these PSVs feature a 90Â° angled body design with an outlet diameter larger than the inlet to prevent flow choking. The setpoint pressure is always determined by the MAWP (Maximum Allowable Working Pressure) of the system's weakest component. For example, in a system where the discharge scrubber and flanges are rated for 500 psig but the &lt;a href="https://www.leroigas.com/en-us/products" target="_blank"&gt;Leroi HG series&lt;/a&gt; compressor has an MAWP of 350 psig, the discharge scrubber PSV would be set at 350 psig to protect the compressor. Following API 520 standards, the PSV begins simmering at the setpoint (350 psig), fully opens at 110% MAWP (385 psig) for normal overpressure scenarios. While 121% MAWP is used for fire case, compressor PSVs aren't sized for fire cases.&lt;/p&gt;
&lt;p&gt;Oil-flooded screw compressors require three separate PSVs (&lt;a class="internal-link" href="#fig-36"&gt;Figure 36&lt;/a&gt;) due to different pressure ratings: one for the discharge scrubber (set at compressor MAWP), one for the suction scrubber, and one for the integrated blowcase which operates at different pressures than the suction scrubber. When activated, PSVs provide rapid, abrupt pressure relief through their 90Â° upward piping - a critical safety feature demonstrated in &lt;a class="internal-link" href="#fig-37"&gt;Figure 37&lt;/a&gt;, where lube oil from a discharge scrubber reservoir was propelled to the ceiling during final quality testing at the manufacturing facility. The 90Â° upward piping prevented potential injury to test loop operators by ensuring the 385 psig (350 psig MAWP + 10% overpressure) discharge was directed vertically rather than horizontally (&lt;a class="internal-link" href="#fig-38"&gt;Figure 38&lt;/a&gt; shows horizontal pressure relief without the 90Â° upward piping). This incident occurred during performance test loop operation when system pressure exceeded the PSV's 110% overpressure setpoint. While the PLC typically initiates shutdown at the 350 psig setpoint pressure, the PSV remains the ultimate safety barrier when other controls fail.&lt;/p&gt;
&lt;p&gt;Unlike field separators that may route relief to closed systems or flares, compressor packages from third-party vendors typically vent directly to atmosphere. This design approach stems from operational flexibility requirements: (1) compressors may be installed either before production begins or added later during field development, and (2) they can be removed from service at any time based on production rates and economic factors. These installation and release cycles make dedicated flare headers for compressor PSVs impractical, necessitating atmospheric venting with the standard 90Â° upward discharge piping for safe operation.&lt;/p&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-35"&gt;
&lt;div class="col"&gt;&lt;img alt="Spring loaded PSV illustration" src="jupyter_images/screw_PSV1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 35:&lt;/strong&gt; Spring-loaded pressure safety valve (PSV) illustration. Blue arrows indicate atmospheric relief piping. The relief side may vent directly to atmosphere or connect to a flare header for combustion.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-36"&gt;
&lt;div class="col"&gt;&lt;img alt="Compressor PSVs illustration" src="jupyter_images/screw_PSV2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 36:&lt;/strong&gt; Three PSVs on an oil-flooded screw compressor for: (1) discharge scrubber, (2) suction scrubber, and (3) integrated blowcase. The blowcase (inside the suction scrubber) operates at different pressures than the suction scrubber, requiring its own PSV. See &lt;a class="internal-link" href="#6.-Pneumatic-liquid-dump-cycle-(blowcase)"&gt;Section 6&lt;/a&gt; for blowcase details.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-37"&gt;
&lt;div class="col"&gt;&lt;img alt="Lube oil stain from PSV activation" src="jupyter_images/screw_PSV3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 37:&lt;/strong&gt; Lube oil stain on the manufacturing facility ceiling caused by discharge scrubber PSV activation during final quality testing. This specific spot inside the building marks the compressor test loop area where units undergo pressurized testing before shipment. During one such test, system pressure exceeded the PSV setpoint of 385 psig, causing the valve to open violently. The sudden release propelled lube oil from the ground-level discharge scrubber reservoir with enough force to reach the ceiling height, leaving this visible stain as evidence of the pressure magnitude.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-38"&gt;
&lt;div class="col"&gt;&lt;img alt="PSV activation demonstration" src="jupyter_images/screw_PSV4.gif"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 38:&lt;/strong&gt; PSV activation demonstration showing sudden pressure burst. Atmospheric vent PSVs require upward 90Â° piping to direct bursts safely away from personnel. GIF adapted from: &lt;a href="https://www.youtube.com/shorts/KF2uy5U0Xlo" target="_blank"&gt;Youtube Shorts&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.8.-Transmitters"&gt;7.8. Transmitters&lt;a class="anchor-link" href="#7.8.-Transmitters"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Pressure transmitters install on suction gas lines (tank top, tank manifold, inlet piping manifold, or suction scrubber outlet), between compressor discharge and discharge scrubber inlet, and on lube oil injection lines. Temperature transmitters with thermowells install on compressor gas discharge, compressor lube oil discharge, post-cooler lube oil, post-cooler gas line, and for gas engine models, engine oil and coolant lines.&lt;/p&gt;
&lt;p&gt;Electrical wiring connects these transmitters to the PLC. The transmitters send signals that the PLC uses to execute shutdowns, trigger alarms, adjust driver RPM, and transmit operational data to servers.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-39"&gt;
&lt;div class="col"&gt;&lt;img alt="PSV activation demonstration" src="jupyter_images/screw_transmitter.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 39:&lt;/strong&gt; Pressure indicating transmitters on a gas-engine oil-flooded screw compressor package. Additional pressure and temperature transmitters (not shown) provide PLC operational control. The silver needle valves feature a dual-handle design: the lower (front) handle for pressure isolation while the upper (rear) handle for pressure vent after isolation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="7.9.-Suction-control-valve"&gt;7.9. Suction control valve&lt;a class="anchor-link" href="#7.9.-Suction-control-valve"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A suction control valve (SCV) is a type of a pressure-reducing regulator that maintains outlet pressure at a target setpoint. It is not part of a compressor skid package, but installed outside a skid on the inlet piping into a suction scrubber. It serves two critical purposes: (1) ensuring pressure stays below setpoint to prevent compressor horsepower overload, and (2) maintaining pressure sufficiently close to setpoint to preserve desired flowrate capacity. As shown in &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; of &lt;a class="internal-link" href="#key4"&gt;Section 1.4&lt;/a&gt;, increasing suction pressure boosts flowrate capacity but also increases horsepower demand. The SCV must carefully balance these competing factors - excessive pressure risks high-HP shutdowns, while insufficient pressure reduces capacity and may force gas flaring to relieve excess gas.&lt;/p&gt;
&lt;p&gt;The SCV maintains pressure through purely mechanical operation of its pressure pilot system (best explained in &lt;a class="internal-link" href="#video-2"&gt;Video 2&lt;/a&gt; by Kimray, highly recommend you to watch it). The process works as follows: (1) Process pressure acts on the pilot diaphragm through the sensing line, (2) Diaphragm movement physically adjusts a supply gas throttling stem, and (3) This stem modulation controls air flow to the main valve actuator, positioning the valve plug. When the sensing line pressure rises above setpoint, the pilot diaphragm moves to cutoff supply gas, closing the control valve. When pressure drops below setpoint, the diaphragm opens to allow supply gas passthrough, opening the control valve. This mechanical balance continues until stable pressure is achieved. &lt;a class="internal-link" href="#fig-40"&gt;Figure 40&lt;/a&gt; shows this system maintaining 30 psig suction pressure on a compressor processing 50 psig heater treater gas, preventing overload shutdowns during pressure surges.&lt;/p&gt;
&lt;p&gt;Note that SCVs are not installed on tank (below 1 psig) or VRT (1-5 psig) vapor recovery applications because these vessels will never generate sufficient suction pressure to trigger high-HP compressor shutdowns. For separator and heater treater applications, SCVs (costing &lt;span&gt;$&lt;/span&gt;1,500-&lt;span&gt;$&lt;/span&gt;2,500 per valve package) are only installed when pressure swings could substantially affect compressor operation. They are mandatory for wellhead-proximate applications like casing or primary separator drawdown applications, where 200-300% pressure fluctuations frequently occur. Downstream vessels with stable operation may not require SCVs depending on their pressure characteristics.&lt;/p&gt;
&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;Suction Control Valve 4 Major Components&lt;/span&gt;
&lt;/div&gt;
&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Sensing Line:&lt;/strong&gt; Monitors process pressure (typically from inlet manifold or suction scrubber) and provides pressure feedback to the pilot.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Supply Line:&lt;/strong&gt; Delivers pneumatic supply (10-45 psig instrument gas/air) to actuate the control valve diaphragm.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Pressure Pilot:&lt;/strong&gt; Processes sensing line feedback to allow/cutoff supply pressure to the diaphragm, featuring a vent port that can be a source of emissions.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Control Valve:&lt;/strong&gt; Main gas flow path regulated by diaphragm position from pilot signals.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Optional accessories may include drip pots, filters, or regulators depending on application requirements.&lt;/p&gt;
&lt;hr class="black-hr"/&gt;
&lt;div class="row justify-content-center mt-4" id="video-2"&gt;
&lt;div class="col-12"&gt;
&lt;div class="embed-responsive embed-responsive-16by9"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" class="embed-responsive-item" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/yo60YLZIEIs?si=0kBmVs9B4Xf6XYiP" title="YouTube video player"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Video 2:&lt;/strong&gt; Illustration of a suction control valve, which is a type of a fail-close pressure-reducing regulator, by Kimray.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-40"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_scv_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 40:&lt;/strong&gt; Fail-close SCV installation on oil-flooded screw compressor for heated separator vapor recovery (30 psig setpoint). The spring-adjustable pilot maintains suction scrubber pressure, preventing high HP shutdown maintaining enough pressure to ensure desired flow capacity.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-41"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_scv_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 41:&lt;/strong&gt; P&amp;ID of a fail-close SCV installation shown in &lt;a class="internal-link" href="#fig-40"&gt;Figure 40&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-42"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_scv_3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 42:&lt;/strong&gt; More detailed illustration of a fail-close SCV installation shown in &lt;a class="internal-link" href="#fig-40"&gt;Figure 40&lt;/a&gt;. Image adapted from: Kimray&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="8.-Pressure-control"&gt;8. Pressure control&lt;a class="anchor-link" href="#8.-Pressure-control"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;A programmable logic controller (PLC) on a compressor package controls pressure of the source vessel (tank, heater, separator, wellhead, etc). Different applications need different operating pressures - for example, a Vapor Recovery Tower (VRT) requires 2-4 psig. The PLC sends signals to either a variable frequency drive (VFD) to speed up/down or to a recycle valve to open/close, maintaining source vessel pressure within the target range. These settings are configured at the skid-mounted control panel.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="8.1.-VFD-and-PID-Loop"&gt;8.1. VFD and PID Loop&lt;a class="anchor-link" href="#8.1.-VFD-and-PID-Loop"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A variable frequency drive (VFD) controls rotational speed for either electric motor or gas engine drivers (&lt;a class="internal-link" href="#3.-Choice-of-a-Driver:-Electric-Motor-or-Gas-Engine"&gt;Section 3&lt;/a&gt;), adjusting RPM based on electrical signals from the PLC. Pressure transmitters (&lt;a class="internal-link" href="#7.8.-Transmitters"&gt;Section 7.8&lt;/a&gt;) on the source vessel or suction line continuously transmit data to the PLC. For VRT applications maintaining 2-4 psig with 3 psig target, if pressure reaches 4 psig (indicating built up gas volumes), the PLC commands higher RPM (e.g., 2000 RPM to 2500 RPM) to draw more gas volumes and reduce pressure. Conversely at 2 psig, it reduces RPM (e.g., to 1200 RPM) or activate recycle mode (&lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;) to allow pressure buildup to 3 psig.&lt;/p&gt;
&lt;p&gt;The control panel runs a PID (Proportional-Integral-Derivative) loop algorithm that dynamically calculates RPM adjustments. This three-component system: (1) &lt;strong&gt;Proportional&lt;/strong&gt; responds to current pressure deviation (instant RPM change), (2) &lt;strong&gt;Integral&lt;/strong&gt; addresses persistent offsets (gradual correction), and (3) &lt;strong&gt;Derivative&lt;/strong&gt; anticipates trends (prevents overshoot). For a 2-4 psig target at 3.5 psig/1600 RPM, the PID might initially command 2000 RPM to pull down to 3 psig. If this overshoots to 2 psig, the algorithm automatically reduces the next RPM increment and incorporates the error to calculate a more precise adjustment, reaching stable operation within a few correction cycles.&lt;/p&gt;
&lt;p&gt;However, VFDs with PID control cannot always maintain source pressure within target range, particularly in upstream production applications where wellhead pressures fluctuate significantly. Sudden slug flows can overflood vessels with high instantaneous rates, causing pressure to exceed both target (2-4 psig) and maximum (5 psig) ranges even at maximum compressor RPM. In these cases, excess pressure diverts to flare headers - an environmentally undesirable outcome. Frequent flare activation indicates undersized compressor capacity, necessitating larger unit installation. Conversely, if pressure drops below target range, the PLC activates recycle mode to prevent vessel overdrawing.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;The PID tuning must be done by a mechanic experienced specifically with oil-flooded screw compressors&lt;/u&gt;&lt;/strong&gt;, including detailed knowledge of the particular model's design characteristics. This specialized tuning typically requires hours to a full day depending on application. The need for model-specific expertise makes rental units more practical than purchases, as most customer operators lack mechanics trained on both: (1) oil-flooded screw compressor technology in general, and (2) the packager's specific model implementation. Many purchased units underperform or experience frequent shutdowns when maintained by personnel unfamiliar with these model-specific knowledge.&lt;/p&gt;
&lt;div class="row" id="fig-43"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PID_loop.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 43:&lt;/strong&gt; PID loop control system for pressure regulation. The algorithm continuously adjusts driver RPM based on pressure transmitter feedback, using proportional, integral, and derivative calculations to minimize deviation from the target pressure setpoint.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-44"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_PID_loop2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 44:&lt;/strong&gt; Temperature control PID loop with 40Â°C setpoint (red line), shown for illustrative purposes (not a compressor application). The x-axis shows time progression as the algorithm dynamically adjusts control parameters to minimize deviation from the target temperature, demonstrating characteristic convergence behavior through proportional, integral, and derivative actions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="8.2.-Recycle-mode"&gt;8.2. Recycle mode&lt;a class="anchor-link" href="#8.2.-Recycle-mode"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In VRT applications maintaining 2-4 psig, recycle mode maybe set to activate when pressure falls below 2 psig - a critical threshold since VRTs require minimum 1 psig to prevent liquid overflow into gas lines. The system activates recycle mode before shutdownâ€”shutdown is a last resortâ€”to maintain continous opereation&lt;/p&gt;
&lt;p&gt;During recycle mode, two primary actions occur. First, the driver RPM reduces to minimum sustainable levels. Second, the recycle valve opens (either electric type as shown in &lt;a class="internal-link" href="#fig-19"&gt;Figure 19&lt;/a&gt; or pneumatic type in &lt;a class="internal-link" href="#fig-21"&gt;Figure 21&lt;/a&gt;), redirecting discharge gas back to suction. Before reaching suction, the recycle gas passes through a pressure reducing regulator (PR-1000, shown in &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;) to prevent high-HP shutdown. See &lt;a class="internal-link" href="#fig-45"&gt;Figure 45&lt;/a&gt; for example telemetry data showing driver RPM change with recycle mode activation.&lt;/p&gt;
&lt;p&gt;Oil-flooded screw compressors achieve 100% turndown capability through recycle valve operation. Turndown refers to the percentage reduction possible below a compressor's maximum design flowrate without triggering shutdown. The recycle system enables complete (100%) redirection of discharge gas back to suction.&lt;/p&gt;
&lt;p&gt;While recycle mode maintains continuous operation, it carries an energy penalty - the compressor repeatedly recompresses and depressurizes the same gas volume by consuming energy (electricity/fuel gas). This trade-off preserves two critical operational benefits over complete shutdowns:&lt;/p&gt;
&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li class="mb-2"&gt;&lt;p&gt;&lt;strong&gt;Preseving Heat:&lt;/strong&gt; Compression generates heat that help maintain unit temperature, preventing potential gas condensation into liquid and lube oil contamination. A complete shutdown typically takes 0.5-3 hours (load-dependent) to regain sufficient operating temperature after restart, during which condensed gas may compromise lube oil quality. &lt;a class="internal-link" href="#fig-57"&gt;Figure 57&lt;/a&gt; shows temperature telemetry data in which a unit took 35 minutes to regain temperature from 65Â°F to 182Â°F upon restart after a 12-hr shutdown.&lt;/p&gt;&lt;/li&gt;
&lt;li class="mb-2"&gt;&lt;p&gt;&lt;strong&gt;Response Readiness:&lt;/strong&gt; Drivers cannot instantly accelerate from 0 RPM to operational speeds (1200-2000 RPM). While electric models achieve faster ramp-up than gas engines, maintaining minimum rotation ensures immediate response to process demands.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;However, prolonged recycle is not desirable for two reasons:&lt;/p&gt;
&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li class="mb-2"&gt;&lt;p&gt;&lt;strong&gt;Decreased Economic Efficiency:&lt;/strong&gt; Recycle mode triggers when there is not enough volume to pull from a source vessel. When the driver "ramp-up" setpoint pressure is reached, the rotors will spin at maximum RPM until the pressure drops to the "slow-down" setpoint. If the unit is oversized, it may run at full RPM for, say, 2 minutes, then spend 8 minutes idling in recycle mode. During this 8-minute span, energy is wasted (electricity/fuel gas) to keep the unit operating without discharging any gas. This leads to unnecessary resource consumption, both in energy and compressor rental costs. Downsizing to a smaller unit can solve this problem. Unfortunately, VRU's are low priority for most operators, and downsizing is almost never done in a timely manner (I wrote an article on this topic: &lt;a href="https://aegis4048.github.io/predicting_vru_economics_downsizing_timing_for_declining_wells" target="_blank"&gt;Predicting VRU Economics/Downsizing Timing For Declining Wells&lt;/a&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;li class="mb-2"&gt;&lt;p&gt;&lt;strong&gt;Temperature Control Challenges:&lt;/strong&gt;  Electric models face low temperature risks that can lead to lube oil contamination due to insufficient heat generation during recycle mode. Recycle is triggered when the PLC detects low pressure, usually measured at the top of a vessel or on the suction line, indicating low available gas volume. With low volume, there is limited compression occurring, and thus not enough heat is produced to keep the unit hot. In contrast, gas engine models are prone to high temperature shutdowns during recycle. Since the gas engine uses a single driver (engine crankshaft) to power both the rotors and the fan, a reduction in rotor RPM also lowers fan RPM. Although compression heat drops during recycle, the heat from fuel gas combustion remains significant, which can cause temperatures to rise above the cooler's reduced capacity at the redeuced RPM, and trigger a high temperature shutdown. These issues are discussed in greater detail in &lt;a class="internal-link" href="#9.-Temperature-control"&gt;Section 9&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;div class="row" id="fig-45"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle_5.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 45:&lt;/strong&gt; Telemetry data showing rotor driver RPM change with recycle valve status. 1 means recycle valve open, 0 means closed. The driver goes full max 1800 RPM when the "ramp-up" setpoint pressure is reached. When the PLC sends a recycle mode signal, it slows down to the minimum sustainable RPM before shutdown, 900 RPM. The RPM becomes 0 when the unit shuts down. This specific data shows that recycle mode was active for 60% of the 3 hr 45 min time span between 12:40 AM and 4:25 AM, indicating a potential opportunity to downsize the unit.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="8.3.-Pressure-setpoint-scenarios"&gt;8.3. Pressure setpoint scenarios&lt;a class="anchor-link" href="#8.3.-Pressure-setpoint-scenarios"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;This section shows example source vessel pressure target and recycle setpoint scenarios. The target pressure is the desired pressure a compressor maintains by adjusting driver RPM, controlled by a panel receiving feedback from a pressure transmitter (PT). Location of PT installation depends on application:&lt;/p&gt;
&lt;p&gt;&lt;u&gt;PT on source vessel required for:&lt;/u&gt;&lt;br/&gt;&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;Low-pressure applications (tank vapor recovery, VRT vapor recovery) where pipeline friction losses would distort readings&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;ESP casing drawdown (requires 70-90 psig casing pressure, above compressor's 50 psig suction limit)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;u&gt;PT on compressor suction scrubber sufficient for:&lt;/u&gt;&lt;br/&gt;&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;Applications within 50 psig suction limit where friction losses are negligible (heater treater vapor recovery, separator drawdown, SRP casing drawdown)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Note that the setpoints presented in this section are examples - actual values may vary based on operational needs, but all shown scenarios are plausible:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#8.3.1.-VRT-vapor-recovery"&gt;8.3.1. VRT vapor recovery&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#8.3.2.-Tank-vapor-recovery"&gt;8.3.2. Tank vapor recovery&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#8.3.3.-Heater-vapor-recovery"&gt;8.3.3. Heater vapor recovery&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#8.3.4.-Separator-drawdown"&gt;8.3.4. Separator drawdown&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#8.3.5.-Casing-drawdown"&gt;8.3.5. Casing drawdown&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="8.3.1.-VRT-vapor-recovery"&gt;8.3.1. VRT vapor recovery&lt;a class="anchor-link" href="#8.3.1.-VRT-vapor-recovery"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The above discussions on VFD/PID loop (&lt;a class="internal-link" href="#8.1.-VFD-and-PID-Loop"&gt;Section 8.1&lt;/a&gt;) and recycle mode (&lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;) used VRT vapor recovery scenario as an example. VRTs typically require 2-4 psig operating range. Above 4 psig risks a chance of gas blowby to tanks and trigger venting/flaring, while below 2 psig risks a chance of liquid overflow to gas line, and into a VRU suction scrubber, potentailly triggering high liquid level shutdown on a VRU. This is due to the unique design of a VRT, which I do not cover in detail here.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-46"&gt;Figure 46&lt;/a&gt; and &lt;a class="internal-link" href="#fig-47"&gt;47&lt;/a&gt; below shows a simplified P&amp;ID and layout diagram of a VRT vapor recovery system. Assuming 5 psig is the maximum pressure you want on a VRT (5 psig is for liquid level control, VRTs typically have 75-150 psig MAWP rating), there will be a BPV set at 5 psig for overpressure relief to combustor during compressor shutdown or volume surge. The VRU targets to maintain the VRT pressure between 2-4 psig by ramping up/down a VFD. Gas flows preferentially to the VRU side due to its lower suction pressure (2-4 psig) compared to the flare side BPV's 5 psig resistance, making the VRU the path of least resistance. Refer to &lt;a class="internal-link" href="#note_2"&gt;Note 2&lt;/a&gt; for working principles of flare/combustor relief.&lt;/p&gt;
&lt;div class="row" id="fig-46"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_VRT_vapor_recovery.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 46:&lt;/strong&gt; Simplified P&amp;ID of a VRT vapor recovery system showing pressure control architecture. The vapor recovery unit (VRU) has a PLC that monitors VRT pressure via transmitter (PT) and adjusts VFD speed to maintain 2-4 psig target operating range. The system has a back pressure valve (BPV) that opens at 5 psig to prevent VRT overpressurization by relieving excess gas to flare. The tank has a thief hatch set at tank MAWP for atmospheric vent and a secondary PVRV set slightly below hatch rating for flare relief. The atmospheric tank receives only minimal flash gas volumes because the VRT already processed most flash gas volumes. The small remaining volumes (resulting from 2-4 psig system pressure drop) are routed to low pressure combustor.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-47"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_VRT_vent_header.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 47:&lt;/strong&gt; Example layout of an upstream production facility VRT vapor recovery system. The 2" VRT gas line flows to the VRU during normal operation, switching to the combustor when the VRU is down. The BPV opens during pressure upset or VRU shutdown. A sensing line from the VRT top connects to a pressure transmitter (PT) wired to the compressor PLC. The VRT captures most flash volume, while residual tank gas flows to the combustor via the 4" tank vent header. The weighted Enardo PRV on the vent header provides atmospheric venting during pressure surges before thief hatch activation.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;VRTs usually have a sensing line that comes from the top of VRT and down to the ground level. A PT can be either installed on this sensing line and wired to a compressor PLC, or just use the internal PT on the compressor suction scrubber. Either is fine for VRT applications.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt; for working principles) is not needed as VRT pressure will never exceed 50 psig (compressor max suction pressure). In fact, pressure drop from passing through the SCV decreases flowrate capacity due to reduced pressure (see &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;). VRT's only have 2-4 psig pressure available, 0.5-1 psig pressure drop from SCV can be detrimental to flowrate capacity.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;VRT Vapor Recovery Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 5 psig:&lt;/u&gt; High suction pressure alarm, potential flaring&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 2-5 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;3 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;2 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 1-2 psig:&lt;/u&gt; Recycle operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 1 psig:&lt;/u&gt; Low suction pressure shutdown, system check and waiting to autostart&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="8.3.2.-Tank-vapor-recovery"&gt;8.3.2. Tank vapor recovery&lt;a class="anchor-link" href="#8.3.2.-Tank-vapor-recovery"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Different pressure control applications (tanks, heaters, separators, wellheads) require different operating pressures. The most challenging is vapor recovery from atmospheric storage tanks due to their extremely low operating range (measured in ounces).&lt;/p&gt;
&lt;p&gt;These tanks (usually 8-16 oz MAWP, API 12F design) have oversized vent headers (4"-6") to minimize friction loss. Preserving their minimal pressure is critical to avoid flaring and thief hatch openings.&lt;/p&gt;
&lt;p&gt;Assume a 16 oz MAWP tank vapor recovery system shown in &lt;a class="internal-link" href="#fig-48"&gt;Figure 48&lt;/a&gt; and &lt;a class="internal-link" href="#fig-49"&gt;49&lt;/a&gt;. Each tank will have a thief hatch with 16 oz setpoint, and an 14 oz Enardo valve (essentially functions like a back pressure valve) that dumps to flare during process upsets (see to &lt;a class="internal-link" href="#note_2"&gt;Note 2&lt;/a&gt; for working principles of flare/combustor relief). The Enardo setpoint is intentionally set lower than thief hatch setpoint, because these hatches do not automatically close once they are set off (thief hatch emissions are the biggest emission source in the oil and gas industry). A proper tank design should aim to never set off a thief hatch. A VRU can target 5 oz pressure on the tank. When pressure rises above 5 oz, compressor driver will speed up to pull gas and decrease pressure from the tank. A recycle mode can be set at 4 oz to prevent overdrawing the tank and introduce oxygen ingress.&lt;/p&gt;
&lt;div class="row" id="fig-48"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_tank_vapor_recovery.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 48:&lt;/strong&gt; Simplified P&amp;ID of atmospheric tanks vapor recovery system showing pressure control architecture. The VRU PLC targets maintaining 8-12 oz tank pressure. The PT installs directly on the tank top and wires to the PLC to avoid false readings from friction loss. The key difference from the VRT P&amp;ID in &lt;a class="internal-link" href="#fig-46"&gt;Figure 46&lt;/a&gt; is that the PRV here acts as a back pressure valve set at 14 oz, compared to 5 psig BPV in the VRT example. These are usually weighted Enardo PRVs that maintain small back pressure until reaching their set point. Gas flows to the compressor side due to its lower resistance compared to the PRV side.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-49"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_tank_vent_header.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 49:&lt;/strong&gt; Example layout of an upstream production facility tank vapor recovery system. The red line is the 4" tank vent header that can either go to VRU during normal operation, or to flare through the Enardo valve during pressure upsets. Note that the pressure transmitter (PT) is installed directly on top of a tank, and wired to a compressor PLC to avoid false pressure readings due to friction loss.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;PT must be installed on tank roof or vent headers (not ground level) and wired to compressor PLC. Even 1-2 oz friction loss in piping can cause false low readings, triggering unnecessary flaring (e.g., compressor reads 6 oz when tank is at 7 oz, activating 7 oz Enardo). &lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt; for working principles) should not be installed - tank systems cannot tolerate any friction losses.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;p&gt;Tank vapor recovery setpoints for compressor targets, Enardo PRVs, and thief hatches are determined by the tank's MAWP. Below are typical vapor recovery setpoint scenarios for 8 oz vs. 16 oz MAWP tank ratings:&lt;/p&gt;
&lt;p&gt;&lt;u&gt;8 oz MAWP tanks:&lt;/u&gt; Provide minimal control margin. When targeting 3 oz, the compressor PID loop must maintain tight pressure control between 2-5 oz to prevent flaring, leaving only 3 oz of operating margin. While compressors handle most emissions, some gas volumes may still be intermittently flared or vented during flow or operational upsets.&lt;/p&gt;
&lt;p&gt;&lt;u&gt;16 oz MAWP tanks:&lt;/u&gt; Offer significantly more control room, allowing for more stable pressure management and reduced venting events compared to 8 oz tanks. When targeting 5 oz, operating range can be between 4-13. This is much bigger margin than 8 oz tank.&lt;/p&gt;
&lt;div class="ordered-list" id="8oz_tank"&gt;
&lt;h2&gt;8 oz Tank Vapor Recovery Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 8 oz:&lt;/u&gt; Thief hatch opens, vent to atmosphere&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 6-8 oz&lt;/u&gt;: Thief hatch simmering&lt;/li&gt;
&lt;li&gt;&lt;u&gt;6 oz:&lt;/u&gt; PRV fully open to combustor&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 5-6 oz:&lt;/u&gt; PRV simmering&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 2-5 oz:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;3 oz:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;2 oz:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 1-2 oz:&lt;/u&gt; Recycle operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 1 oz:&lt;/u&gt; Vacuum safety triggers, potential oxygen ingress problems&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="ordered-list" id="16oz_tank"&gt;
&lt;h2&gt;16 oz Tank Vapor Recovery Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 16 oz:&lt;/u&gt; Thief hatch opens, vent to atmosphere&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 14-16 oz&lt;/u&gt;: Thief hatch simmering&lt;/li&gt;
&lt;li&gt;&lt;u&gt;14 oz:&lt;/u&gt; PRV fully open to combustor&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 13-14 oz:&lt;/u&gt; PRV simmering&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 4-13 oz:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;5 oz:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;4 oz:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 1-4 oz:&lt;/u&gt; Recycle operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 1 oz:&lt;/u&gt; Vacuum safety triggers, potential oxygen ingress problems&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="8.3.3.-Heater-vapor-recovery"&gt;8.3.3. Heater vapor recovery&lt;a class="anchor-link" href="#8.3.3.-Heater-vapor-recovery"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; This section assumes: (1) a compressor maximum suction of 50 psig (mechanical limit of &lt;a href="https://www.leroigas.com/en-us/products" target="_blank"&gt;Leroi HG series&lt;/a&gt; compressors), and (2) reader familiarity with suction control valve operation (&lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Heater treaters operate at much higher pressures (30-70 psig) compared to VRT systems (1-5 psig) or atmospheric tanks (1-16 oz), giving much bigger operating margins for operation setpoints.&lt;/p&gt;
&lt;p&gt;Similar to VRT and tank applications, the gas line splits into two paths: 1) to VRU suction (main path), and 2) to flare with a back pressure valve (BPV) set higher than the target suction pressure. This pressure differential ensures vapors flow to the VRU during normal operation (path of least resistance), while automatically diverting to flare for pressure relief during VRU shutdowns or process upsets. See &lt;a class="internal-link" href="#fig-C"&gt;Figure C&lt;/a&gt; below for an example telemetry data showing pressure relief to flare during VRU shutdown. See &lt;a class="internal-link" href="#fig-50"&gt;Figure 50&lt;/a&gt;, &lt;a class="internal-link" href="#fig-51"&gt;51&lt;/a&gt;, and &lt;a class="internal-link" href="#fig-52"&gt;52&lt;/a&gt; for example P&amp;IDs for BPV (BPV-6001) installations on flare side.&lt;/p&gt;
&lt;p&gt;Heater vapor recovery differs from VRT/tank applications in &lt;strong&gt;&lt;u&gt;potentially requiring a suction control valve (SCV)&lt;/u&gt;&lt;/strong&gt; (see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt; for SCV working principles). Given heaters typically operate at 20-70 psig and compressors have 50 psig suction limits:&lt;/p&gt;
&lt;div class="ordered-list ordered-list-note ordered-list-nested"&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Above 50 psig:&lt;/strong&gt; SCV mandatory to reduce pressure below compressor suction limit&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;40-50 psig:&lt;/strong&gt; SCV "highly recommended" due to inevitable occasional pressure swings&lt;/li&gt;
&lt;li class="bottom-border"&gt;&lt;strong&gt;20-40 psig:&lt;/strong&gt; SCV optional but recommended for upstream applications where:&lt;/li&gt;
&lt;div class="nested-li-wrapper ml-40"&gt;
&lt;li&gt;Separators upstream of a heater may not fully absorb flow variations (typical 2x-6x normal swings)&lt;/li&gt;
&lt;li&gt;Compressor response may lag behind sudden gas surges&lt;/li&gt;
&lt;li&gt;Historic data shows severe pressure fluctuations&lt;/li&gt;
&lt;/div&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;p&gt;While compressors can adjust RPM to maintain target pressure, sudden surges often exceed this capacity. Operators should review heater telemetry history - if uncertain, the &lt;span&gt;$&lt;/span&gt;1,500-&lt;span&gt;$&lt;/span&gt;2,500 SCV installation cost is typically justified versus frequent shutdown risks. Retrofit remains an option if initial SCV-less operation proves problematic.&lt;/p&gt;&lt;p&gt;SCV installation also helps maintain VRU operation even during flare activation. When flare engages (indicating system pressure exceeded BPV setpoint), the SCV prevents compressor shutdown by isolating suction pressure from system (heater vessel + heater gas line piping) pressure. &lt;a class="internal-link" href="#fig-50"&gt;Figure 50&lt;/a&gt; shows a heater treater system without SCV (25 psig target, 110 psig BPV) where flow surges may cause complete VRU shutdown - system pressure, including the compressor suction pipe, equalizes up to BPV setpoint, triggering high HP/suction pressure shutdowns and 100% flare diversion. 

&lt;p&gt;&lt;a class="internal-link" href="#fig-51"&gt;Figure 51&lt;/a&gt; demonstrates the SCV-equipped system where the valve physically isolates compressor suction pressure from upstream system pressure. During surges, the SCV maintains suction pressure at â‰¤25 psig (regardless of heater/BPV side pressure) by throttling flow, while allowing only excess volume beyond compressor capacity to reach the 110 psig BPV setpoint and divert to flare. This enables continuous VRU operation handling most surge volume (e.g., 70%), with only the remainder (e.g., 30%) flaring - a critical improvement over the non-SCV configuration's complete shutdown.&lt;/p&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-52"&gt;Figure 52&lt;/a&gt; demonstrates a specialized configuration where operators maintain heater pressure at 70 psig (above the compressor's 50 psig suction limit) using two pressure controls: (1) a 70 psig BPV on the suction line, and (2) an SCV set below the limit (e.g., 25 psig). While uncommon, this setup serves specific cases where high heater pressure must be preserved alongside VRU operation, creating three distinct pressure zones: heater vessel itself (70 psig), SCV-regulated compressor suction (25 psig), and flare protection (110 psig).&lt;/p&gt;&lt;div class="row" id="fig-50"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_heater_vapor_recovery1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 50:&lt;/strong&gt; Simplified P&amp;ID of heater treater vapor recovery system showing pressure control architecture. A pressure transmitter (PT) is installed on the suction scrubber line on a compressor skid, and wired to the PLC. The PLC aims to maintain 25 psig pressure on the suction line. The flare line has a BPV set at 110 psig (below the 125 psig heater MAWP) to divert gas to flare during compressor shutdown or volume surges. This system doesn't have SCV, and are vulnerable to high HP/suction pressure shutdown during process upsets. When shutdown is triggered, 100% volume is diverted to flare.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-51"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_heater_vapor_recovery2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 51:&lt;/strong&gt; This SCV-equipped version of the system in &lt;a class="internal-link" href="#fig-50"&gt;Figure 50&lt;/a&gt; prevents compressor shutdowns during sudden flowrate/pressure surges by maintaining suction pressure â‰¤25 psig. When surges exceed compressor capacity, the SCV throttles to protect the VRU while diverting only excess volume to flare through the 110 psig BPV.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-52"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_heater_vapor_recovery3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 52:&lt;/strong&gt;  Similar setup as &lt;a class="internal-link" href="#fig-51"&gt;Figure 51&lt;/a&gt;, with the presence of an additional BPV set at 70 psig on the compressor line, in case an operator wants to keep heater pressure above compressor max suction of 50 psig. The pressure of the heater until the SCV inlet will normally operate at 70 psig, while downstream of the SCV will be kept at 25 psig to prevent high suction pressure shutdown.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Compresssor-skid-contained PT on a suction scrubber is good enough. Friction loss is negligible compared to the operating pressure of the heaters. Targeting a pressure on suction scrubber will essentially target heater pressure as well.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt; for working principles) may or maynot be needed. Review historic pressure data to make a judgement call.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;div class="ordered-list" id="16oz_tank"&gt;
&lt;h2&gt;30# Heater Treater Vapor Recovery Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 50 psig:&lt;/u&gt; Compressor high suction pressure shutdown&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 32-50 psig&lt;/u&gt;: Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 28-32 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;30 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;28 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 20-28 psig:&lt;/u&gt; Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 20 psig:&lt;/u&gt; Low pressure shutdown (flexible as long as above 20 psig)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="8.3.4.-Separator-drawdown"&gt;8.3.4. Separator drawdown&lt;a class="anchor-link" href="#8.3.4.-Separator-drawdown"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Separator drawdown artificially lowers salesline backpressure on the wellhead by installing a compressor on a gas outlet line of a primary separator. A primary separator between the wellhead and salesline performs bulk gas/liquid separation. The separator experiences salesline backpressure (e.g., 150 psig), which propagates to the wellhead, wellbore, and reservoir, reducing flow rates as backpressure increases.&lt;/p&gt;
&lt;p&gt;Installing a compressor directly downstream of a compressor isolates the wellhead from 150 psig salesline pressure. Instead, the wellhead sees reduced 0-50 psig compressor suction pressure. The compressor boosts pressure to meet salesline requirements while creating significant wellhead drawdown, resulting in production uplift.&lt;/p&gt;
&lt;p&gt;This technology can be used on: 1) naturally flowing wells, 2) liquid-loaded wells, 3) plunger-lift wells and 4) wells lacking pipeline infrastructure for buyback gas or facing expensive buyback sources (each of these topics deserve more in-depth discussion, but it's not the focus of this article)&lt;/p&gt;
&lt;p&gt;Unlike the &lt;a class="internal-link" href="#8.3.1.-VRT-vapor-recovery"&gt;VRT&lt;/a&gt;, &lt;a class="internal-link" href="#8.3.2.-Tank-vapor-recovery"&gt;Tank&lt;/a&gt;, and &lt;a class="internal-link" href="#8.3.3.-Heater-vapor-recovery"&gt;Heater&lt;/a&gt; vapor recovery applications shown above that has a BPV set to dump to flare, separator gas bypasses the compressor during shutdowns/upsets, flowing directly to salesline.&lt;/p&gt;
&lt;p&gt;Take &lt;a class="internal-link" href="#fig-53"&gt;Figure 53&lt;/a&gt; as an example. During normal operation, all separator gas flows to the compressor suction side (path of the lowest resistance) and the wellhead sees minimal back pressure. During compressor shutdown or volume surge, check valve CHK-6000 essentially functions as a BPV that relieves excess pressure to salesline. The check valve won't open until the separator pressure reaches 150 psig. Compressor shutdown or process upsets make separator pressure to build upto the salesline pressure, exerting high backpressure on the wellhead and negatively affecting hydrocarbon production.&lt;/p&gt;
&lt;div class="row" id="fig-53"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_drawdown_sep.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 53:&lt;/strong&gt; Simplified P&amp;ID showing primary separator drawdown system. The 150 psig salesline pressure creates backpressure that propagates through the separator and wellhead (WH not shown) to the reservoir, reducing production flowrates. The separator gas line splits into two paths: (1) compressor suction during normal operation (when sized for full capacity), and (2) salesline relief during compressor shutdown or surges. Check valve CHK-6000 serves as a backpressure valve, remaining closed until separator pressure reaches salesline pressure. During compressor shutdown, wellhead pressure builds up from normal 30 psig suction to full 150 psig salesline pressure. The system has secondary relief to flare through BPV-7001 set at lower pressure (240 psig) than the primary separator MAWP (250 psig) during potential salesline process upset events. The SCV on the suction line protects the compressor from potential high HP/suction pressure shutdown due to wellhead pressure/flowrate swings.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Compresssor-skid-contained PT on a suction scrubber is good enough. Friction loss is negligible compared to the operating pressure of the separators. Targeting a pressure on suction scrubber will essentially target heater pressure as well.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt; for working principles) is "very highly recommended" as separators separators experience constant 2x-6x pressure/flowrate swings directly from wellheads. Without SCV protection, compressors suffer frequent high-HP/suction pressure shutdowns.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;p&gt;The control panel pressure sepoints are very similar to those of heater vapor recovery applications. Note that these setpoints are just an example, real setpoints can be different based on operational needs. For example, setting 5 psig target suction pressure will create bigger pressure drop and production uplift, but will require additional liquid pump due to separator lacking minimum 20 psig pressure to dump liquid to downstream process vessels. Higher setpoint pressuress can be set upto 50 psig to either 1) ensure liquid dump with out a pump, or 2) increase flowrate capacity (high suction pressure increases capacity, see &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;)&lt;/p&gt;&lt;div class="ordered-list" id="16oz_tank"&gt;
&lt;h2&gt;30# Separator Drawdown Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 50 psig:&lt;/u&gt; Compressor high suction pressure shutdown&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 32-50 psig&lt;/u&gt;: Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 28-32 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;30 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;28 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 20-28 psig:&lt;/u&gt; Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 20 psig:&lt;/u&gt; Low pressure shutdown (flexible as long as above 20 psig)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class="ordered-list" id="16oz_tank"&gt;
&lt;h2&gt;5# Separator Drawdown Set Point Scenarios (Pump Required)&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 50 psig:&lt;/u&gt; Compressor high suction pressure shutdown&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 6-50 psig&lt;/u&gt;: Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 4-6 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;5 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;4 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 1-4 psig:&lt;/u&gt; Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 1 psig:&lt;/u&gt; Low pressure shutdown&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="8.3.5.-Casing-drawdown"&gt;8.3.5. Casing drawdown&lt;a class="anchor-link" href="#8.3.5.-Casing-drawdown"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The purpose of casing drawdown is to eliminate gas interference in tubing side with downhole pumps like sucker rod pumps (SRPs) and electric submersible pumps (ESPs). Gas interference reduces pump efficiency, damages equipment, and forces frequent shutdowns for repairs. Traditional fixesâ€”such as installing downhole separators, optimizing pump placement, or increasing wellhead back pressureâ€”are limited because gas must still travel up the tubing alongside liquids. Casing drawdown addresses the root cause by opening the casing side, creating a dedicated gas relief path.&lt;/p&gt;
&lt;p&gt;Consider a wellhead with 150 psig sales line backpressure at the separator. The tubing side with the pump sees 150 psig salesline back pressure. Casing side connected to a compressor inlet, sees much lower back pressure (0-50 psig suction pressure). Gas flows to the path of leat resistance - the casing side. The wellhead now functions like a giant two-phase separator, in which gas exits through the casing (to compressor) and liquids through the tubing (via a pump), eliminating gas interference problems.&lt;/p&gt;
&lt;p&gt;While fixing gas interference in downhole pumps is the main purpose of casing drawdown, it also increases gas flow rates. Unlike conventional systems where gas harms pumps, here it flows exclusively up the casing. Reducing casing backpressure from 150 psig to 5 psig typically boosts gas flow rates 2x-6x. This is similar to increasing flowrates by lowering salesline backpressure, explained in &lt;a class="internal-link" href="#8.3.4.-Separator-drawdown"&gt;Section 8.3.4&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One operational concern for casing drawdown is potential liquid flow up the casing. Normally wells on artificial lift lack pressure to constantly pump liquid on their own, but pressure buildup from liquid accumulation, slug flow, or increased gas flow rate post-compression may occasionally cause gas to exceed critical flow rate (minimum gas flow rate needed to lift liquid). This can make liquids not captured by the tubing-side pump flow up the casing, potentially triggering high liquid level shutdowns on the compressor (see &lt;a class="internal-link" href="#fig-33"&gt;Figure 33&lt;/a&gt;), as the suction scrubber isn't designed as a bulk separator.&lt;/p&gt;
&lt;p&gt;Predicting liquid flow rate up the casing is difficult as these come from entrained mist or liquid slugs from pressure swings that are difficult to be modeled. An operator may start with or without a test separator, observe how the well responds to casing-side liquid, and determine if a permanent external scrubber is needed. These vessels can be simple trailer-mounted test separators with hose connections.&lt;/p&gt;
&lt;p&gt;Casing drawdown is applicable for either SRP or ESP systems.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h5 id="8.3.5.1.-SRP-Casing-drawdown"&gt;8.3.5.1. SRP Casing drawdown&lt;a class="anchor-link" href="#8.3.5.1.-SRP-Casing-drawdown"&gt;Â¶&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-54"&gt;Figure 54&lt;/a&gt; below shows an example P&amp;ID for SRP well casing drawdown, with test separator and 5 psig suction target pressure. 5 psig is not enough pressure to dump liquid to downstream process vessels, hence a liquid pump is installed to handle the liquids. Setting it at a higher pressure of 20 psig will ensure liquid dump without the pump, but production uplift will be smaller due to smaller pressure drawdown. Note that the test separator installation is optional, depending on well response.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-55"&gt;Figure 55&lt;/a&gt; is a similar setup, but without the test separator due to minimal casing side liquid volume.&lt;/p&gt;
&lt;div class="row" id="fig-54"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_drawdown_casing_SRP.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 54:&lt;/strong&gt;  Simplified P&amp;ID for SRP well casing drawdown. Compressor on casing side removes gas interference problems by driving gas to the casing side, instead of tubing. Optional test separator handles liquid (entrained mist/flow swings) that could trigger high liquid level shutdown on a suction scrubber. 5 psig suction requires liquid pump for test separator drainage. Relief line to flare handles surge/shutdowns. PT-5000 on scrubber maintains pressure via PLC-5000.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-55"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_drawdown_casing_SRP2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 55:&lt;/strong&gt; Similar setup as above, but test separator is not installed due to minimual casing side liquid flow that can be handled by compressor suction scrubber.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Compresssor-skid-contained PT on a suction scrubber is good enough. Friction loss is negligible compared to the operating pressure of the casing. Targeting a pressure on suction scrubber will essentially target heater pressure as well.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt;) is "mandatory" as the compressor is directly exposed to wellhead that experiences constant 2x-6x pressure/flowrate swings. Without SCV protection, compressors suffer frequent high-HP/suction pressure shutdowns.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;div class="ordered-list" id="casing_drawdown_setpoints"&gt;
&lt;h2&gt;5# Casing Drawdown Set Point Scenarios&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 50 psig:&lt;/u&gt; Compressor high suction pressure shutdown&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 6-50 psig&lt;/u&gt;: Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 4-6 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;5 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;4 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 1-4 psig:&lt;/u&gt; Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 1 psig:&lt;/u&gt; Low pressure shutdown&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h5 id="8.3.5.2.-ESP-Casing-drawdown"&gt;8.3.5.2. ESP Casing drawdown&lt;a class="anchor-link" href="#8.3.5.2.-ESP-Casing-drawdown"&gt;Â¶&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;ESP setups differ from SRPs due to requiring 70-90 psig casing pressure, exceeding the 50 psig compressor suction limit. Two implementation methods exist:&lt;/p&gt;
&lt;p&gt;&lt;p&gt;&lt;u&gt;1) Install BPV on WH casing flowline&lt;/u&gt;&lt;br/&gt;&lt;/p&gt;&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;The BPV maintains minimum casing pressure but requires additional valve installation costs.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;u&gt;2) Wire casing PT to compressor PLC (recommended)&lt;/u&gt;&lt;br/&gt;&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;Existing casing PTs can be connected to the compressor PLC to control source pressure, similar to &lt;a class="internal-link" href="#8.3.2.-Tank-vapor-recovery"&gt;Tank vapor recovery&lt;/a&gt; systems.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Since casing pressure exceeds compressor suction limits, an SCV must be installed between casing and suction. ESP systems also more frequently require external scrubbers to prevent compressor shutdowns, as ESPs typically handle larger flow rates than SRPs.&lt;/p&gt;
&lt;p&gt;See figure &lt;a class="internal-link" href="#fig-56"&gt;Figure 56&lt;/a&gt; for an example P&amp;ID setups.&lt;/p&gt;
&lt;div class="row" id="fig-56"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_drawdown_casing_ESP.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figure 56:&lt;/strong&gt; ESP well version of &lt;a class="internal-link" href="#fig-54"&gt;Figure 54&lt;/a&gt; system. Key differences: No liquid pump needed (90 psig casing pressure vs SRP's 5 psig), and external PT-1000 on casing (not compressor suction scrubber) sends feedback to PLC for driver RPM control.&lt;/p&gt;
&lt;/div&gt;&lt;div class="centered-title"&gt;
&lt;span class="title-text mt-2"&gt;PT and SCV Installation Requirment&lt;/span&gt;
&lt;/div&gt;&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li id="vrt_PT" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;PT install location&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Eixsting PT on the casing is wired to compressor PLC for target pressure feedback. PT on suction scrubber is inadequate as the suction scrubber will see reduced pressure due to SCV reducing pressure below 50 psig.&lt;/p&gt;
&lt;/li&gt;
&lt;li id="vrt_SCV" style="margin-bottom: 1.5em !important;"&gt;
&lt;p&gt;&lt;strong&gt;SCV required?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suction control valve (SCV, see &lt;a class="internal-link" href="#7.9.-Suction-control-valve"&gt;Section 7.9&lt;/a&gt;) is "mandatory" as the casing pressure target exceeds 50 psig max suction pressure limit. For ESP applications, the higher the SCV setpoint, the better because flowrate capacity increases with increasing suction pressure. There's no advantage for maintaining low pressure for SCV setpoint. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;hr class="black-hr"/&gt;
&lt;div class="ordered-list" id="casing_drawdown_setpoints"&gt;
&lt;h2&gt;80# ESP Drawdown Set Point Scenarios At Casing PT&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;u&gt;Above 90 psig:&lt;/u&gt; High casing pressure shutdown (depends on ESP design)&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 82-90 psig&lt;/u&gt;: Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Betweem 78-82 psig:&lt;/u&gt; Normal operating range&lt;/li&gt;
&lt;li&gt;&lt;u&gt;80 psig:&lt;/u&gt; Target setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;78 psig:&lt;/u&gt; Recycle setpoint&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 70-78 psig:&lt;/u&gt; Operating margin&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Below 70 psig:&lt;/u&gt; Low pressure shutdown (depends on ESP design)&lt;/li&gt;
&lt;li&gt;&lt;u&gt;Between 40-50 psig:&lt;/u&gt; SCV setpoint&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="alert alert-info" id="note_2"&gt;
&lt;h4&gt;Note 2: Relief to flare/combustor&lt;/h4&gt;
&lt;p&gt;Vapor recovery systems aim to capture all vapors from source vessels (tanks, VRTs, heaters, etc.), but VRUs occasionally experience downtime. The continuous flash gas generation builds up pressure that requires a relief point to prevent explosions. During VRU shutdowns, flare/combustors process these gases - burning harmful VOCs into CO2 instead of direct atmospheric venting.&lt;/p&gt;
&lt;p&gt;The system design must ensure: (1) during normal operation, gases flow exclusively to the VRU, and (2) during VRU shutdowns or capacity overload, excess volumes automatically divert to flare. This is achieved through a back pressure valve (BPV) on the flare line set sufficiently above the VRU suction target. The BPV creates higher resistance, making the VRU path the least resistant route during normal operation, and diverting excess gas to flare only during process upsets or VRU shutdown. Example P&amp;IDs are shown in &lt;a class="internal-link" href="#fig-A"&gt;Figure A&lt;/a&gt; and &lt;a class="internal-link" href="#fig-B"&gt;Figure B&lt;/a&gt;. While the detailed valving and piping can be a bit different, the idea is the same. There's a low pressure VRU suction side intended to be used during normal operations, and a high pressure relief side with resistance that opens only during process upsets or VRU shutdown.&lt;/p&gt;
&lt;div class="row" id="fig-A"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_relief_1.png" style="border: 1px solid #ddd;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure A:&lt;/strong&gt; Example P&amp;ID of heater treater vapor recovery system with relief to flare. During normal operation, compressor suction maintains lower pressure (25 psig) than the flare side's back pressure valve BPV-6001 (set at 110 psig).&lt;/p&gt;&lt;/div&gt;
&lt;div class="row" id="fig-B"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_relief_2.png" style="border: 1px solid #ddd;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure B:&lt;/strong&gt; Example P&amp;ID of separator drawdown system with relief to sales line operating at 150 psig. The check valve CHK-6000 essentially functions as a BPV set at 150 psig, opening when the separator pressure builds up to 150 psig salesline pressure due to either process upsets or VRU shutdown.&lt;/p&gt;&lt;/div&gt;
&lt;hr/&gt;
&lt;p&gt;Consider a heater vapor recovery example operating at 25 psig with a 110 psig BPV setpoint shown in &lt;a class="internal-link" href="#fig-A"&gt;Figure A&lt;/a&gt;. During VRU shutdown or peak volume surge:&lt;/p&gt;
&lt;div class="ordered-list ordered-list-note"&gt;
&lt;ol&gt;
&lt;li&gt;Initially the system pressure is 25 psig&lt;/li&gt;
&lt;li&gt;VRU suction and heater pressure build up to BPV setpoint (110 psig)&lt;/li&gt;
&lt;li&gt;BPV opens, dumping to flare until pressure drops (ex: ~80 psig)&lt;/li&gt;
&lt;li&gt;Cycle repeats until VRU restarts or surge subsides&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-C"&gt;Figure C&lt;/a&gt; shows telemetry data for this VRU shutdown scenario &amp; relief to flare in a heater treater application. Note that while operating pressures vary, the principle of automatic diversion to flare/combustor via higher resistance remains consistent across tanks, VRTs, heaters, separators, and wellheads.&lt;/p&gt;
&lt;div class="row" id="fig-C"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_ht_flare_dump.png" style="border: 1px solid #ddd;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure C:&lt;/strong&gt; Telemetry data showing heater treater pressure relief to flare during VRU shutdown. A pressure transmitter (PT) is installed on the suction scrubber gas outlet line. The PT reading stops at 100 psig due to scale limit between -14.7 to 100 psig. Actual heater pressure exceeded 100 psig during compressor shutdown, reaching the BPV setpoint (say 110 psig). When pressure hits 110 psig, the BPV opens to flare. Pressure drops to ~80 psig when BPV closes (2nd black arrow). After compressor restart, two high suction pressure shutdowns occurred (3rd black arrows) due to built-up pressure from the heater hitting the compressor without SCV regulation (max 50 psig suction limit). Once pressure stabilized, the unit maintained around the target 25 psig suction. &lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="9.-Temperature-control"&gt;9. Temperature control&lt;a class="anchor-link" href="#9.-Temperature-control"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; This section assumes reader familiarity with 3-way thermostatic valve operation (&lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Discussion on oil-flooded screw compressor temperature control should be divided into two categories: electric-driven models and gas engine-driven models. The key distinction in temperature management arises from how each model powers the compressor rotors and cooling fan.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Electric&lt;/u&gt;&lt;/strong&gt; (&lt;a class="internal-link" href="#9.1.-Electric-models"&gt;Section 9.1&lt;/a&gt;) compressors use two motors to independently to drive the compressor rotors and the cooling fan. This arrangement allows precise, real-time RPM adjustments for BOTH components, optimizing temperature control effectively. The cooling fan has 2 sections, for lube oil and and discharge gas (shown in &lt;a class="internal-link" href="#fig-59"&gt;Figure 59&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;u&gt;Gas engine&lt;/u&gt;&lt;/strong&gt; (&lt;a class="internal-link" href="#9.2.-Gas-engine-models"&gt;Section 9.2&lt;/a&gt;) compressors utilize a single engine to simultaneously power both the compressor rotors and the cooling fan. The rotor RPM becomes the primary control target, eliminating the possibility of dedicated real-time RPM adjustments for cooling. Additionally, gas engines generate significant heat from fuel combustion, which, combined with the heat produced from compression, makes temperature control difficult during hot summer seasons. The cooling fan has 3 sections, for lube oil, discharge gas, and engine coolant (shown in &lt;a class="internal-link" href="#fig-60"&gt;Figure 60&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;These inherent differences result in distinct temperature control characteristics for each compressor type, summarized in &lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt;. Overall, electric models are better than gas engines at handling temperature control, as long as a unit is not oversized. For electric models, timely downsizing is important as well declines to avoid low temperature and lube oil contamination issues. Oversized units experience frequent recycle, which may not generate enough heat to keep the unit hot.&lt;/p&gt;
&lt;p&gt;For both compressor types, recycle mode (see &lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;) is preferred over complete shutdown when the source vessel lacks sufficient gas to draw from. Recycle maintains compressor operation at minimum sustainable RPM (ex: 900 RPM in &lt;a class="internal-link" href="#fig-57"&gt;Figure 57&lt;/a&gt;), continuously generating heat from compression to keep the unit warm. In contrast, a full shutdown significantly lowers compressor temperature due to surrounding ambient air cooling, increasing the risk of lube oil contamination from gas condensation at low temperatures (see &lt;a class="internal-link" href="#10.-Lube-oil-contamination-problems"&gt;Section 10&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;For instance, &lt;a class="internal-link" href="#fig-57"&gt;Figure 57&lt;/a&gt; shows telemetry data around a 12-hour shutdown. Upon restarting at 12:49 PM, the lube oil temperature was near ambient at 65Â°F. It took 35 minutes to reach 182Â°F (by 1:24 PM), then an additional 247 minutes to stabilize at 233Â°F (&lt;a class="internal-link" href="#7.4.-Cooling-fan-/-3-Way-thermostatic-valve"&gt;thermostatic valve&lt;/a&gt; setpoint ~230Â°F, acceptable valve Â±3Â°F tolerance) by 5:31 PM. During this extended warm-up period, gas condensation into liquid likely occurred, mixing with and contaminating the lube oil. Due to these thermal challenges, recycle mode is programmed to activate prior to shutdown to maintain optimal compressor temperatures.&lt;/p&gt;
&lt;p&gt;A healthy temperature trend for lube oil and discharge gas should look like &lt;a class="internal-link" href="#fig-58"&gt;Figure 58&lt;/a&gt;, with the average temperature slightly below the thermostat valve setpoint (e.g., 230Â°F) and a 5-15Â°F approach temperature between lube oil and discharge gas. This ensures the gas stays hot enough to prevent lube oil contamination, while also staying below the thermostat setpoint to avoid high temperature shutdown.&lt;/p&gt;
&lt;div class="row" id="table-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_comparison.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 4:&lt;/strong&gt; Temperature control differences between electric vs. gas engine models. Electric models are better than gas engine models for temperature control, as long as unit is not oversized. Timely downsizing is important as well declines to avoid low temperature issues.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-57"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle_temperature_control.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 57:&lt;/strong&gt; Telemetry data of an electric compressor for VRT vapor recovery around 12-hr shutdown period. In the lower temperature plot, the unit took 35 minutes between [1] and [2] to regain temperature from 65Â°F to 182Â°F. During this 35 minutes period, liquid condensation definitely happened due to typically high BTU content (1600-2500 BTU/scf) of VRT gases. During [2] and [3] (247 minutes), condensation could've happened depending on compression ratio and gas BTU content.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-58"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_recycle_temperature_control2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 58:&lt;/strong&gt; Temperature telemetry data of an electric compressor. The thermostat valve is set at 230Â°F. The fan has a dedicated motor that targets a 215Â°F setpoint on the lube oil. The PLC control on fan motor RPM acts as a primary control for oil temperature. The 230Â°F thermostat acts as a secondary backup control to prevent high temperature if the fan RPM adjustment cannot contain the oil temperature. This occurred in [2], when the temperature nearly overshot 230Â°F; the thermostat valve intervened as a final control device to contain temperature under 230Â°F (Â±3Â°F tolerance). A healthy temperature control trend should look like this. One thermowell is installed on the injection side of lube oil line (pre-compression), and the other is installed on the 2-phase mixture line of lube oil and gas leaving the compression chamber (post-compression).&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-59"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_fan_electric.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 59:&lt;/strong&gt; Cooling system for an electric oil-flooded screw compressor. The fan has two sections for lube oil and discharge gas.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-60"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_fan_gas.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 60:&lt;/strong&gt; Cooling system for a gas engine oil-flooded screw compressor. The fan has three sections for lube oil, discharge gas and engine coolant.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="9.1.-Electric-models"&gt;9.1. Electric models&lt;a class="anchor-link" href="#9.1.-Electric-models"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; This section assumes reader familiarity with 3-way thermostatic valve operation (&lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;) and P&amp;ID flow for electric model compressors (see &lt;a class="internal-link" href="#Type-A:-Electric-Driver/Electric-Pump-Dump/Electric-Recycle"&gt;Type A: Full electric&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;&lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; For reader clarity, "discharge gas" refers to gases leaving the compression chamber, while "aftercooled gas" refers to gases leaving the fan. The hot discharge gas is cooled inside the fan and exits the skid as cold aftercooled gas.&lt;/p&gt; &lt;/blockquote&gt;&lt;p&gt;Electric models use two motor driversâ€”one for the fan and one for the compressorâ€”allowing independent RPM control for each. This allows for superior temperature management compared to gas engine models. Electrics generate less heat than gas engine models because electric motors do not burn fuel for power. This section explains key characteristics of electric compressors:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#dual_target_capability"&gt;Dual Target Capabiltiy&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#superior_lube_oil_temperature_management"&gt;Superior Lube Oil Temperature Management&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#low_temperature_problems_during_recycle"&gt;Low Temperature Problems During Recycle&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;div class="row" id="fig-61"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_electric3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 61:&lt;/strong&gt; 3D representation of an electric compressor parts. Compressor and cooling fan both have a dedicated motor driver for independent RPM control.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-62"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_electric4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 62:&lt;/strong&gt; Real-life electric compressor package, highlighting two motors for compressor and cooling fan.&lt;/p&gt;
&lt;/div&gt;&lt;hr/&gt;
&lt;div id="dual_target_capability"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Dual Target Capabiltiy&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Electric models offer two real-time temperature control mechanisms: a VFD-controlled fan motor and a 3-way thermostatic valve on the lube oil line. When the fan is properly sized for peak heat loads for the lube oil, the system can manage both lube oil and aftercooled gas temperatures independently.&lt;/p&gt;
&lt;p&gt;Consider a scenario where the goal is to maintain 230Â°F for lube oil on the injection side (pre-compression) and 120Â°F for gas leaving the compressor skid (post-compression and post-aftercooler). Example P&amp;ID is shown in &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;. After compression, the 2-phase mixture of gas and lube oil (purple line) typically experiences a 5-15Â°F temperature rise, reaching about 240Â°F (example telemetry data shown in &lt;a class="internal-link" href="#fig-58"&gt;Figure 58&lt;/a&gt;). This mixture flows into the discharge scrubber V-300, where gas and oil are separated and directed into different cooler sections (&lt;a class="internal-link" href="#fig-59"&gt;Figure 59&lt;/a&gt;) sized according to their heat loads.&lt;/p&gt;
&lt;p&gt;The primary temperature control is assigned to the aftercooled gas. A thermowell installed on the post-aftercooler gas line feeds temperature data to the PLC, which adjusts fan RPM to maintain the 120Â°F target. Suppose 500 RPM achieves this. Meanwhile, the 3-way thermostat valve manages lube oil temperature by mixing bypassed hot oil with cooled oil to maintain the 230Â°F setpoint. The valve has an expanding/contract wax element that automatically adjust its position with temperature changes.&lt;/p&gt;
&lt;p&gt;However, this control strategy assumes that the cooling effect provided by the fan at 500 RPM is also sufficient for the lube oil. If the cooling capacity at this RPM is inadequate, the thermostat valve cannot regulate temperature effectivelyâ€”even when fully diverting all oil flow through the coolerâ€”leading to high temperature shutdowns.&lt;/p&gt;
&lt;p&gt;Because of this constraint, electric-driven units are often prioritized to maintain lube oil temperature over aftercooled gas temperature. This trade-off is reasonable: lube oil temperature control is critical for compressor protection, whereas deviations in aftercooled gas temperature are negligible once the gas mixes into the larger sales pipeline.&lt;/p&gt;
&lt;hr/&gt;
&lt;div id="superior_lube_oil_temperature_management"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Superior Lube Oil Temperature Management&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Electric models offer superior lube oil temperature management by using a dedicated fan motor that targets lube oil temperature â€” a more critical parameter than aftercooled gas temperature for compressor operation. This means that the aftercooled gas temperature floats, as shown in (&lt;a class="internal-link" href="#fig-63"&gt;Figure 63&lt;/a&gt;). Although electric compressors are capable of targeting both aftercooled gas and lube oil temperatures, operations typically prioritize lube oil. The fan-controlled lube oil temperature provides primary regulation, while the 3-way thermostatic valve offers secondary backup control if the fan cannot adequately contain a sudden temperature rise.&lt;/p&gt;
&lt;p&gt;This setup is fundamentally better than gas engine-driven models, which lack independent fan RPM control (see &lt;a class="internal-link" href="#9.2.-Gas-engine-models"&gt;Section 9.2&lt;/a&gt; for gas engine temperature control). In engine models, fan speed is tied directly to rotor RPM, meaning the fan turns at full speed whenever the engine runs at full speed, even if maximum cooling is unnecessary. While the 3-way thermostat helps avoid overcooling by diverting flow around the cooler, the real challenge emerges during recycle mode. Unlike electric units, gas engines continue to produce significant heat from fuel combustion even at low RPM (e.g., 900 RPM during recycle, 2400 RPM full speed), while fan airflow also drops due to the reduced engine speed. Reduced air flow due to reduced RPM means ineffective cooling. This imbalance can lead to overheating during recycle, especially in hot conditions â€” an issue electric compressors are much better equipped to manage.&lt;/p&gt;
&lt;div class="row" id="fig-63"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_electric1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 63:&lt;/strong&gt; Example telemetry data of an electric compressor. The unit uses a fan with a dedicated motor driver that provides primary temperature control, targeting 215Â°F on the lube oil. A 3-way thermostat valve provides secondary temperature control in case the fan does not respond quickly enough to sudden temperature rises. Because the fan motor targets only lube oil temperature, the aftercooled gas temperature floats. Aftercooled gas temperature was 92Â°F during the day at 5:00 PM [1], but dropped to 54Â°F at night around 4:30 AM [2]. This day-night sine wave pattern repeats daily. While configuring the PLC to target aftercooled gas temperature at a setpoint (e.g., 120Â°F) would create a flat trend on the aftercooled gas line, lube oil temperature management could become more difficult.&lt;/p&gt;
&lt;/div&gt;&lt;hr/&gt;
&lt;div id="low_temperature_problems_during_recycle"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Low Temperature Problems During Recycle&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Overall, electric units are superior to gas engine models for temperature control. However, there is one area where electric models are inferior: when a unit is oversized and experiences frequent recycle mode (see &lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt;), it cannot generate enough heat of compression to maintain a target temperature (e.g., 215Â°F on lube oil). While this is not an issue if the unit is properly sized, upstream wells typically decline quicklyâ€”often seeing production drop by more than half within 6â€“12 months. Vapor volumes processed by the compressor decline at a similar rate. For example, in a simulation shown in Table 1 of my &lt;a href="https://aegis4048.github.io/predicting_vru_economics_downsizing_timing_for_declining_wells#table-1" target="_blank"&gt;previous post&lt;/a&gt;, vapor volumes on a VRT reduced by 86% within 12 months after initial production (IP). Although actual decline rates vary by well, such steep declines are common in the field.&lt;/p&gt;
&lt;p&gt;While timely downsizing would save rental costs and maintain proper compressor operation, it is rarely done on time because VRU downsizing is not the operator's primary focus. As a result, oversized compressors often end up operating in 40â€“90% recycle mode, failing to generate enough heat to keep the unit hot.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-64"&gt;Figure 64&lt;/a&gt; shows an example where an electric compressor failed to maintain the 215Â°F lube oil target during recycle mode. Over the 16-day span, recycle was active 65% of the time, and the average lube oil temperature was only 191.93Â°Fâ€”well below the desired 215Â°F. The temperature followed a daily sine wave pattern, peaking around 215Â°F during the day and dropping to around 170Â°F at night, reflecting ambient air temperature swings. If the gas systemâ€™s dew point temperature is, say, 190Â°F, this would result in lube oil contamination during the night, as the operating temperature (170Â°F) falls below the dew point, allowing gas condensation into liquid. This can be fixed by replacing with a smaller unit to decrease, or completely remove, recycle time.&lt;/p&gt;
&lt;div class="row" id="fig-64"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_electric2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 64:&lt;/strong&gt; Example telemetry data of an electric compressor, with the same 230Â°F thermostat setpoint and 215Â°F aftercooled target temperature as in &lt;a class="internal-link" href="#fig-63"&gt;Figure 63&lt;/a&gt;. The difference is that this unit had recycle mode active for 65% of the time over the 16-day time span. Recycle mode was unable to generate sufficient heat of compression to keep the unit hot above the 215Â°F target. The unit recorded a lube oil temperature of 169Â°F at night around 4:00 AM [1], far below the 215Â°F target. Overall, the unit averaged 191.93Â°F lube oil temperature during the 16-day period, still below the desired 215Â°F. Although the unit occasionally reached temperatures near the 230Â°F thermostat setpoint, as seen in [2], it mostly stayed around 191.93Â°F, increasing the risk of lube oil contamination. For this specific unit, discharge pressure was fairly low around 120 psig, which usually don't cause liquid condensation at 191F for most gas compositions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="9.2.-Gas-engine-models"&gt;9.2. Gas engine models&lt;a class="anchor-link" href="#9.2.-Gas-engine-models"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;BEFORE YOU READ:&lt;/strong&gt; This section assumes reader familiarity with 3-way thermostatic valve operation (&lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;) and P&amp;ID flow for electric model compressors (see &lt;a class="internal-link" href="#Type-D:-Gas-Engine/Pneumatic-Dump/Pneumatic-Recycle"&gt;Type D: Gas engine&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;&lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; For reader clarity, "discharge gas" refers to gases leaving the compression chamber, while "aftercooled gas" refers to gases leaving the fan. The hot discharge gas is cooled inside the fan and exits the skid as cold aftercooled gas.&lt;/p&gt; &lt;/blockquote&gt;&lt;p&gt;Gas engine models use a single shared engine driver to power both the compressor and the fan. The PLC manages engine combustion to control compressor RPM, meaning compressor speed is prioritized and the fan simply follows compressor RPM. When the compressor runs at full speed, the fan also runs at full speed; when the compressor slows down, the fan slows down accordingly.&lt;/p&gt;
&lt;p&gt;Unlike electric modelsâ€”where heat of compression is the only significant heat sourceâ€”gas engine models generate additional heat from fuel gas combustion. As a result, gas engines run hotter than electric models, creating challenges during hot summer seasons due to the lack of independent fan RPM control. Overall, gas engine models have inferior temperature management compared to electric models.&lt;/p&gt;
&lt;p&gt;Because of these limitations (plus emission concerns), electrics are preferred over gas engines by most operators, except for sites that lack access to power.&lt;/p&gt;
&lt;p&gt;This section explains key characteristics of gas engine compressors:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#fuel_gas_combustion_heat"&gt;Fuel Gas Combustion Heat&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#unable_to_control_fan_RPM"&gt;Unable to Control Fan RPM&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#high_temperature_problems_during_recycle"&gt;High Temperature Problems During Recycle&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#reliance_on_thermostat_valve"&gt;Reliance On Thermostat Valve&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#engine_coolant"&gt;Engine Coolant&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;div class="row" id="fig-65"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_engine_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 65:&lt;/strong&gt; 3D drawing showing a belt drive pulley assembly, gas engine, and compressor. The engine crankshaft at the lower side of the engine extends left toward the fan side and right toward the compressor side. For the fan, the engine shaft (driver) spins the pulleysâ€”one idler pulley and one fan pulley. The spinning fan pulley drives the fan. For the compressor, in gear-driven models (&lt;a class="internal-link" href="#2.3.-Gear-driven-(geared)"&gt;Section 2.3&lt;/a&gt;), the engine shaft connects to the compressor shaft through timing gears, while in direct-driven models (&lt;a class="internal-link" href="#2.2.-Direct-driven-(non-geared)"&gt;Section 2.2&lt;/a&gt;), the compressor rotors are directly driven without timing gears.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row" id="fig-66"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_engine_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 66:&lt;/strong&gt; 3D drawing showing the connection between the engine driver and the fan. The compressor is driven by the engine shaft by timing gears. The cooling fan is driven by the engine through a belt drive pulley assembly.&lt;/p&gt;
&lt;/div&gt;&lt;div class="row mt-3" id="fig-67"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_engine_3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 67:&lt;/strong&gt; Real-life implementation of a gas engine compressor, corresponding to the drawings shown in &lt;a class="internal-link" href="#fig-65"&gt;Figure 65&lt;/a&gt; and &lt;a class="internal-link" href="#fig-66"&gt;Figure 66&lt;/a&gt;, highlighting the engine driver pulley system.&lt;/p&gt;
&lt;/div&gt;&lt;hr/&gt;
&lt;div id="fuel_gas_combustion_heat"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Fuel Gas Combustion Heat&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Gas engines burn fuel gas to generate power, spinning the engine crankshaft. This combustion heat becomes an additional source of temperature rise, on top of the heat of compression. As a result, gas engine models are generally free from low temperature issues that can trigger lube oil contamination. However, they face the opposite problem: high temperatures. Unlike electric models, gas engines lack independent RPM control on the fan, meaning the fan speed is tied directly to compressor speed. Combined with the extra heat from combustionâ€”which electric models do not haveâ€”this makes temperature management even more difficult for gas engines compared to the electrics.&lt;/p&gt;
&lt;hr/&gt;
&lt;div id="unable_to_control_fan_RPM"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Unable to Control Fan RPM&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Engine-driven models lack a dedicated fan driver because the compressor and fan must share a single engine. Sites using engine models typically have no access to external power, making it impractical to install a separate fan motor. Adding a second engine is also not feasible due to size, cost, and skid space limitations.&lt;/p&gt;
&lt;p&gt;The engine crankshaft extends in both directions. As shown in &lt;a class="internal-link" href="#fig-66"&gt;Figure 66&lt;/a&gt;, the left side drives the compressor rotorsâ€”either direct-driven (&lt;a class="internal-link" href="#2.2.-Direct-driven-(non-geared)"&gt;Section 2.2&lt;/a&gt;) or gear-driven (&lt;a class="internal-link" href="#2.3.-Gear-driven-(geared)"&gt;Section 2.3&lt;/a&gt;)â€”while the right side drives the cooling fan through a belt-driven pulley assembly.&lt;/p&gt;
&lt;p&gt;This pulley assembly works similarly to the timing gears used for compressor rotors. As shown in &lt;a class="internal-link" href="#fig-65"&gt;Figure 65&lt;/a&gt;, assume the pulley attached to the engine crankshaft (driver) has a 1-foot diameter, while the fan pulley (driven) has a 2-foot diameter. Based on the pulley ratio, if the engine turns at 1000 RPM, the fan will turn at 500 RPM. The pulley diameter ratio directly sets the fixed speed ratio between the engine shaft and the fan, just as gear ratios determine rotor speed in the compressor.&lt;/p&gt;
&lt;p&gt;Still, no real-time fan RPM adjustment is possible. When the compressor operates at full speed, the fan does too, potentially causing overcooling. When the compressor slows down, the fan also slows, increasing the risk of undercooling. In practice, undercooling is more common, as the additional heat from fuel combustion overwhelms the fan's maximum cooling capacity, especially during hot summer days. This inability to independently control fan speed is a key reason why electric-driven models offer superior temperature management compared to gas engine models.&lt;/p&gt;
&lt;hr/&gt;
&lt;div id="high_temperature_problems_during_recycle"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;High Temperature Problems During Recycle&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;(see &lt;a class="internal-link" href="#8.2.-Recycle-mode"&gt;Section 8.2&lt;/a&gt; for recycle mode explanations)&lt;/p&gt;
&lt;p&gt;In electric compressor models (see &lt;a class="internal-link" href="#9.1.-Electric-models"&gt;Section 9.1&lt;/a&gt;), recycle mode often leads to low temperature problems due to limited heat of compression. Engine-driven models face the opposite issue: high temperatures during recycle. While the heat of compression is still reduced under low-flow conditions, the heat generated from continuous fuel gas combustion remains significant.&lt;/p&gt;
&lt;p&gt;This becomes particularly problematic because fan RPM is directly tied to compressor RPM. When recycle mode slows the compressor, fan speed also drops, reducing cooling capacity. However, combustion continues producing heat, sometimes overwhelming the coolerâ€™s reduced capacity. Unlike electric models, engine-driven systems must manage both compression and combustion heat sources without fan RPM control capability, making thermal control more complex.&lt;/p&gt;
&lt;p&gt;To mitigate this, the fan must be sized to handle peak heat loads even at minimum operating speeds. For example, if recycle mode maintains minimum compressor speed at 900 RPM and the pulley ratio to the fan is 2:1, the fan operates at 450 RPM. If the maximum compressor RPM is 2400 RPM, the corresponding fan RPM would be 1200 RPM. The cooling system must be capable of removing sufficient thermal load at the reduced 450 RPM during recycle, without excessive overcooling at 1200 RPM during full-speed operation. Proper cooling fan sizing by compressor packagers is essential to maintain thermal stability across the full operating range.&lt;/p&gt;
&lt;p&gt;While most gas engine applications don't see any problems, some installations struggle with temperature management during hot summer days.&lt;/p&gt;
&lt;hr/&gt;
&lt;div id="reliance_on_thermostat_valve"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Reliance On Thermostat Valve&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The 3-way thermostat valve (example shown in &lt;a class="internal-link" href="#fig-27"&gt;Figure 27&lt;/a&gt;) is the only available real-time temperature control for engine-driven compressor models. Fan sizing and pulley ratios are fixed at installation and cannot respond to real-time temperature fluctuations.&lt;/p&gt;
&lt;p&gt;The 3-way thermostat valve contains an expanding/contracting element that automatically adjusts its internal mixing position to maintain lube oil temperature near a target setpoint (e.g., 230Â°F). However, as explained in &lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;, the thermostat valve fails to maintain temperature under two scenarios: [1] if the incoming hot oil bypassing the fan (B-port) is already below 230Â°F, or [2] if the cooled oil exiting the fan (C-port) remains above 230Â°F because the cooler cannot remove enough heat. While scenario [1] is rare for engine models due to abundant combustion heat, scenario [2] can occur during hot summer days, especially during recycle mode when fan RPM is reduced and cooling capacity drops. Fan RPM reduces because the fan shares the same engine driver used for compressor rotors, and the PLC prioritizes rotor RPM. This lack of independent fan control is a key reason why electric-driven compressor models offer superior temperature management compared to engine-driven models.&lt;/p&gt;
&lt;p&gt;It is important to note that the thermostat valve controls only the lube oil temperature. Aftercooled gas temperature is not regulated and floats with ambient conditions. I personally do not have any telemetry data showing aftercooled gas temperature fluctuations for engine models, because temperature transmitters are typically not installed on the aftercooled gas lineâ€”there is no purpose in monitoring a parameter that cannot be actively controlled. However, the floating behavior would likely resemble the trend shown in &lt;a class="internal-link" href="#fig-63"&gt;Figure 63&lt;/a&gt;, with aftercooled gas temperature rising during the day and falling at night, following ambient air temperature cycles.&lt;/p&gt;
&lt;hr/&gt;
&lt;div id="engine_coolant"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Engine Coolant&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;(See &lt;a class="internal-link" href="#fig-18"&gt;Figure 18&lt;/a&gt; for an example engine model P&amp;ID.)&lt;/p&gt;
&lt;p&gt;The engine coolant system cools the gas engine and is routed through a dedicated section of the fan, as shown in &lt;a class="internal-link" href="#fig-60"&gt;Figure 60&lt;/a&gt;. The coolant temperature is another critical variable that must be maintained within an acceptable range. However, similar to the aftercooled gas line, there is no thermostat valve installed on the coolant line. As a result, the coolant temperature cannot be actively controlled and floats based on ambient conditions, engine load, and compressor RPM.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-68"&gt;Figure 68&lt;/a&gt; below shows a temperature trend for discharge gas/lube oil, and engine coolant. While the discharge side temperature is regulated around the 230Â°F thermostat setpoint, the coolant temperature fluctuates throughout the day. This floating behavior introduces another layer of complexity to temperature management in engine-driven compressor models, highlighting another temperature control advantage of electric models.&lt;/p&gt;
&lt;div class="row mt-3" id="fig-68"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_temp_control_engine_4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 68:&lt;/strong&gt; Example temperature telemetry data of a gas engine unit. The blue line shows the discharge-side lube oil and gas mixture exiting the compression chamber. The green line shows engine coolant temperature. The discharge-side temperature remains flat due to the presence of a thermostat valve maintaining 230Â°F, while the coolant temperature follows a sine wave pattern, driven by day/night ambient air temperature changes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="10.-Lube-oil-contamination-problems"&gt;10. Lube oil contamination problems&lt;a class="anchor-link" href="#10.-Lube-oil-contamination-problems"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Lube oil refill is the single largest maintenance cost in oil-flooded screw compressor operations. The FX12 compressor by Flogistix, shown in &lt;a class="internal-link" href="#fig-13"&gt;Figure 13&lt;/a&gt;, has a 20-gallon lube oil capacity, while the FX17 compressor in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; holds 60 gallons. Lube oil contamination leads to oil loss into the sales line and can trigger a low-level shutdownâ€”detected by an electric liquid level switch installed on the discharge scrubber, as shown in &lt;a class="internal-link" href="#fig-33"&gt;Figure 33&lt;/a&gt;. Assuming polyglycol synthetic oil priced at &lt;span&gt;$&lt;/span&gt;60 per gallon, a low oil level shutdown would cost an operator &lt;span&gt;$&lt;/span&gt;1,200 to refill the FX12 compressor (20 Ã— 60), and &lt;span&gt;$&lt;/span&gt;3,600 for the FX17 compressor (60 Ã— 60).&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;As explained in &lt;a class="internal-link" href="#key3"&gt;Section 1.3&lt;/a&gt;, lube oil serves three critical functions:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;[1]  Provides sealing between the two helical rotors, which are designed to avoid direct contact (see &lt;a class="internal-link" href="#2.1.-Rotors-(male-and-female)"&gt;Section 2.1&lt;/a&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;[2]  Lubricates moving parts, reducing friction and wear&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;[3]  Absorbs and dissipates heat&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;Screw compressors often experience process gas condensation inside the compression chamber. This condensed liquid mixes with the lube oil, diluting it and reducing its viscosity. Reduced viscosity leads to two major problems:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;[1]  &lt;u&gt;Inadequate lubrication&lt;/u&gt;, which can cause damage to compressor bearings. Each compressor model has a minimum manufacturer viscosity specification that must be met to ensure proper operation.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;[2]  &lt;u&gt;Reduced capture efficiency of the coalescer&lt;/u&gt; in the discharge scrubber (V-300), shown in &lt;a class="internal-link" href="#fig-15"&gt;Figure 15&lt;/a&gt;. The scrubber acts as a two-phase separator, capturing most of the lube oil from the compressed gas. While about 97% of oil separates by gravity, the remaining 3% exists as mist and is captured by a coalescer at the top. Lower viscosity makes the 3% mist oil harder to capture by the coalescer, allowing more to escape with the gas stream, resulting in oil loss into the sales line. This requires more frequent and costly oil refills.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;Lube oil contamination from condensed liquid mixing can be avoided by operating the compressor at a temperature sufficiently above the dew point of the process gas. A general rule is to maintain 15â€“20Â°F above the dew point, with 30Â°F as the ideal buffer. In practice, oil-flooded screw compressors are intentionally designed to operate as hot as possibleâ€”typically 20â€“30Â°F below the maximum allowable temperature of 250Â°F (depends on manufacturers). This is why thermostat valve setpoints (see &lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;) are commonly set at 230Â°F, providing a 20Â°F safety margin below the high temperature shutdown threshold.&lt;/p&gt;
&lt;p&gt;In other words, if the calculated dew point temperature of the process gas at a given discharge pressure exceeds 200Â°F, you begin to risk condensationâ€”assuming a 230Â°F thermostat setpointâ€”because the operating temperature may no longer maintain sufficient buffer above the dew point.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;The lube oil contamination problems tends to be problems for the following five scenarios:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#lube_oil_contamination_1"&gt;10.1. Frequent shutdown/autostart units&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#lube_oil_contamination_2"&gt;10.2. Oversized electric units&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#lube_oil_contamination_3"&gt;10.3. High discharge pressure vapor recovery&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#lube_oil_contamination_4"&gt;10.4. High BTU vapor recovery (above 2000 Btu)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;&lt;a class="internal-link" href="#lube_oil_contamination_5"&gt;10.5. High inlet temperature VRT/Tank vapor recovery (above 110F)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="lube_oil_contamination_1"&gt;&lt;/div&gt;&lt;h3 id="10.1.-Frequent-shutdown/autostart-units"&gt;10.1. Frequent shutdown/autostart units&lt;a class="anchor-link" href="#10.1.-Frequent-shutdown/autostart-units"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A compressor keeps the unit hot only while runningâ€”either during normal operation or recycle mode. Electric units rely solely on heat of compression, while engine units also gain heat from combustion. Once shut down, the unit cools to ambient temperature (40â€“120Â°F, depending on region and time of the season). After a prolonged shutdown, startup begins cold and may take 0.5â€“3 hours to reach full temperature. During this warm-up, internal temperatures may stay below the dew point, causing condensation that mixes with and contaminates lube oil. Although recycle mode exists to avoid shutdown, units with poor recycle control may still experience frequent shutdowns, causing repeated cold auto-starts and ongoing oil contamination.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-57"&gt;Figure 57&lt;/a&gt; shows a case in which a unit experienced a 12-hour shutdown. When the compressor restarted at 12:49 PM, the lube oil temperature was near ambient at 65Â°F. It took 35 minutes to reach 182Â°F (by 1:24 PM) [1], and another 247 minutes to stabilize at 233Â°F by 5:31 PM [2]. During this extended warm-up, internal temperatures likely remained below the gas dew point for several hours, allowing condensation to form and mix with the lube oil. During the first heating period in [1], contamination was almost certainâ€”the initial 65Â°F is far too low to prevent condensation for any compression scenarios.&lt;/p&gt;&lt;p&gt;Although recycle mode is designed to keep the compressor running at low load to avoid shutdowns, poor recycle control can lead to frequent shutdowns and auto-starts. These cold auto-starts increase the risk of lube oil contamination due to repeated condensation events, ultimately accelerating oil degradation and loss.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="lube_oil_contamination_2"&gt;&lt;/div&gt;&lt;h3 id="10.2.-Oversized-electric-units"&gt;10.2. Oversized electric units&lt;a class="anchor-link" href="#10.2.-Oversized-electric-units"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Oversized electric compressors frequently enter recycle mode due to insufficient gas volume. During recycle, rotor RPM drops to the minimum sustainable level (shown in &lt;a class="internal-link" href="#fig-45"&gt;Figure 45&lt;/a&gt;), generating minimal heat of compression. If recycle mode accounts for less than 10â€“20% of total run time, the unit may retain sufficient heat. But when recycle dominatesâ€”e.g., 60% of run timeâ€”the unit may run too cold to stay above a dew point temperature.&lt;/p&gt;
&lt;ol class="numbered-bullets mt-4"&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Good trend:&lt;/strong&gt; In &lt;a class="internal-link" href="#fig-63"&gt;Figure 63&lt;/a&gt;, the lube oil temperature remains stable near the 215Â°F fan setpoint due to minimal recycle.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Bad trend:&lt;/strong&gt; In &lt;a class="internal-link" href="#fig-64"&gt;Figure 64&lt;/a&gt;, recycle mode was active 65% of the time over 16 days. As a result, the unit couldnâ€™t sustain heat, dropping as low as 169Â°F at night and averaging just 194.5Â°Fâ€”well below 215Â°F target fan setpoint.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Oversizing often occurs 6â€“9 months after installation, as natural well decline reduces gas volume at the compressor. A unit that was initially right-sized becomes oversized over time. Timely downsizing helps avoid low-temperature recycle issues and reduces rental costs, but is often delayed since VRUs are not a primary operational focus (I wrote an article on this topic: &lt;a href="https://aegis4048.github.io/predicting_vru_economics_downsizing_timing_for_declining_wells" target="_blank"&gt;Predicting VRU Economics/Downsizing Timing For Declining Wells&lt;/a&gt;). That said, as long as the unit remains above the dew point, it may still be acceptable from a lube oil maintenance standpoint.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="lube_oil_contamination_3"&gt;&lt;/div&gt;&lt;h3 id="10.3.-High-discharge-pressure-vapor-recovery"&gt;10.3. High discharge pressure vapor recovery&lt;a class="anchor-link" href="#10.3.-High-discharge-pressure-vapor-recovery"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;u&gt;Dew point temperature increases with increasing pressure&lt;/u&gt;. &lt;a class="internal-link" href="#fig-69"&gt;Figure 69&lt;/a&gt; shows the phase envelope of a 2500 Btu/scf vapor sample taken from an atmospheric tank vapor recovery. &lt;a class="internal-link" href="#fig-70"&gt;Figure 70&lt;/a&gt; shows a zoomed-in version of the same envelope, truncated at 400 psig on the y-axis, noting that typical screw compressor discharge pressure limits are at 350 psig. The operating condition (T, P) at the discharge side must stay in the gas phase region to avoid forming liquid.&lt;/p&gt;
&lt;p&gt;The below summarizes dew point temperatures reading from Figure 70:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;100 psig discharge P â†’ 182Â°F dew point T&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;150 psig discharge P â†’ 202Â°F dew point T&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;200 psig discharge P â†’ 218Â°F dew point T&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;250 psig discharge P â†’ 230Â°F dew point T&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;300 psig discharge P â†’ 241Â°F dew point T&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;With a 230Â°F thermostat valve setpoint (which defines the compressor's operating temperatureâ€”see &lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;), condensation risk begins around 150 psig, where the dew point reaches 202Â°F. Since a 15â€“20Â°F margin above dew point is recommendedâ€”and 30Â°F is idealâ€”this provides only a narrow buffer. At 200 psig, the dew point is 218Â°F, reducing the margin to 12Â°F. By 250 psig, dew point equals the setpoint, eliminating the margin and guaranteeing lube oil contamination.&lt;/p&gt;
&lt;p&gt;If the salesline requirement for this tank vapor recovery application is below 150â€“180 psig, oil-flooded screw compressors remain suitable. For higher line pressures, rotary vane compressorsâ€”which do not suffer from lube oil contaminationâ€”should be considered, though they are typically more expensive than screws.&lt;/p&gt;
&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-69"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_phase_envelope1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 69:&lt;/strong&gt; Phase envelope of a hydrocarbon mixture compound. Sample is an upstream wellsite tank vapor with 2500 Btu/scf energy content. Simulated in BR&amp;E Promax, and plotted in Python.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (69)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Polygon

file = 'screw_compressor_article.xlsx'
dfs = [pd.read_excel(file, sheet_name=f'{n}% Vapor') for n in range(0, 101, 10)]

fig, ax = plt.subplots(figsize=(8, 4.5))

t_crit = 263.1727464076
p_crit = 1219.74099087

ax.plot(dfs[0]['Temperature'], dfs[0]['Pressure'], label='Bubble Point', color='green')
ax.plot(dfs[10]['Temperature'], dfs[10]['Pressure'], label='Dew Point', color='red')
ax.scatter(t_crit, p_crit, s=60, edgecolor='k', fc='white', zorder=3, label='Critical Point')

angles = [35, 45, 50, 57]  
for i, label, angle in zip([2, 4, 6, 8], ['20% Vapor', '40% Vapor', '60% Vapor', '80% Vapor'], angles):
    T = dfs[i]['Temperature'].values
    P = dfs[i]['Pressure'].values

    dT = np.diff(T)
    dP = np.diff(P)
    seg_lengths = np.sqrt(dT**2 + dP**2)
    cumulative = np.insert(np.cumsum(seg_lengths), 0, 0)
    total_len = cumulative[-1]

    half_len = total_len / 2
    idx = np.searchsorted(cumulative, half_len) - 1
    frac = (half_len - cumulative[idx]) / seg_lengths[idx]

    t_mid = T[idx] + frac * (T[idx + 1] - T[idx])
    p_mid = P[idx] + frac * (P[idx + 1] - P[idx])

    ax.plot(T, P, color='grey', ls='--', lw=1, alpha=0.99)
    ax.text(t_mid, p_mid, label, fontsize=9, rotation=angle,
            ha='center', va='center', color='grey',
            bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))


ax.set_ylim(0, 1600)
ax.set_xlim(-150, 400)
x_min, x_max = ax.get_xlim()
y_max = ax.get_ylim()[1]

# Supercritical region
ax.plot([t_crit, t_crit], [p_crit, y_max], color='black')
ax.plot([t_crit, x_max], [p_crit, p_crit], color='black')
ax.fill_between([t_crit, x_max], p_crit, y_max, color='black', alpha=0.05, zorder=0)
ax.text(289, 1370, 'Supercritical', fontsize=12, ha='left', color='black', alpha=0.5)

# Gas region
T = dfs[10]['Temperature']
P = dfs[10]['Pressure']
t_interp = np.interp(p_crit, P, T)
verts = [(t, p) for t, p in zip(T, P) if p &lt;= p_crit]
verts += [(t_interp, p_crit), (x_max, p_crit), (x_max, P.min()), (T.iloc[0], P.iloc[0])]
ax.add_patch(Polygon(verts, closed=True, color='red', alpha=0.05, zorder=0))
ax.text(330, 470, 'Gas', fontsize=12, ha='left', color='red', alpha=0.99)

# Liquid region
T = dfs[0]['Temperature']
P = dfs[0]['Pressure']
mask = T &lt;= t_crit
T_sel, P_sel = T[mask], P[mask]
verts = [(x_min, y_max), (x_min, P_sel.iloc[0])] + list(zip(T_sel, P_sel)) + [(T_sel.iloc[-1], y_max)]
ax.add_patch(Polygon(verts, closed=True, color='green', alpha=0.05, zorder=0))
ax.text(-80, 870, 'Liquid', fontsize=12, ha='left', color='green', alpha=0.99)

ax.text(150, 900, '2-Phase Region', fontsize=12, ha='left', color='black', alpha=0.99,
       bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))

ax.set_xlabel('Temperature [Â°F]')
ax.set_ylabel('Pressure [psig]')
ax.grid(True)
ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

handles, labels = ax.get_legend_handles_labels()
ax.legend(handles, labels, ncol=3)

ax.text(0.98, 0.05, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)

def setbold(txt): return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])
fig.suptitle(setbold('Phase Envelope') + ', 2500 Btu/scf Tank Vapor', verticalalignment='top',
             x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction',
            xytext=(1.02, yloc + 0.01), arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-70"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_phase_envelope2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 70:&lt;/strong&gt; Zoomed-in version of &lt;a class="internal-link" href="#fig-69"&gt;Figure 69&lt;/a&gt;. Simulated in BR&amp;E Promax, and plotted in Python. Oil-flooded screw compressors typically reach up to 350 psig. The plot shows dew point temperatures at various pressures. As pressure increases, dew point temperature rises. With a 230Â°F thermostat setpoint and a recommended 30Â°F buffer, condensation risk begins above 150 psig. 
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (70)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Polygon

file = 'screw_compressor_article.xlsx'
dfs = [pd.read_excel(file, sheet_name=f'{n}% Vapor') for n in range(0, 101, 10)]

fig, ax = plt.subplots(figsize=(8, 4.5))

t_crit = 263.1727464076
p_crit = 1219.74099087

ax.plot(dfs[0]['Temperature'], dfs[0]['Pressure'], label='Bubble Point', color='green')
ax.plot(dfs[10]['Temperature'], dfs[10]['Pressure'], label='Dew Point', color='red')

ax.set_ylim(0, 400)
ax.set_xlim(-150, 400)
x_min, x_max = ax.get_xlim()
y_min, y_max = ax.get_ylim()

angles = [60, 60, 60, 60]
for i, label, angle in zip([2, 4, 6, 8], ['20% Vapor', '40% Vapor', '60% Vapor', '80% Vapor'], angles):
    T = dfs[i]['Temperature'].values
    P = dfs[i]['Pressure'].values

    # Clip to plotting bounds
    mask = (T &gt;= x_min) &amp; (T &lt;= x_max) &amp; (P &gt;= y_min) &amp; (P &lt;= y_max)
    T_clipped = T[mask]
    P_clipped = P[mask]

    if len(T_clipped) &lt; 2:
        continue  # Skip if not enough points to compute a midpoint

    dT = np.diff(T_clipped)
    dP = np.diff(P_clipped)
    seg_lengths = np.sqrt(dT**2 + dP**2)
    cumulative = np.insert(np.cumsum(seg_lengths), 0, 0)
    total_len = cumulative[-1]

    half_len = total_len / 2
    idx = np.searchsorted(cumulative, half_len) - 1
    frac = (half_len - cumulative[idx]) / seg_lengths[idx]

    t_mid = T_clipped[idx] + frac * (T_clipped[idx + 1] - T_clipped[idx])
    p_mid = P_clipped[idx] + frac * (P_clipped[idx + 1] - P_clipped[idx])

    ax.plot(T, P, color='grey', ls='--', lw=1, alpha=0.99)
    ax.text(t_mid, p_mid, label, fontsize=9, rotation=angle,
            ha='center', va='center', color='grey',
            bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))

# Gas region
T = dfs[10]['Temperature']
P = dfs[10]['Pressure']
t_interp = np.interp(p_crit, P, T)
verts = [(t, p) for t, p in zip(T, P) if p &lt;= p_crit]
verts += [(t_interp, p_crit), (x_max, p_crit), (x_max, P.min()), (T.iloc[0], P.iloc[0])]
ax.add_patch(Polygon(verts, closed=True, color='red', alpha=0.05, zorder=0))
ax.text(330, 350, 'Gas', fontsize=12, ha='left', color='red', alpha=0.99)

# Liquid region
T = dfs[0]['Temperature']
P = dfs[0]['Pressure']
mask = T &lt;= t_crit
T_sel, P_sel = T[mask], P[mask]
verts = [(x_min, y_max), (x_min, P_sel.iloc[0])] + list(zip(T_sel, P_sel)) + [(T_sel.iloc[-1], y_max)]
ax.add_patch(Polygon(verts, closed=True, color='green', alpha=0.05, zorder=0))
ax.text(-130, 350, 'Liquid', fontsize=12, ha='left', color='green', alpha=0.99)

ax.text(20, 290, '2-Phase Region', fontsize=12, ha='left', color='black', alpha=0.99,
       bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))

ax.set_xlabel('Temperature [Â°F]')
ax.set_ylabel('Pressure [psig]')
ax.grid(True)
ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

ax.axvline(x=230, color='k', linestyle='-', linewidth=2, label='230Â°F Thermostat Setpoint')

handles, labels = ax.get_legend_handles_labels()
ax.legend(handles, labels, ncol=3, loc='lower right')


ax.scatter(181.8355342547, 100, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(195, 100, 'Dew T=182Â°F @ 100 psig', fontsize=10, ha='left', va='center', color='purple')

ax.scatter(202.3073722246, 150, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(217, 150, 'Dew T=202Â°F @ 150 psig', fontsize=10, ha='left', va='center', color='purple')

ax.scatter(217.8299782129, 200, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(230, 200, 'Dew T=218Â°F @ 200 psig', fontsize=10, ha='left', va='center', color='purple')

ax.scatter(230.2676365518, 250, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(247, 250, 'Dew T=230Â°F @ 250 psig', fontsize=10, ha='left', va='center', color='purple')

ax.scatter(240.5520855614, 300, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(257, 300, 'Dew T=241Â°F @ 300 psig', fontsize=10, ha='left', va='center', color='purple')

ax.text(0.98, 0.14, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)

def setbold(txt): return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])
fig.suptitle(setbold('Phase Envelope') + ', 2500 Btu/scf Tank Vapor (zoomed-in)', verticalalignment='top',
             x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction',
            xytext=(1.02, yloc + 0.01), arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="lube_oil_contamination_4"&gt;&lt;/div&gt;&lt;h3 id="10.4.-High-BTU-vapor-recovery-(above-2000-Btu)"&gt;10.4. High BTU vapor recovery (above 2000 Btu)&lt;a class="anchor-link" href="#10.4.-High-BTU-vapor-recovery-(above-2000-Btu)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;u&gt;Dew point temperature increases with high heating value (Btu/scf)&lt;/u&gt;. Lube oil contamination problems tend to be a challenge for high-BTU applications above 2000 Btu/scf. These are usually low pressure vapor recovery applications for either VRTs operating 1-5 psig, or tanks operating below 1 psig. The issue arises because higher-BTU gases exhibit higher dew point temperatures at a given pressure, increasing the risk of process gas condensation into liquid during compression.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-71"&gt;Figure 71&lt;/a&gt; shows phase envelopes for three representative gas samples: 2000, 2500, and 3000 Btu/scf. These values reflect realistic Btu values frequently observed for VRT and tank vapor recovery systems. As Btu content increases, the phase envelope shifts rightwardâ€”indicating higher dew point temperatures at equal pressures. This means that as samples get richer (high Btu), compressors must operate at higher temperatures to stay in the gas region.&lt;/p&gt;
&lt;p&gt;The three intersection points on the 200 psig isobar represent dew point temperatures for each sample:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;2000 Btu/scf â†’ 172Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;2500 Btu/scf â†’ 218Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;3000 Btu/scf â†’ 249Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The vertical line at 230Â°F reflects the typical thermostat valve setpoint for oil-flooded screw compressors, which maintains the normal operating temperature of the unit (see &lt;a class="internal-link" href="#7.4.-3-Way-thermostatic-valve"&gt;Section 7.4&lt;/a&gt;). At 200 psig, both the 2000 and 2500 Btu/scf gases remain below this threshold, though the 2500 Btu/scf sample approaches the limit with minimal safety margin of only 12Â° (you want at least 15-30Â°F margin). In contrast, the dew point temperature for the 3000 Btu/scf gas 249Â°F exceeds the 230Â°F setpoint, guaranteeing condensation and subsequent lube oil contamination.&lt;/p&gt;
&lt;p&gt;For this reason, screw compressors are not feasible for this 3000 Btu/scf gas at 200 psig discharge (potentially not feasible for 2500 Btu/scf gas as well due to minimal operating temperature margin, only 12Â°F). Alternatives like rotary vane compressorsâ€”which do not rely on lube oilâ€”should be considered. While more expensive, rotary vanes are better suited for high-BTU recovery. The 2000 Btu/scf gas, however, provides enough margin to safely operate within the gas region across the full pressure range of typical screw compressors (60â€“350 psig).&lt;/p&gt;
&lt;p&gt;It's important to note that phase envelopes can vary significantly between gas samples, even if they have similar Btu/scf values. For example, while the 2500 Btu/scf sample discussed here shows a 218Â°F dew point at 200 psig, another sample with the same energy content and discharge pressure could show a much lower dew pointâ€”such as 180Â°F. Iâ€™ve observed this firsthand in the field on multiple occasions. Very common.&lt;/p&gt;
&lt;p&gt;&lt;u&gt;&lt;strong&gt;In general, if your application is above 2000 Btu/scf, it is highly recommended to run a dew point check when considering an oil-flooded screw compressor installation. &lt;/strong&gt;&lt;/u&gt; You can send me a business inquiry if you would like me to run a dew point check.&lt;/p&gt;
&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-71"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_phase_envelope3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Figre 71:&lt;/strong&gt; Phase envelopes of various natural gas sample at different energy contents (Btu/scf). Simulated in BR&amp;E Promax, and plotted in Python. The Btu/scf samples have higher dew point temperatures at the same 200# discharge pressure. The 230Â°F vertical line represents the typical 230Â°F setpoint for a 3-way thermostat valve that determines the normal operating temperature of an oil-flooded screw compressor. The dew point must be below this 230Â°F limit to avoid condensation and subsequent lube oil contamination issues. The horizonal isobar line represents a fixed discharge pressure at 200 psig. 
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (71)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Polygon

file = 'screw_compressor_article.xlsx'
dfs = [pd.read_excel(file, sheet_name=f'{n}% Vapor') for n in range(0, 101, 10)]
dfs.append(pd.read_excel(file, sheet_name='2000 Btu Bubble'))
dfs.append(pd.read_excel(file, sheet_name='2000 Btu Dew'))
dfs.append(pd.read_excel(file, sheet_name='3000 Btu Bubble'))
dfs.append(pd.read_excel(file, sheet_name='3000 Btu Dew'))

fig, ax = plt.subplots(figsize=(8, 4.5))

t_crit1 = 263.1727464076 # 2500 Btu/scf
p_crit1 = 1219.74099087  # 2500 Btu/scf

t_crit2 = 182.7752706    # 2000 Btu/scf
p_crit2 = 1552.581899    # 2000 Btu/scf

t_crit3 = 312.9541125064 # 3000 Btu/scf
p_crit3 = 877.4475701297 # 3000 Btu/scf

ax.plot(dfs[0]['Temperature'], dfs[0]['Pressure'], label='Bubble Point', color='green')
ax.plot(dfs[10]['Temperature'], dfs[10]['Pressure'], label='Dew Point', color='red')
ax.scatter(t_crit1, p_crit1, s=60, edgecolor='k', fc='white', zorder=3, label='Critical Point')

ax.plot(dfs[11]['Temperature'], dfs[11]['Pressure'], color='green', ls='--')
ax.plot(dfs[12]['Temperature'], dfs[12]['Pressure'], color='red', ls='--')
ax.scatter(t_crit2, p_crit2, s=60, edgecolor='k', fc='white', zorder=3, ls='--')

ax.plot(dfs[13]['Temperature'], dfs[13]['Pressure'], color='green', ls='dotted')
ax.plot(dfs[14]['Temperature'], dfs[14]['Pressure'], color='red', ls='dotted')
ax.scatter(t_crit3, p_crit3, s=60, edgecolor='k', fc='white', zorder=3, ls='dotted')

ax.text(10, 1010, '2000 Btu/scf', fontsize=9, rotation=45, color='grey',
        bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))
ax.text(10, 630, '2500 Btu/scf', fontsize=9, rotation=35, color='grey',
        bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))
ax.text(10, 260, '3000 Btu/scf', fontsize=9, rotation=19, color='grey',
        bbox=dict(facecolor='white', edgecolor='none', pad=1.5, alpha=1))

ax.set_ylim(0, 1600)
ax.set_xlim(-150, 400)
x_min, x_max = ax.get_xlim()
y_max = ax.get_ylim()[1]

ax.set_xlabel('Temperature [Â°F]')
ax.set_ylabel('Pressure [psig]')
ax.grid(True)
ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

handles, labels = ax.get_legend_handles_labels()
ax.legend(handles, labels, ncol=1, loc='upper left')

ax.axvline(x=230, color='k', linestyle='-', linewidth=2, label='230Â°F Thermostat Setpoint')
ax.text(237, 1080, '230Â°F Setpoint', rotation=90, va='bottom', ha='left', fontsize=10, color='black')

ax.axhline(y=200, color='k', linestyle='-', linewidth=2, label='230Â°F Thermostat Setpoint')
ax.text(400, 220, '200# Discharge', va='bottom', ha='right', fontsize=10, color='black')

ax.text(0.02, 0.62, 'aegis4048.github.io', fontsize=10, ha='left', transform=ax.transAxes, color='grey', alpha=0.5)

ax.scatter(249.0971642597, 200, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(249.0971642597, 200 + 70, '249Â°F', fontsize=10, ha='left', va='center', color='purple')

ax.scatter(217.8299958163, 200, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(217.8299958163, 200 + 70, '218Â°F', fontsize=10, ha='center', va='center', color='purple')

ax.scatter(172.7152181272, 200, marker='D', s=40, fc='yellow', edgecolor='purple', zorder=10)
ax.text(172.7152181272, 200 + 70, '172Â°F', fontsize=10, ha='right', va='center', color='purple')

def setbold(txt): return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])
fig.suptitle(setbold('Phase Envelope') + ', 3000 vs. 2500 vs. 2000 Btu/scf samples', verticalalignment='top',
             x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction',
            xytext=(1.02, yloc + 0.01), arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="highlights red-theme" id="warning-impact-of-water"&gt;
&lt;div class="highlights-title red-theme"&gt;WARNING: Impact of Water on Phase Envelope&lt;/div&gt;
&lt;div class="highlights-content red-theme"&gt;
&lt;p&gt;Phase envelopes are intended for two-phase systems. In oil and gas systems, water introduces a third phase because it is immiscible with hydrocarbons. &lt;a class="internal-link" href="#fig-D"&gt;Figure D&lt;/a&gt; demonstrates distortion on the dew point curve near the critical point due to the presence of liquid phase water. Adding just 2% water distorts the envelope. This effect is common in low suction pressure vapor recovery systems, which often have 0â€“8% water content depending on temperature.&lt;/p&gt;
&lt;p&gt;The distortion becomes more severe at the compressor discharge side (i.e., at elevated pressures), because the amount of water a gas stream can hold in vapor phaseâ€”i.e., saturated waterâ€”decreases with increasing pressure. &lt;a class="internal-link" href="#table-6"&gt;Table 6&lt;/a&gt; illustrates this: at 60Â°F, the maximum water saturation mol fraction is 1.75% at 0 psig, but drops to 0.40% at 50 psig.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#fig-D"&gt;Figure D&lt;/a&gt;, the phase envelope was constructed assuming a constant 2% mol fraction water across all operating conditions (T, P). The following numbers are illustrative: at low pressure (e.g., 0 psig), a system might be able to hold 2â€“4% mol frac water in vapor phase without forming liquid. At high pressure (e.g., 500 psig), it might hold only about 0.2%. The excess waterâ€”e.g., 1.8% (2.0 âˆ’ 0.2)â€”would condense as a separate immiscible water phase, creating a third phase and distorting the envelope, which is valid only for two-phase mixtures. While increasing temperature allows more water to remain in the vapor phase, rising pressure dominates and suppresses this capacity.&lt;/p&gt;
&lt;p&gt;ProMax (the simulator used here) excludes water by default when constructing phase envelopes, which can lead to incorrect dew point readings if water is present. Fortunately, ProMax offers an alternate dew point calculation method that includes water. &lt;strong&gt;&lt;u&gt;Do not rely on phase envelopes for dew points when water is present&lt;/u&gt;&lt;/strong&gt;. Instead, use direct dew point calculation tools that account for water content (in ProMax, see &lt;i&gt;"Vapor Pressure, Dew, Bubble Point"&lt;/i&gt; under &lt;i&gt;"Add Analysis"&lt;/i&gt;). If using a different simulator, confirm with your software vendor how water is handled in dew point calculations.&lt;/p&gt;
&lt;div class="row full_screen_margin_85 mobile_responsive_plot_full_width" id="fig-D"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_phase_envelope4.png" style="border: 1px solid #ddd;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure D:&lt;/strong&gt; Phase envelope of the same 2000 Btu/scf gas sample shown in &lt;a class="internal-link" href="#fig-71"&gt;Figure 71&lt;/a&gt;, with 2% saturated water added to reflect field conditionsâ€”where 0â€“8% water content is typical in low-pressure vapor recovery. The envelope shows distortion near the critical point on the dew point curve. This occurs because a 2D phase envelope assumes a two-phase system, which breaks down when water is present, as water is immiscible with hydrocarbons.&lt;/p&gt;&lt;/div&gt;
&lt;div class="solution_panel closed" style="margin-top: 7px;"&gt;
&lt;div class="solution_title solution_warning"&gt;
&lt;p class="solution_title_string"&gt;Source Code For The Figure (D)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
                &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Polygon

file = 'screw_compressor_article.xlsx'
dfs = []
dfs.append(pd.read_excel(file, sheet_name='2% Water Bubble'))
dfs.append(pd.read_excel(file, sheet_name='2% Water Dew'))


fig, ax = plt.subplots(figsize=(8, 4.5))


t_crit1 = 180.4400727908 # 2500 Btu/scf
p_crit1 = 1563.074498018  # 2500 Btu/scf


ax.plot(dfs[0]['Temperature'], dfs[0]['Pressure'], label='Bubble Point', color='green')
ax.plot(dfs[1]['Temperature'], dfs[1]['Pressure'], label='Dew Point', color='red')
ax.scatter(t_crit1, p_crit1, s=60, edgecolor='k', fc='white', zorder=3, label='Critical Point')


ax.set_ylim(0, 2000)
ax.set_xlim(None, 400)


ax.set_xlabel('Temperature [Â°F]')
ax.set_ylabel('Pressure [psig]')
ax.grid(True)
ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)


handles, labels = ax.get_legend_handles_labels()
ax.legend(handles, labels, ncol=1, loc='upper left')


ax.text(0.02, 0.62, 'aegis4048.github.io', fontsize=10, ha='left', transform=ax.transAxes, color='grey', alpha=0.5)


ax.text(0.05, 0.37, '2% Mol frac water', fontsize=14, ha='left', transform=ax.transAxes, color='blue', fontweight='bold')
ax.text(0.05, 0.3, 'Presence of water fraction distorts 2D phase envelope', fontsize=10, ha='left', transform=ax.transAxes, color='black')
ax.text(0.05, 0.245, 'for the dew point curve near a critical point', fontsize=10, ha='left', transform=ax.transAxes, color='black')


def setbold(txt): return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])
fig.suptitle(setbold('Phase Envelope') + ', Impact of water fraction on phase envelope', verticalalignment='top',
             x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction',
            xytext=(1.02, yloc + 0.01), arrowprops=dict(arrowstyle="-", color='k', lw=0.7))


fig.tight_layout()
                &lt;/code&gt;
            &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="lube_oil_contamination_5"&gt;&lt;/div&gt;&lt;h3 id="10.5.-High-inlet-temperature-VRT/Tank-vapor-recovery-(above-110F)"&gt;10.5. High inlet temperature VRT/Tank vapor recovery (above 110F)&lt;a class="anchor-link" href="#10.5.-High-inlet-temperature-VRT/Tank-vapor-recovery-(above-110F)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Dew point temperature increases with saturated water content, which itself rises with gas temperature. Saturated water refers to vapor-phase waterâ€”not liquidâ€”but still present in the gas stream and capable of raising dew point.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#table-5"&gt;Table 5&lt;/a&gt;, dew point temperatures for the 2,000 Btu/scf gas sample (same one used in &lt;a class="internal-link" href="#fig-71"&gt;Figure 71&lt;/a&gt;) at 200 psig discharge pressure increase significantly with water content:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;0% water mol frac â†’ 172Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;5% water mol frac â†’ 196Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;7% water mol frac â†’ 212Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;10% water mol frac â†’ 231Â°F dew point T @200# discharge&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;With 10% water, the dew point hits 231Â°Fâ€”above the 230Â°F thermostat setpoint for oil-flooded screw compressors. This contradicts my previous statement that &lt;i&gt;"The 2,000 Btu/scf gas, however, provides enough margin to safely operate within the gas region across the full pressure range of typical screw compressors (60â€“350 psig)"&lt;/i&gt;, which only holds true under dry 0% water conditions. In fact, 10% water lowers the heating value to 1,805 Btu/scf (simulation not shown) because water has no heating value.&lt;/p&gt;
&lt;p&gt;This poses a critical risk: most lab gas analyses report dry samples unless water is specifically requested. Operators may unknowingly install compressors assuming 172Â°F dew point, only to face 231Â°F in reality. Once installed, condensation will cause lube oil contamination, adding &lt;span&gt;$&lt;/span&gt;1,000-&lt;span&gt;$&lt;/span&gt;3,000/month in refill costs on top of rental fees. &lt;u&gt;&lt;strong&gt;Always request water fractions to be included in lab gas analysis.&lt;/strong&gt;&lt;/u&gt;&lt;/p&gt;
&lt;div class="row" id="table-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_watersat2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 5:&lt;/strong&gt; Dew point temperature as a function of water mol fraction and discharge pressure, based on the same 2,000 Btu/scf gas stream used in &lt;a class="internal-link" href="#fig-71"&gt;Figure 71&lt;/a&gt;. Simulations were performed using BR&amp;E ProMax, assuming saturated vapor at 150Â°F tank conditions. High tank temperature is used specifically to allow maximum water saturation as possible. A saturator block is used to artificially increase water saturation from the original sample.&lt;/p&gt;
&lt;/div&gt;&lt;p&gt;Water content peaks in low-pressure, high-temperature systems, such as summer VRT/tank recovery or VRTs/tanks receiving gas from upstream heater treaters operating above 140Â°F. These tanks inherit the elevated temperatures of upstream heaters. &lt;a class="internal-link" href="#table-6"&gt;Table 6&lt;/a&gt; shows saturated water mol fractions across suction pressures from 0 to 50 psig, which reflect the full range of typical screw compressor suction limits.&lt;/p&gt;
&lt;p&gt;The 3 psig row is highlighted here as it reflects typical VRT operating pressure:&lt;/p&gt;
&lt;ul style="margin-bottom: 1em;"&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;70Â°F suction temperature â†’ 2.06% mol frac water @ 3# suction&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;90Â°F suction temperature â†’ 3.96% mol frac water @ 3# suction&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;110Â°F suction temperature â†’ 7.23% mol frac water @ 3# suction&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;130Â°F suction temperature â†’ 12.60% mol frac water @ 3# suction&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="mt-0"&gt;150Â°F suction temperature â†’ 21.10% mol frac water @ 3# suction&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Above 110Â°F, water saturation starts to rise sharply. At 7.23% water and 200 psig discharge, the corresponding dew pointâ€”referencing &lt;a class="internal-link" href="#table-5"&gt;Table 5&lt;/a&gt;â€”is approximately 212Â°F. Thatâ€™s just 18Â°F below the 230Â°F thermostat setpoint, cutting into the 15â€“30Â°F safety buffer required to avoid condensation. If the inlet temperature reaches 130Â°F, water content can rise to 12.6%, pushing the dew point to around 240Â°F at 200 psigâ€”completely ruling out the use of oil-flooded screw compressors, which cannot operate above 230Â°F.&lt;/p&gt;
&lt;p&gt;&lt;u&gt;&lt;strong&gt;In general, it is highly recommended to run dew point for VRT/tank vapor recovery, if inlet temperature exceeds 110FÂ°.&lt;/strong&gt;&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;Note that not all VRT/tank gas streams are fully saturated (heater and separator gas streams are fully saturated though), but assuming so provides a worst-case estimate. This may lead to conservative designs and over-elimination of screw compressorsâ€”but in absence of field-verified water data, it's a safer path. Of course, all this can be avoided if you can obtain lab analysis that reports water content.&lt;/p&gt;
&lt;div class="row" id="table-6"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/screw_watersat1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;
&lt;p class="image-description"&gt;&lt;strong&gt;Table 6:&lt;/strong&gt; Saturated water mol fraction as a function of suction temperature and suction pressure, based on the same 2,000 Btu/scf gas stream used in &lt;a class="internal-link" href="#fig-71"&gt;Figure 71&lt;/a&gt;. The water fraction sim results assume maximum 100% water saturation before dropping liquid.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="-"&gt; &lt;a class="anchor-link" href="#-"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="11.-Shutdown-triggers"&gt;11. Shutdown triggers&lt;a class="anchor-link" href="#11.-Shutdown-triggers"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Coming soon...&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="12.-Rental-vs.-Purchase"&gt;12. Rental vs. Purchase&lt;a class="anchor-link" href="#12.-Rental-vs.-Purchase"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Coming soon...&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="VRU"></category><category term="P&amp;ID"></category><category term="screw compressor"></category><category term="lube oil"></category><category term="gas engine"></category><category term="electric motor"></category><category term="recycle"></category><category term="blowcase"></category><category term="electric valve"></category><category term="pneumatic valve"></category><category term="solenoid valve"></category><category term="transmitters"></category><category term="suction control valve"></category><category term="level switch"></category><category term="level control valve"></category><category term="vapor recovery"></category><category term="casing drawdown"></category><category term="separator drawdown"></category><category term="ESP"></category><category term="SRP"></category><category term="tank"></category><category term="heater"></category><category term="separator"></category><category term="PID loop"></category><category term="pressure control"></category><category term="temperature control"></category><category term="shutdown"></category><category term="thermostat valve"></category><category term="gear ratio"></category></entry><entry><title>Predicting VRU Economics/Downsizing Timing For Declining Wells</title><link href="https://aegis4048.github.io/predicting_vru_economics_downsizing_timing_for_declining_wells" rel="alternate"></link><published>2025-02-25T00:00:00-08:00</published><updated>2025-02-25T00:00:00-08:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2025-02-25:/predicting_vru_economics_downsizing_timing_for_declining_wells</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="introduction"&gt;&lt;/div&gt;&lt;p&gt;Many producers, when sizing vapor recovery units (VRUs) or signing long-term contracts for them, tend to overlook an important factor: the inevitable decline of flash gas rates over time. Flash gas rates at heater treaters (HT), vapor recovery towers (VRT), and tanks follow a similar decline pattern to well production, yet it's a common misconception that these rates will remain steady or only decrease marginally.&lt;/p&gt;
&lt;p&gt;Working at a compressor company, Iâ€™ve seen firsthand how producers expect flash gas rates to hold relatively flat or marginally decline; the flash gas rates go down much quicker than they think. While the oil decline rate plays the largest role in this reduction, many still fail to account for it when planning for long-term operations. It's not necessarily that they don't know about the decline, but rather that they simply forget to think about it because VRUs are not their primary concern. Downsizing is often not done in a timely manner because itâ€™s overlooked, and as a result, VRUs quickly become oversized and uneconomical. It's also common to see a well experience more than a 50% drop in production within the first few months since initial production (IP), making this issue even more critical.&lt;/p&gt;
&lt;p&gt;&lt;hr/&gt;
&lt;strong&gt;KEY DELIVERABLES OF THIS ARTICLE:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlights mb-2 mt-2" id="key1"&gt;
&lt;div class="highlights-title"&gt;1. Process simulation results for predicting low-pressure flash gas rates at each monthly decline.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights mb-2 mt-2" id="key2"&gt;
&lt;div class="highlights-title"&gt;2. Evidence demonstrating that flash gas rate declines are primarily driven by oil decline, with sales gas decline having a minor impact in comparison.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights mb-2 mt-2" id="key3"&gt;
&lt;div class="highlights-title"&gt;3. An Excel sheet for calculating VRU economics alongside simulation results.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Clarifications-on-Terms"&gt;&lt;/div&gt;
&lt;div class="alert alert-info"&gt;
&lt;h4&gt;Notes: Clarifications on Terms&lt;/h4&gt;
&lt;p&gt;&lt;hr/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Low Pressure Vessels:&lt;/strong&gt; Refers to vessels such as low-pressure separators, heater treaters (HT), vapor recovery towers (VRT), or tanks. These vessels are downstream of the primary separator and operate at pressures lower than the sales line pressure.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sales (Produced) Gas:&lt;/strong&gt; High-pressure gas from the primary separator that operates around the sales line pressure, typically lean gas with a BTU content of 1050-1600 Btu/scf.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Flash Gas:&lt;/strong&gt; Gas volumes coming from low-pressure vessels operating below sales line pressure. These gases are richer, typically ranging from 1400-3000 Btu/scf, and lack sufficient pressure to enter the sales line. Flash gas can either be flared or recovered by VRUs that compress the gas to above sales line pressure. Flash gas is often distinguished from sales gas coming from the primary high pressure separator. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;VRU Flowrate:&lt;/strong&gt; For the purpose of this article, VRU flowrate is synonymous to flash gas.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;VRU:&lt;/strong&gt; Vapor Recovery Unit, VRU, is one application of a compressor. The compressor type can be rotary vane, rotary screw, or reciprocating.
&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#introduction"&gt;&lt;span class="toc_label"&gt;0.&lt;/span&gt;
            Introduction&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Clarifications-on-Terms"&gt;&lt;span class="toc_label"&gt;Notes:&lt;/span&gt;
                    Clarifications on Terms&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#1.-Industry-Practices-for-VRU-Sizing"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;
            Industry Practices for VRU Sizing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.-Predicting-flash-gas-flowrates-with-process-simulations"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;
            Predicting flash gas flowrates with process simulations&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#2.1.-Site-(operational)-setups"&gt;&lt;span class="toc_label"&gt;2.1.&lt;/span&gt;
                    Site (operational) setups&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.2.-Simulation-scenarios"&gt;&lt;span class="toc_label"&gt;2.2.&lt;/span&gt;
                    Simulation scenarios&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#2.3.-Simulation-results"&gt;&lt;span class="toc_label"&gt;2.3.&lt;/span&gt;
                    Simulation results&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#3.-VRU-Economics"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;
            VRU Economics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4.-Conclusion/Summary"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;
            Conclusion/Summary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="1.-Industry-Practices-for-VRU-Sizing"&gt;1. Industry Practices for VRU Sizing&lt;a class="anchor-link" href="#1.-Industry-Practices-for-VRU-Sizing"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;When a new facility is being built, engineers typically input the expected initial production (IP) flowrates into process simulation software to estimate the expected flash gas flowrates at low-pressure vessels. In the absence of process simulation software, many producers and vendors rely on ballpark estimates using flat scf/bbl numbers based on regional experience to predict flash gas volumes. While quick, this scf/bbl method doesn't account for the operating pressure of the vessels, leading to inaccuracies. These projected rates are then provided to VRU vendors, who size the equipment and provide quotes based on the high IP flowrates. Since these flowrates are often large, the VRU is sized to handle peak capacity, resulting in a costly investment. However, as the well declines, these high flowrates no longer match reality, and the oversized VRU quickly becomes uneconomical. Unfortunately, this issue is often realized too late, as VRUs are not always the primary concern for producers.&lt;/p&gt;
&lt;p&gt;Some keen producers who pay attention to VRUs predict monthly VRU flowrate declines using process simulations or by applying an oil decline curve to the IP flash gas rates. For example, if oil is expected to drop by 50% in the first 4 months and the IP flash gas rate is initially calculated to be 100 MCFD, the flash gas rate will decrease to around 50 MCFD in 4 months. The large and expensive compressor sized for peak initial flowrate will either be downsized or moved to a different location with similar production capacity to ensure its continued economic viability.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="2.-Predicting-flash-gas-flowrates-with-process-simulations"&gt;2. Predicting flash gas flowrates with process simulations&lt;a class="anchor-link" href="#2.-Predicting-flash-gas-flowrates-with-process-simulations"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The purpose of this section is to demonstrate that the declining flash gas rates at low-pressure vessels closely follow the oil decline curve and to highlight that gas decline has a minor impact compared to oil decline. BR&amp;E Promax software is used for the simulations.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.1.-Site-(operational)-setups"&gt;2.1. Site (operational) setups&lt;a class="anchor-link" href="#2.1.-Site-(operational)-setups"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A generic upstream facility structure is used for simulations. Reservoir fluid flows up the production tubing to the wellhead, then to the first-stage 2-phase separator, followed by a second-stage 2-phase separator operating 5 psi lower than the first stage, a heater treater, VRT, and finally to atmospheric storage tanks. The purpose of the second-stage separator is to separate the liquids entrained in the gas stream from the first-stage separator. &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; shows the facility model created in Promax for IP flowrates. This model serves as the base, accepting monthly declining oil, gas, and water rates (&lt;a class="internal-link" href="#2.2.-Simulation-scenarios"&gt;Section 2.2&lt;/a&gt;) as inputs, and returning declining rates of downstream flash gases as outputs (&lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;).&lt;/p&gt;
&lt;div class="row" id="fig-1"&gt; &lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_sim_setup.png"/&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 1:&lt;/strong&gt; Generic upstream facility modeling done in BR&amp;E Promax. IP rates of 9 MMSCFD (gas), 1800 BOPD (oil), and 3700 BWPD (water) are assumed. Numbers in the red boxes show produced and flash gas rates.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Assumptions&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Generic upstream oil and gas facility with wellhead.&lt;/li&gt;
&lt;li&gt;2 stage 2-phase separators operating at 140 and 135 psig.&lt;/li&gt;
&lt;li&gt;VRU discharge pressure set equal to 2nd separator pressure: 135 psig.&lt;/li&gt;
&lt;li&gt;Details of VRU components (ex: cooler, knockout scrubbers) are omitted for simplicity.&lt;/li&gt;
&lt;li&gt;Wellhead temperature: 120Â°F.&lt;/li&gt;
&lt;li&gt;3-phase heater treater operating at 50 psig, 140Â°F.&lt;/li&gt;
&lt;li&gt;Atmospheric oil tank operating at 0.4 psig, 120Â°F&lt;/li&gt;
&lt;li&gt;48Â° API oil.&lt;/li&gt;
&lt;li&gt;Sales gas energy content: around 1420 Btu/scf&lt;/li&gt;
&lt;li&gt;Facility Initial production rates: 9 MMSCFD (gas), 1800 BOPD (oil), and 3700 BWPD (water).&lt;/li&gt;
&lt;li&gt;Future declining production rates are predicted by &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;BR&amp;E Promax solver is used to solve for flowrates at wellhead. Solver adjusts inlet (wellhead) flowrates to match production rates at measurement points (sales gas meter/LACT/trucking/etc) leaving the system.&lt;/li&gt;
&lt;li&gt;Realistic oil and gas compositions used.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.2.-Simulation-scenarios"&gt;2.2. Simulation scenarios&lt;a class="anchor-link" href="#2.2.-Simulation-scenarios"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;To observe the impact of well decline on downstream flash gas flowrates, decline curve analysis (DCA) parameters are set up to simulate declining oil, gas, and water flowrates. Oil and water decline rates (with water having no impact on flash gas volumes) are fixed to isolate the impact of gas declines. Three scenarios are considered: 1) gas declining faster than oil, 2) gas declining slower than oil, and 3) gas declining at the same rate as oil. The DCA parameters shown in &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt; are used to create hypothetical declining well production rates, as shown in &lt;a class="internal-link" href="#fig-3"&gt;Figures 3, 4, and 5&lt;/a&gt;. These rates are then fed into the Promax model to predict flash gas rates at low-pressure vessels.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;hr/&gt;
&lt;div class="row" id="fig-2"&gt; &lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_DCA_scenarios.png"/&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; DCA parameters used to simulate declining well flowrates. Oil and water decline rates are fixed to observe the sole impact of produced gas decline on flash gas declines. Note that the b-factor is set the same for both oil and gas in all scenarios for ease of decline curve comparisons.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_scenario_A.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; Well decline curve prediction from the DCA parameters in scenario A of &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed" style="margin-top: -10px"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (3)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt


def general_decline(t, qi, Di, b):
    """
    Arps' decline equation for production decline modeling.

    Args:
        t (array-like): Time values.
        qi (float): Initial production rate.
        Di (float): Initial decline rate.
        b (float): Decline exponent.

    Returns:
        array-like: Production rate at time t.
    """
    return qi * (1 + b * Di * t) ** (-1 / b)

params = {
    'Oil': {'qi': 1800, 'Di': 0.3, 'b': .7},
    'Gas': {'qi': 9000, 'Di': 0.5, 'b': 0.7},
    'Water': {'qi': 3700, 'Di': 0.5, 'b': 1}
}

x = np.arange(0, 61)
fits = {
    'Oil': [],
    'Gas': [],
    'Water': [],
}
for key in params.keys():
    target_params = list(params[key].values())
    fits[key] = general_decline(x, *target_params)
df = pd.DataFrame.from_dict(fits)
df['Count'] = x

fig, ax = plt.subplots(figsize=(8, 4.5))

oc = 'green'
gc = 'red'
wc = 'blue'


ax.plot(df['Count'], df['Oil'], c=oc, label='Oil')
ax.plot(df['Count'], df['Gas'], c=gc, label='Gas')
ax.plot(df['Count'], df['Water'], c=wc, label='Water')


ax.set_xlabel('Months')
ax.set_ylabel('BOPD, BWPD, MCFD')


ax.grid(True)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

#ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.legend(ncol=6, loc='upper right')

ymax = 10000
ymin = 10
xmax = ax.get_xlim()[1]
xmin = 0 - xmax * 0.05
ax.set_yscale('log')
ax.set_ylim(20, None)
ax.set_xlim(xmin, None)

ax.text(0.05, 0.15, 'Gas:    ' + str(params['Gas']), fontsize=10, ha='left', transform=ax.transAxes, color=gc, alpha=0.7)
ax.text(0.05, 0.1,  'Oil:      ' + str(params['Oil']), fontsize=10, ha='left', transform=ax.transAxes, color=oc, alpha=0.7)
ax.text(0.05, 0.05, 'Water: ' + str(params['Water']), fontsize=10, ha='left', transform=ax.transAxes, color=wc, alpha=0.7)

arps_equation = r"$q_t = q_i \left( 1 + b D_i t \right)^{-\frac{1}{b}}$"
ax.text(
    0.05, 0.35, arps_equation, fontsize=11, ha='left', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)

ax.text(
    0.95, 0.8, 'Scenario: A', fontsize=17, ha='right', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

bold_txt = setbold('Scenario A: Gas Decline Faster Than Oil, ')
plain_txt = 'from hypothetical DCA parameters'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_scenario_B.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; Well decline curve prediction from the DCA parameters in scenario B of &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed" style="margin-top: -10px"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (4)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt


def general_decline(t, qi, Di, b):
    """
    Arps' decline equation for production decline modeling.

    Args:
        t (array-like): Time values.
        qi (float): Initial production rate.
        Di (float): Initial decline rate.
        b (float): Decline exponent.

    Returns:
        array-like: Production rate at time t.
    """
    return qi * (1 + b * Di * t) ** (-1 / b)

params = {
    'Oil': {'qi': 1800, 'Di': 0.3, 'b': .7},
    'Gas': {'qi': 9000, 'Di': 0.1, 'b': 0.7},
    'Water': {'qi': 3700, 'Di': 0.5, 'b': 1}
}

x = np.arange(0, 61)
fits = {
    'Oil': [],
    'Gas': [],
    'Water': [],
}
for key in params.keys():
    target_params = list(params[key].values())
    fits[key] = general_decline(x, *target_params)
df = pd.DataFrame.from_dict(fits)
df['Count'] = x

fig, ax = plt.subplots(figsize=(8, 4.5))

oc = 'green'
gc = 'red'
wc = 'blue'


ax.plot(df['Count'], df['Oil'], c=oc, label='Oil')
ax.plot(df['Count'], df['Gas'], c=gc, label='Gas')
ax.plot(df['Count'], df['Water'], c=wc, label='Water')


ax.set_xlabel('Months')
ax.set_ylabel('BOPD, BWPD, MCFD')


ax.grid(True)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

#ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.legend(ncol=6, loc='upper right')

ymax = 10000
ymin = 10
xmax = ax.get_xlim()[1]
xmin = 0 - xmax * 0.05
ax.set_yscale('log')
ax.set_ylim(20, None)
ax.set_xlim(xmin, None)

ax.text(0.05, 0.15, 'Gas:    ' + str(params['Gas']), fontsize=10, ha='left', transform=ax.transAxes, color=gc, alpha=0.7)
ax.text(0.05, 0.1,  'Oil:      ' + str(params['Oil']), fontsize=10, ha='left', transform=ax.transAxes, color=oc, alpha=0.7)
ax.text(0.05, 0.05, 'Water: ' + str(params['Water']), fontsize=10, ha='left', transform=ax.transAxes, color=wc, alpha=0.7)

arps_equation = r"$q_t = q_i \left( 1 + b D_i t \right)^{-\frac{1}{b}}$"
ax.text(
    0.05, 0.35, arps_equation, fontsize=11, ha='left', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)

ax.text(
    0.95, 0.8, 'Scenario: B', fontsize=17, ha='right', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

bold_txt = setbold('Scenario B: Gas Decline Slower Than Oil, ')
plain_txt = 'from hypothetical DCA parameters'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_scenario_C.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; Well decline curve prediction from the DCA parameters in scenario C of &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed" style="margin-top: -10px"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (5)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt


def general_decline(t, qi, Di, b):
    """
    Arps' decline equation for production decline modeling.

    Args:
        t (array-like): Time values.
        qi (float): Initial production rate.
        Di (float): Initial decline rate.
        b (float): Decline exponent.

    Returns:
        array-like: Production rate at time t.
    """
    return qi * (1 + b * Di * t) ** (-1 / b)

params = {
    'Oil': {'qi': 1800, 'Di': 0.3, 'b': .7},
    'Gas': {'qi': 9000, 'Di': 0.3, 'b': 0.7},
    'Water': {'qi': 3700, 'Di': 0.5, 'b': 1}
}

x = np.arange(0, 61)
fits = {
    'Oil': [],
    'Gas': [],
    'Water': [],
}
for key in params.keys():
    target_params = list(params[key].values())
    fits[key] = general_decline(x, *target_params)
df = pd.DataFrame.from_dict(fits)
df['Count'] = x

fig, ax = plt.subplots(figsize=(8, 4.5))

oc = 'green'
gc = 'red'
wc = 'blue'


ax.plot(df['Count'], df['Oil'], c=oc, label='Oil')
ax.plot(df['Count'], df['Gas'], c=gc, label='Gas')
ax.plot(df['Count'], df['Water'], c=wc, label='Water')


ax.set_xlabel('Months')
ax.set_ylabel('BOPD, BWPD, MCFD')


ax.grid(True)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

#ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.legend(ncol=6, loc='upper right')

ymax = 10000
ymin = 10
xmax = ax.get_xlim()[1]
xmin = 0 - xmax * 0.05
ax.set_yscale('log')
ax.set_ylim(20, None)
ax.set_xlim(xmin, None)

ax.text(0.05, 0.15, 'Gas:    ' + str(params['Gas']), fontsize=10, ha='left', transform=ax.transAxes, color=gc, alpha=0.7)
ax.text(0.05, 0.1,  'Oil:      ' + str(params['Oil']), fontsize=10, ha='left', transform=ax.transAxes, color=oc, alpha=0.7)
ax.text(0.05, 0.05, 'Water: ' + str(params['Water']), fontsize=10, ha='left', transform=ax.transAxes, color=wc, alpha=0.7)

arps_equation = r"$q_t = q_i \left( 1 + b D_i t \right)^{-\frac{1}{b}}$"
ax.text(
    0.05, 0.35, arps_equation, fontsize=11, ha='left', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)

ax.text(
    0.95, 0.8, 'Scenario: C', fontsize=17, ha='right', va='top', transform=ax.transAxes, color='black',
    bbox=dict(facecolor='white', edgecolor='black', boxstyle='round,pad=0.3')
)


def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

bold_txt = setbold('Scenario C: Gas Decline At The Same Rate As Oil, ')
plain_txt = 'from hypothetical DCA parameters'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.3.-Simulation-results"&gt;2.3. Simulation results&lt;a class="anchor-link" href="#2.3.-Simulation-results"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;BR&amp;E Promax is used to simulate flash gas declines at the heater and VRT. The base model shown in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; was fed with the three declining scenarios shown in &lt;a class="internal-link" href="#fig-3"&gt;Figures 3, 4, and 5&lt;/a&gt;. Declines up to 60 months are simulated. The simulaion results are shown in &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; and &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; below. Not all months are shown for brevity. You can download the full &lt;a class="ico xls" href="https://aegis4048.github.io/downloads/notebooks/sample_data/VRU_Declining_Economics-Sim_Results.xlsx" target="_blank"&gt;Simulation Results Data&lt;/a&gt; &lt;strong&gt;(VRU_Declining_Economics-Sim_Results.xlsx)&lt;/strong&gt; to review the complete Promax simulation results in Excel. Refer to Tabs "1a", "1b", and "1c". Note that the DCA parameters shown on the right are realistic parameters that can be observed in the field.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;Results Summary&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;Flash gas declines closely follow the oil decline, with gas declines having a relatively minor impact in comparison.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;The primary driver of downstream flash gas rate declines is the oil production rate. Do not predict flash gas decline from the produced (sales) gas decline.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;VRU flowrates can decrease by up to 86% compared to IP flowrates in 12 months, or more than 50% in just 3 months. They decline faster than expected, much like oil production.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-1"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_results_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 1:&lt;/strong&gt; Simulation results using the base model shown in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; and declining flowrate inputs shown in &lt;a class="internal-link" href="#fig-3"&gt;Figures 3, 4, and 5&lt;/a&gt;. The DCA parameters shown on the right represents declining scenarios used to simulate well decline. The percentages represent how much production declines compared to the initial production. Actual flowrate numbers are shown in &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; below. The first rows in each scenario are emtpy because there's no decline at month=0.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-2"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_results_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 2:&lt;/strong&gt; Simulation results using the base model shown in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; and declining flowrate inputs shown in &lt;a class="internal-link" href="#fig-3"&gt;Figures 3, 4, and 5&lt;/a&gt;. The DCA parameters shown on the right represents declining scenarios used to simulate well decline.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="3.-VRU-Economics"&gt;3. VRU Economics&lt;a class="anchor-link" href="#3.-VRU-Economics"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;VRU economics are calculated based on the simulation results from scenario C in &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; for both the heater treater and VRT. The calculation tables are provided below in &lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt; for the VRU installation on the VRT and &lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt; for the VRU installation on the heater. Note that the energy content of the flash gas from the VRT (2690 Btu/scf) is higher than that from the heater (1930 Btu/scf). This is because lighter hydrocarbons like methane and ethane flash off at higher pressures, while heavier hydrocarbons do not flash until the pressure is significantly lower. Recall from the site setups in &lt;a class="internal-link" href="#2.1.-Site-(operational)-setups"&gt;Section 2.1&lt;/a&gt; that the heater operates at 50 psig, while the VRT operates at 3 psig.&lt;/p&gt;
&lt;p&gt;You can download the full &lt;a class="ico xls" href="https://aegis4048.github.io/downloads/notebooks/sample_data/VRU_Declining_Economics-Sim_Results.xlsx" target="_blank"&gt;Simulation Results Data&lt;/a&gt; &lt;strong&gt;(VRU_Declining_Economics-Sim_Results.xlsx)&lt;/strong&gt; to review the economics calculation formulas in Excel. Refer to Tabs "Gas Economics Calcualtor -  HT", and "Gas Economics Calcualtor -  VRT".&lt;/p&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Assumptions&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Oklahoma 7% sales gas tax.&lt;/li&gt;
&lt;li&gt;$0.75/MCF gathering fee, typical for Oklahoma.&lt;/li&gt;
&lt;li&gt;Separate VRUs are used for heater and VRT each. This is because compressor inlet cannot take gases from two different pressures (the compressor company I work for has "Multi-stream" technology that enables dual inlet for two pressures, but it's not the focus of this article. Contact me if you are interested).&lt;/li&gt;
&lt;li&gt;Same VRU sizing for both VRT and heater (although the heater may require smaller sizing due to its lower flash gas flowrate and higher operating pressure. The higher the gas pressure at the compressor inlet, the greater the compressor's flowrate capacity).&lt;/li&gt;
&lt;li&gt;Generic $3,500 monthly VRU rental cost. This can vary depending on application and vendors.&lt;/li&gt;
&lt;li&gt;The operator is paid based on energy content (MMBtu) rather than volume. This may not be an option for some regions.&lt;/li&gt;
&lt;li&gt;30 days assumed for all months for calculation simplicity.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;Economics Summary&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;VRU installation on the heater becomes uneconomical after month 8.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;VRU installation on the VRT becomes uneconomical after month 15.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="no-margin"&gt;The heater application becomes uneconomical much faster than the VRT due to its lower flowrate (22% lower) and lower energy content (39% lower).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_results_VRT.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 3:&lt;/strong&gt; VRU economics calculation table for VRU installed on scenario C's VRT gas rates. The VRU becomes uneconomical after month 15.&lt;/p&gt;&lt;/div&gt;&lt;div class="row" id="table-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/VRU_economics_results_heater.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 4:&lt;/strong&gt; VRU economics calculation table for VRU installed on scenario C's heater gas rates. The VRU becomes uneconomical after month 8. VRU installation on heater becomes uneconomical much faster than VRT application due to heater gas having lower flowrate and lower energy content.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.-Conclusion/Summary"&gt;4. Conclusion/Summary&lt;a class="anchor-link" href="#4.-Conclusion/Summary"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; Flash gas rates for VRU applications may decline quickly, quicker than people think. They follow the oil decline curve.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; Many people in the industry tend to forget about the fact that VRU flowrates decline quickly. I've witnessed this first-hand working at a compressor company. Downsizing is often not done in a timely manner. This is because VRU is not their primary concern most of the time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; Process simulations are performed to show the impact of oil and gas decline on downstream flash gases from low pressure vessels. Simulation site setups are described in &lt;a class="internal-link" href="#2.1.-Site-(operational)-setups"&gt;Section 2.1&lt;/a&gt;. Well declining rates are simulated with 3 sets of DCA parameters described in &lt;a class="internal-link" href="#2.2.-Simulation-scenarios"&gt;Section 2.2&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; Simulation results in &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; indicate that flash gas rates at low pressure vessels (heater, VRT) follow oil decline. The primary sales gas has some impact, but negligible compared to oil decline's influence.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.&lt;/strong&gt; When forecasting VRU decline, use the decline rate of oil production. Do not predict off the primary produced gas decline.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.&lt;/strong&gt; Flash gas rates decline quickly after IP, just like oil. In &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;, flash gas off the heater became halved in 3 months, and quartered in 6 months.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7.&lt;/strong&gt; Due to fast decline after the initial production, VRU may become quickly uneconomical. In &lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt; that shows VRU economics for heater, VRU installation on heater flash gas became uneconomical 8 months after IP. Failure to downsize the unit in a timely manner, or being stuck with a long-term contract (unless the unit can be moved to another pad) can be detrimental to lease operating expense (LOE).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8.&lt;/strong&gt; Be careful when signing a long-term contract for VRUs. Be prepared to predict VRU economics and move the long-term contracted VRU to new locations on a timely manner to avoid economic loss.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;9.&lt;/strong&gt; Energy content coming from low pressure vessel (VRT @3#: 2690 Btu/scf) is higher than the one coming from higher pressure vessel (Heater @50#: 1930 Btu/scf). This is because lighter hydrocarbons like methane and ethane flash off at higher pressures, while heavier hydrocarbons do not flash until the pressure is significantly lower. The difference in energy content has a huge impact on VRU economics. Process simulations are required for accurate prediction of flash gas energy content at different vessels.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Contact me via email (aegis4048@gmail.com) or leave a comment below for any professional inquiries regarding compressor applications or process simulations.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="process engineering"></category><category term="ProMax"></category><category term="VRU"></category><category term="heaters"></category><category term="storage-tank"></category><category term="emissions"></category><category term="flash"></category><category term="DCA"></category><category term="decline-curve-analysis"></category><category term="economics"></category><category term="cashflow"></category><category term="simulations"></category><category term="downsizing"></category></entry><entry><title>Impact of Seasonal Changes on Storage Tank Emissions</title><link href="https://aegis4048.github.io/impact-of-seasonal-changes-on-storage-tank-emissions" rel="alternate"></link><published>2024-11-11T00:00:00-08:00</published><updated>2024-11-11T00:00:00-08:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2024-11-11:/impact-of-seasonal-changes-on-storage-tank-emissions</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="introduction"&gt;&lt;/div&gt;&lt;p&gt;Concerns over global warming have led to stricter regulations, pushing oil and gas operators to produce "green" oil. One of the primary sources of emissions in the industry is from crude oil storage tanks. When hydrocarbon liquids are transferred into storage tanks from upstream separators, the crude oil is not fully stabilized yet and still contains some dissolved volatile gases, which vaporize inside the tank. These vapors accumulate, increasing pressure within the tank, requiring a pressure relief system to prevent explosions. Such relief mechanism can be either vapor recovery systems with compressors to capture vapors and send them to pipelines for sales, which are more environmentally friendly, or venting to air.&lt;/p&gt;
&lt;p&gt;Vapor generation within a tank is influenced by two main factors: 1) the pressure drop from the upstream separator to the storage tank, and 2) the tankâ€™s operating temperature. This article focuses on the latterâ€”how the operating temperature of the tank, impacted by seasonal changes, affects emission volumes.&lt;/p&gt;
&lt;p&gt;Hereâ€™s a quick takeaway for skimmers: &lt;strong&gt;Emission volumes are 22% (Texas) to 56% (North Dakota) higher in summer than in winter&lt;/strong&gt; due to increased air temperatures. The summer-winter discrepancy is more pronounced in colder regions because of the greater seasonal temperature difference. See &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; below for a simulation summary across various scenarios. Note that this result is specific to the site simulation setups detailed &lt;a class="internal-link" href="#2.1.-Site-(operational)-setups"&gt;below&lt;/a&gt; and may need fine tuning for different facility setups. However, the concept should still be generally applicable for most upstream facilities.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-0"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_thumbnail.png"/&gt;&lt;/div&gt;
&lt;div class="col-12"&gt;
&lt;p class="image-description"&gt;
&lt;strong&gt;Figure 0:&lt;/strong&gt; Flash volume simulation at atmospheric storage tanks using BR&amp;E Promax. The setup assumes a liquid line from a heater operating at 30 psig and 120Â°F, dumping into an atmospheric tank at a rate of 3028 STBBL/D (34,600 lb/h) year-round. The plot shows increased emission rate at summer compared to winter due to increased ambient air temperature
        &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-1"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_bakken3.png"/&gt;&lt;/div&gt;
&lt;div class="col-12"&gt;
&lt;p class="image-description"&gt;
&lt;strong&gt;Figure 1:&lt;/strong&gt; Flash volume simulation at atmospheric storage tanks using BR&amp;E Promax. The setup assumes a liquid line from a heater operating at 30 psig and 120Â°F, dumping into an atmospheric tank at a rate of 3028 STBBL/D (34,600 lb/h) year-round. The red line represents vapor emission volumes from the tank. All conditions are held constant over 12 months, except for monthly ambient air temperature to isolate the effect of seasonal temperature on emissions. Williston, North Dakota, seasonal temperatures are used. Results show 47 MCFD emissions during winter and 73 MCFD during summerâ€”a 56% increase. Elevated summer temperatures lead to higher emission volumes inside tanks. Refer to &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; below for a process flow diagram of the site.
        &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (1)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

df = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/seasonal_impact_data.xlsx', sheet_name='Sim Format 1')
df = df[df['Location'] == 'Williston, ND']

months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
x = np.array([i for i in range(12)])

fig, ax = plt.subplots(figsize=(8, 4))

ax.plot(x, df['AVG Air T (F)'], color='purple', label='Avg Air T [Â°F]', marker='v', markersize=8, linestyle='-')
ax.plot(x, df['Tank T (F)'], color='darkslateblue', label='Tank T [Â°F]', marker='x', markersize=8, linestyle='-')
ax.plot(x, df['Gas (MCFD)'], color='red', label='Tank Vapor [MCFD]', marker='o', markersize=8, linestyle='-', markerfacecolor='white')
ax.axhline(y=120, ls='--', color='green', label='Inlet Liquid T [Â°F]')


ax.set_ylim(0, 140)
ax.set_xlim(-0.3, 11.3)
ax.set_xticks(range(len(months)))
ax.set_xticklabels(months)

ax.yaxis.set_minor_locator(ticker.AutoMinorLocator())

ax.grid(axis='y', which='minor', linestyle='--', alpha=0.2)  # Minor grid lines
ax.grid(axis='both', which='major', linestyle='-', alpha=0.3)  # Major grid lines

ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
ax.spines['right'].set_visible(False)
ax.spines.top.set_visible(False)


def annotate_arrows(data_y, num, tick_spacing, ymax, x_start=1, ox=0.2, fontsize=14, flip_y=False):
    '''
    data_y = y coordinate of the datapoint of interest
    num = index of the datapoint of interest
    tick_spacing = spacing between two major ticks
    ox = offset of x
    '''

    head_padding = ymax * 0.04                 # extra space between the datapoint of interest and arrowhead
    oy = ymax * 0.08                           # offset of y
    sx = x_start + (tick_spacing / 2) * num
    sy = data_y + head_padding

    if flip_y:
        oy = -ymax * 0.15
        sy = data_y - head_padding

    ax.arrow(sx + ox, sy + oy, -ox, -oy, head_width=0.1, head_length=ymax * 0.0333, fc='k', ec='k', lw=1)
    t1 = ax.text(sx + ox, sy + oy, str(int(data_y)) + ' MCFD', fontsize=fontsize, color='k', ha='center')
    t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=3, lw=1))

    xytext = (sx + ox, sy + oy)

    return xytext

ymax = 160
fs=9
yloc=110
lw=1
spacing = abs(ax.get_xticks()[1] - ax.get_xticks()[2])

y1 = df['Gas (MCFD)'].values[0]
y2 = df['Gas (MCFD)'].values[6]

_1 = -2
_2 = 10

textxy1 = annotate_arrows(y1, _1 + 0.1, spacing, ymax, fontsize=fs)
textxy2 = annotate_arrows(y2, _2 + 0.1, spacing, ymax, fontsize=fs)

ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')

diff_percentage = '+' + str(int((y2 - y1)/y1 * 100)) + '%'
t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=11, color='red', ha='center', fontweight='bold')
t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=lw))

ax.legend(fontsize=10, ncol=4, loc='upper left', framealpha=1)

ax.set_ylabel('Tmp. [Â°F], Vapor Rate [MCFD]', fontsize=11)


ax.text(0.4, 0.2, 'Upstream liquid line from heater', fontsize=10, ha='left', transform=ax.transAxes, color='k')
ax.text(0.4, 0.14, '@30 psig, 120Â°F', fontsize=10, ha='left', transform=ax.transAxes, color='k')
ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)
def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])


bold_txt = setbold('Impact of Seasonal Changes on Tank Emissions, ')
plain_txt = 'Bakken Shale'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#introduction"&gt;&lt;span class="toc_label"&gt;0.&lt;/span&gt;
            Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.-Theories:-Impact-of-temperature-changes-at-separator-vessels"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;
            Theories: Impact of temperature changes at separator vessels&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1.1.-Flash-volume-increase"&gt;&lt;span class="toc_label"&gt;1.1.&lt;/span&gt;
                Flash volume increase&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.2.-Heavier-separated-gas"&gt;&lt;span class="toc_label"&gt;1.2.&lt;/span&gt;
                Heavier separated gas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.3.-Higher-energy-content"&gt;&lt;span class="toc_label"&gt;1.3.&lt;/span&gt;
                Higher energy content&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.4.-Higher-dew-point-temperature"&gt;&lt;span class="toc_label"&gt;1.4.&lt;/span&gt;
                Higher dew point temperature&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.5.-More-stabilized-crude-oil-(RVP)"&gt;&lt;span class="toc_label"&gt;1.5.&lt;/span&gt;
                More stabilized crude oil (RVP)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#2.-Simulation-Setups"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;
            Simulation Setups&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#2.1.-Site-(operational)-setups"&gt;&lt;span class="toc_label"&gt;2.1.&lt;/span&gt;
                    Site (operational) setups&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Notes_Flash_breathing_working_and_loading_losses"&gt;&lt;span class="toc_label"&gt;Notes:&lt;/span&gt; Flash, Breathing, Working, and Loading Losses&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#2.2.-Software-(Promax)-&amp;-calculation-methods-(AP42-Chap-7)"&gt;&lt;span class="toc_label"&gt;2.2.&lt;/span&gt;
                    Software (Promax) &amp; calculation methods (AP42 Chap 7)&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#API_12F_Tanks"&gt;&lt;span class="toc_label"&gt;Notes:&lt;/span&gt; API 12F Tanks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#2.3.-Regional-ambient-air-temperatures-data"&gt;&lt;span class="toc_label"&gt;2.3.&lt;/span&gt;
                    Regional ambient air temperatures data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#3.-Simulation-results"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;
            Simulation results&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4.-Conclusion"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;
            Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="1.-Theories:-Impact-of-temperature-changes-at-separator-vessels"&gt;1. Theories: Impact of temperature changes at separator vessels&lt;a class="anchor-link" href="#1.-Theories:-Impact-of-temperature-changes-at-separator-vessels"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Altering the operating temperature of a separator vessel impacts the phase behavior of fluids within it. This section provides a theoretical explanation of the effects of increasing temperature from low to high.&lt;/p&gt;
&lt;div class="row" id="fig-2" style=""&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_vessel_illustrations1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; Simulation of flash behavior at low (100Â°F) vs high (150Â°F) temperatures, modeled with BR&amp;E Promax. At higher operating temperatures in a separator vessel, the separated gas volume increases, with higher specific gravity, greater energy content (Btu/scf), and the separated crude becomes more stable, as indicated by a lower Reid Vapor Pressure value.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="1.1.-Flash-volume-increase"&gt;1.1. Flash volume increase&lt;a class="anchor-link" href="#1.1.-Flash-volume-increase"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Increasing the operating temperature of a separator vessel (or storage tanks) raises the fluid mole fraction that escapes into the gas line. This phenomenon can be explained by phase envelopes, which show phase behavior changes under different pressures and temperatures.&lt;/p&gt;
&lt;p&gt;Assume &lt;a class="internal-link" href="#fig-3"&gt;Figure 3&lt;/a&gt; represents a phase envelope of a sample obtained from the liquid line of a separator operating at 200 psig. The blue circle on the figure sits on the 100% liquid bubble point curve, showing that by definition, the liquid is at its bubble point when it leaves any separator. This 200 psig liquid then flows into a heater operating at 50 psig and 120Â°F, causing the operating condition of the fluid to shift, represented by the red dashed circle. Flash gas is generated from the pressure drop from 200 psig to 50 psig, where 50% of the inlet liquid vaporizes and separates into the gas line of a heater.&lt;/p&gt;
&lt;p&gt;Now assume the operator increases the heater temperature from 120Â°F to 150Â°F. The operating condition of the fluid in the heater shifts horizontally, and now sits on the 5% liquid (95% vapor) curve, shown by the solid red circle. The vapor fraction rises from 50% to 95% due to the temperature increase.&lt;/p&gt;
&lt;p&gt;This demonstrates why raising temperature leads to higher flash volumes in any vessel, as the fluidâ€™s operating condition moves closer to the 100% vapor dew point curve, increasing the vapor mole fraction. The same phase behavior applies to atmospheric tanks. When tank temperatures rise in summer due to hotter ambient air, more vapors are generated, as the fluidâ€™s operating condition moves toward a higher vapor fraction curve.&lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-3" style=""&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_phase_envelope2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; "Fake" phase envelope of a sample from the outlet liquid line of a separator operating at 200 psig, 115Â°F. This envelope is an educational illustration and is not derived from an actual sample. The original condition of the sample is marked by the blue circle. The liquid from the 200# separator flows into a heater operating at 50#, 120Â°F, represented by the dashed red circle. When the heater temperature is raised from 120Â°F to 150Â°F, the condition shifts horizontally toward the 100% vapor dew point curve. The envelope shows the varying vapor fractions of the fluid inside the heater at different operating conditions.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="1.2.-Heavier-separated-gas"&gt;1.2. Heavier separated gas&lt;a class="anchor-link" href="#1.2.-Heavier-separated-gas"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Heavier hydrocarbon molecules vaporize more readily at elevated temperatures than at low temperatures, increasing the mole fraction of heavy-ends in the gas line and, consequently, the overall gas gravity. In &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;, the gas specific gravity (SG) rose from 0.816 to 0.956, and molecular weight (MW) from 23.6 to 27.7 lb/lbmol after a 50Â°F increase in vessel temperature.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="1.3.-Higher-energy-content"&gt;1.3. Higher energy content&lt;a class="anchor-link" href="#1.3.-Higher-energy-content"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Heavier hydrocarbon molecules have higher energy content (Btu/scf). In &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;, gas energy content increased from 1396 Btu/scf to 1567 Btu/scf after a 50Â°F increase in vessel temperature.&lt;/p&gt;
&lt;p&gt;Light-ends like methane have a MW of 16.04 lb/lbmol and an energy content of 1010 Btu/scf, whereas heavier-ends like n-pentane have an MW and energy content of 72.15 lb/lbmol and 4008.7 Btu/scf. In fact, gas molecular weight and energy content exhibit a nearly perfect linear correlation for paraffinic hydrocarbons (e.g., methane, ethane, butane, pentane, hexane), as shown in &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt;.&lt;/p&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/liquid_sg_ghv_gas_vs_mw.png" style="margin-bottom: 10px;"/&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; Scatter plot of known compounds upto n-hexadecane (C16H34) listed in the GPA 2145 table.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed" style="margin-top: -10px"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (4)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('https://aegis4048.github.io/downloads/notebooks/sample_data/GPA 2145-16_Compound_Properties_Table_English_Truncated_and_PNA_Identified.csv')

# Labeling for displaying texts
labels = ['methane', 'propane', 'n-butane', 'n-heptane', 'n-octane', 'n-decane', 'cyclohexane', 'cyclopentane', 'ethane',
'n-dodecane','n-tetradecane','n-hexadecane', 'methanol', 'ethanol', 'naphthalene', 'isobutylcyclopentane', 'hydrogen',
 'sulfur dioxide', 'hydrogen sulfide', 'toluene', 'benzene', 'm-xylene', 'pentylbenzene', 'hexylbenzene',
         'propylene', '1-butene'
         ]
df['Display Text'] = df['Compound'].isin(labels)

BTEX_idx = df[df['Is BTEX'] == True].index
aromatic_idx = df[df['Is Aromatic'] == True].index
non_HC_idx = df[df['Is Hydrocarbon'] == False].index
hydroxyl_idx = df[df['Is Hydroxyl'] == True].index
paraffinic_idx = df[df['Is Paraffinic'] == True].index
naphethenic_idx = df[df['Is Naphthenic'] == True].index
other_idx = df[df['Others'] == True].index
whole_idx = list(df.index)

x = df['Molar Mass [g/mol]']
y = df['Gross Heating Value Ideal Gas [Btu/ft^3]']

##################################### Plotting #######################################

fig, ax = plt.subplots(figsize=(8, 4.5))

alpha = 1
_1 = ax.scatter(x.loc[paraffinic_idx], y.loc[paraffinic_idx], s=50, edgecolor='k', alpha=alpha, label='Paraffinic')
_2 = ax.scatter(x.loc[naphethenic_idx], y.loc[naphethenic_idx], s=50, edgecolor='k', alpha=alpha, label='Naphthenic')
_3 = ax.scatter(x.loc[aromatic_idx], y.loc[aromatic_idx], s=50, edgecolor='k', alpha=alpha, label='Aromatic/BTEX')
_4 = ax.scatter(x.loc[hydroxyl_idx], y.loc[hydroxyl_idx], s=50, edgecolor='k', alpha=alpha, label='Hydroxylic')
_5 = ax.scatter(x.loc[non_HC_idx], y.loc[non_HC_idx], s=50, edgecolor='k', alpha=alpha, label='Non-HCs')
_6 = ax.scatter(x.loc[other_idx], y.loc[other_idx], s=50, edgecolor='k', alpha=alpha, label='Other-HCs')

c1 = _1.get_facecolor()[0]
c2 = _2.get_facecolor()[0]
c3 = _3.get_facecolor()[0]
c4 = _4.get_facecolor()[0]
c5 = _5.get_facecolor()[0]
c6 = _6.get_facecolor()[0]

ax.legend(fontsize=9, ncol=3)

texts = df['Compound']
for i, txt in enumerate(texts):
    if df['Display Text'].loc[i]:
        c = c5
        ha ='left'
        va = 'top'

        if df['Is Paraffinic'].loc[i]: 
            c = c1
            ha ='right'
            va = 'bottom'
        if df['Is Naphthenic'].loc[i]:
            c = c2
            ha ='right'
            va = 'bottom'
        if df['Is Aromatic'].loc[i]:
            c = c3
            va = 'top'
            ha = 'left'
        if df['Is Hydroxyl'].loc[i]:
            c = c4
            va = 'bottom'
            ha = 'left'
        if df['Others'].loc[i]:
            c = c6
            va = 'top'
            ha = 'left'

        if ha == 'left':
            icr = 3
        else:
            icr= -3

        ax.annotate(txt, (x.loc[i] + icr, y.iloc[i]), fontsize=10, c=c, ha=ha, va=va)

ax.minorticks_on()
ax.grid(axis='y', which='major', linestyle='--', color='grey', alpha=0.5)
#ax.grid(axis='y', which='minor', linestyle='--', color='grey', alpha=0.2)
#ax.grid(axis='x', which='minor', color='grey', linestyle='--', alpha=0.2)
ax.grid(axis='x', which='major', color='grey', linestyle='--', alpha=0.5)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

ax.set_xlabel('Molecular Weight', fontsize=11)
ax.set_ylabel('Gross Heating Value [Btu/scf]', fontsize=11)
ax.text(0.99, 0.1, 'aegis4048.github.io', fontsize=12, ha='right', va='center',
    transform=ax.transAxes, color='grey', alpha=0.5)

#ax.set_xlim(0, 1)
#ax.set_ylim(10000, 30000)

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

bold_txt = setbold('GHV_{gas} vs. MW')
plain_txt = ', for different compound groups'

fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=12, y=0.96)
yloc = 0.88
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))

ax.annotate('Data source: GPA 2145-16', xy=(-0.11, -.12), xycoords='axes fraction', fontsize=9)

fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="1.4.-Higher-dew-point-temperature"&gt;1.4. Higher dew point temperature&lt;a class="anchor-link" href="#1.4.-Higher-dew-point-temperature"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Gas dew point temperatures are critical for compressor applications. In high-pressure setups, like those using reciprocating compressors, accurate dew point calculations help define design parameters for compression chambers and ensure liquid knockout scrubbers are properly sized. For lower-pressure applications (below 300 psig), such as oil-flooded screw compressors, dew point control is essential to prevent liquid condensation during compression, which can lead to lube oil contamination.&lt;/p&gt;
&lt;p&gt;The specific gravity of a mixture affects its dew and bubble points. While the relationship isnâ€™t perfectly linear, heavier mixtures generally exhibit higher dew points at the same pressure than lighter ones. &lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt; illustrates this effect with vapor samples from the same tank in different seasons. The summer sample, with a higher specific gravity, has a dew point temperature of 222Â°F at 600 psig, while the lighter winter sample has a dew point of 184Â°Fâ€”a significant difference that could impact operations.&lt;/p&gt;
&lt;p&gt;In this 600 psig scenario, which exceeds the operating capacity of screw compressors, reciprocating compressors are required. For reciprocating compressors, scrubber sizing for liquid knockout is heavily influenced by dew point temperature. A scrubber sized based on a winter sample may be undersized for summer operations, risking liquid carryover during higher-temperature seasons.&lt;/p&gt;
&lt;div class="row" id="fig-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_phase_envelope_winter_vs_summer.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; Phase envelopes of tank vapor samples under summer and winter conditions. The dashed line represents the winter sample, while the solid line represents the summer sample. The winter sample has an energy content of 2021 Btu/scf, whereas the summer sample is richer at 2317 Btu/scf. Yellow diamonds mark the dew point temperatures at 600 psig, showing the summer sample's higher dew point of 222Â°F compared to the winter sampleâ€™s 184Â°F.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed" style="margin-top: -10px"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (5)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

df = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/seasonal_impact_data.xlsx', sheet_name='Bakken Envelope')
df.sort_values(by='Month')

fig, ax = plt.subplots(figsize=(8, 4.5))

months = sorted(list(set(df['Month'])))
lss = ['--', '-']
for ls, month in zip(lss, months):

    df_cur = df[df['Month'] == month]
    x_crit = df_cur['Critical T [Â°F]'].values[0]
    y_crit = df_cur['Critical P [psig]'].values[0]
    df_cur = df_cur[df_cur['Pressure [psig]'] - y_crit &lt; 20] # filter to remove outliers in sim results


    x_dew = df_cur[df_cur['Curve Type'] == 'Dew']['Temperature [Â°F]'].values
    y_dew = df_cur[df_cur['Curve Type'] == 'Dew']['Pressure [psig]'].values

    x_bubble = df_cur[df_cur['Curve Type'] == 'Bubble']['Temperature [Â°F]'].values
    y_bubble = df_cur[df_cur['Curve Type'] == 'Bubble']['Pressure [psig]'].values

    ax.plot(x_bubble, y_bubble, label=month + ': Bubble Point', ls=ls, color='red')
    ax.plot(x_dew, y_dew, label=month + ': Dew Point', ls=ls, color='blue')
    ax.scatter(x_crit, y_crit, s=60, edgecolor='k', fc='white', zorder=3, label='Critical Point')


ax.set_ylim(0, 1199)
ax.set_xlabel('Temperature [Â°F]')
ax.set_ylabel('Pressure [psig]')


ax.grid(True)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)

ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)

ax.scatter(184, 600, marker='D', s=60, fc='yellow', edgecolor='purple', zorder=10, label='Dew Point T @600 psig')
ax.scatter(222, 600, marker='D', s=60, fc='yellow', edgecolor='purple', zorder=10)

ax.text(184, 610, 'Dew T=184FÂ°', fontsize=10, ha='right', va='bottom', color='purple')
ax.text(107, 550, '(Winter)', fontsize=10, ha='left', va='bottom', color='purple')

ax.text(230, 610, 'Dew T=222FÂ°', fontsize=10, ha='left', va='bottom', color='purple')
ax.text(230, 550, '(Summer)', fontsize=10, ha='left', va='bottom', color='purple')

handles, labels = ax.get_legend_handles_labels()
handles.pop(-2)
labels.pop(-2)
ax.legend(handles[:], labels[:], ncol=2)


ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)
def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

bold_txt = setbold('Dew Point T. Difference In Summer vs. Winter')
plain_txt = ', for tank vapor line'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))


fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="1.5.-More-stabilized-crude-oil-(RVP)"&gt;1.5. More stabilized crude oil (RVP)&lt;a class="anchor-link" href="#1.5.-More-stabilized-crude-oil-(RVP)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Increased vapor generation rate inside a tank means that the stored liquid becomes more stabilized, with less volatiles because those dissolved volatiles in the crude escaped the system through a vent line (vented to air, captured, or flared). This can be seen in &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt;, in which the Reid Vapor Pressure (RVP) for higher temperature vessel (150F) is lower (RVP=8.84 psi) than the lower T vessel (100F, RVP=9.74 psi). Lower RVP means more stable crude. &lt;a href="https://www.epa.gov/gasoline-standards/gasoline-reid-vapor-pressure" target="_blank"&gt;EPA Gasoline Reid Vapor Pressure&lt;/a&gt; requires storage gasoline to have RVP value lower than 9 to 7.8 psi to reduce emissions of volatile organic compounds (VOCs).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="2.-Simulation-Setups"&gt;2. Simulation Setups&lt;a class="anchor-link" href="#2.-Simulation-Setups"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;This section details the simulation setups and assumptions used to investigate the impact of seasonal temperature changes on storage tank emissions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.1.-Site-(operational)-setups"&gt;2.1. Site (operational) setups&lt;a class="anchor-link" href="#2.1.-Site-(operational)-setups"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;A generic upstream facility structure is used for simulations. Reservoir fluid flows up the production tubing to the wellhead, then to a 2-phase separator, a heater treater, and finally to atmospheric storage tanks. &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; shows facility modeling done with Promax.&lt;/p&gt;
&lt;div class="row" id="fig-6"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_sim_screenshot1.png"/&gt;&lt;/div&gt;
&lt;div class="col-12"&gt;
&lt;p class="image-description"&gt;
&lt;strong&gt;Figure 6:&lt;/strong&gt; Generic upstream facility modeling done in BR&amp;E Promax. This simulation assumes an ambient air temperature of 15.5Â°F in Williston, ND, in December (see &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; below for regional seasonal temperature data). All operating parameters are held constant except timeframe (month) and ambient air temperature across various locations to observe the impact of seasonal temperature changes on tank emission volumes.
        &lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="ordered-list"&gt;
&lt;h2&gt;Assumptions&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Generic upstream oil and gas facility with wellhead.&lt;/li&gt;
&lt;li&gt;2-phase separator operating at 150 psig.&lt;/li&gt;
&lt;li&gt;VRU discharge pressure set equal to separator pressure: 150 psig.&lt;/li&gt;
&lt;li&gt;Wellhead temperature: 140Â°F.&lt;/li&gt;
&lt;li&gt;3-phase heater treater operating at 30 psig, 120Â°F.&lt;/li&gt;
&lt;li&gt;Atmospheric oil tank operating at 0.6 psig, with temperature affected by ambient air and incoming fluid temperature.&lt;/li&gt;
&lt;li&gt;47Â° API oil.&lt;/li&gt;
&lt;li&gt;Sales gas energy content: 1203 Btu/scf, specific gravity: 0.69.&lt;/li&gt;
&lt;li&gt;Facility production rates: 15 MMSCFD (gas), 3000 BOPD (oil), and 2000 BWPD (water).&lt;/li&gt;
&lt;li&gt;Four standard 750 BBL &lt;a class="internal-link" href="#API_12F_Tanks"&gt;API 12F oil storage tanks&lt;/a&gt; (15.5' x 24', tan-colored).&lt;/li&gt;
&lt;li&gt;Water tank sizing omitted for simplicity; water tank temperature assumed to match oil tank temperature.&lt;/li&gt;
&lt;li&gt;Timeframe (month) and location are the only variables that change for each simulation run.&lt;/li&gt;
&lt;li&gt;Compression boost for heater treater gas to salesline is omitted for simplicity, as it doesn't affect downstream tank conditions. Common handling strategies for HT gas include: 1) Installing an additional booster compressor dedicated to HT gas, 2) Routing the gas line to tank inlets so HT gas can be handled by the tank VRU along with tank vapors, and 3) Using a 3-way control system to enable a single compressor to handle both the tank gas line (0.6 psig) and HT gas line (30 psig).
        &lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div id="Notes_Flash_breathing_working_and_loading_losses"&gt;&lt;/div&gt;&lt;div class="alert alert-info"&gt;
&lt;h4&gt;Notes: Flash, Breathing, Working, and Loading Losses&lt;/h4&gt;
&lt;p&gt;AP-42 calculation methods (see &lt;a class="internal-link" href="#2.2.-Software-(Promax)-&amp;-calculation-methods-(AP42-Chap-7)"&gt;below&lt;/a&gt;) for atmospheric storage tanks provide calculation methods for four vaporization types: flash, working, breathing, and loading.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;Flash:&lt;/strong&gt; Rapid release of dissolved gases from liquid due to a pressure drop from high to low pressure&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Working:&lt;/strong&gt; Occurs during tank filling operations. As the liquid level rises, vapor space pressure increases, expelling vapors through the roof vent. Although not included in AP-42 methods, working loss can also involve vaporization from turbulence and vapor/liquid contact due to splash loading. Downcomers (submerged loading) help reduce splash losses.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Breathing:&lt;/strong&gt; Vaporization caused by day (hot) vs night (cold) temperature differences.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Loading:&lt;/strong&gt; Results from inefficiencies during truck-loading operations.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.2.-Software-(Promax)-&amp;-calculation-methods-(AP42-Chap-7)"&gt;2.2. Software (Promax) &amp; calculation methods (AP42 Chap 7)&lt;a class="anchor-link" href="#2.2.-Software-(Promax)-&amp;-calculation-methods-(AP42-Chap-7)"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href="https://www.bre.com/ProMax-Main.aspx" target="_blank"&gt;BR&amp;E Promax&lt;/a&gt; is a process simulation software widely used in the oil and gas industry. One of it's features include implementation storage tank emission calculation methods outlined in &lt;a href="https://www.epa.gov/air-emissions-factors-and-quantification/ap-42-fifth-edition-volume-i-chapter-7-liquid-storage-0" target="_blank"&gt;AP42 Chapter 7: Liquid Storage Tanks&lt;/a&gt;. The chapter explains emission mechanism for fixed and floating roof tanks for various tank dimensions, structures, paint color, location, month of year, etc. The site simulation setup for this article assumes upstream facility, which traditionally use standardized API 12F tanks. Some of the key inputs used in AP42 can be taken from standard API 12F tank specs such as dimensions (15.5' x 24' for 750 BBL capacity), design pressure (16 oz vent and 1 oz vacuum safety), and tank geometry (fixed roof vertical cylinder).&lt;/p&gt;
&lt;div id="API_12F_Tanks"&gt;&lt;/div&gt;
&lt;div class="alert alert-info"&gt;
&lt;h4&gt;Notes: API 12F Tanks&lt;/h4&gt;
&lt;p&gt;API 12F tanks are standardized storage tanks primarily used in upstream oil and gas production facilities to store crude oil and produced water at atmospheric pressure. Designed and built to the specifications set by the American Petroleum Institute (API), these tanks are widely used due to their reliability, uniformity, and compatibility with industry standards.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;Standardized Design:&lt;/strong&gt; API 12F tanks follow strict specifications for dimensions, shape, thickness, reinforcement details, and materials (typically carbon steel) with welded construction to ensure durability and strength. Standardized capacities range from 90 to 1,000 BBL.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Design Pressure:&lt;/strong&gt; Tanks are equipped with a pressure relief mechanism to keep operating pressure below 16 oz (1 psig) to prevent explosion, and a vacuum relief mechanism to stay above 1 oz, preventing implosion.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Compliance and Safety:&lt;/strong&gt; For facilities near commercial or residential areas, API guidelines recommend an additional pressure/vacuum relief mechanism for emergency scenarios, set to release at 24 oz for overpressure and 1.5 oz for vacuum. Most remote wellsites in the field do not require this extra installation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vent Line Connection Sizing:&lt;/strong&gt; The guidelines specify minimum pipe diameters for roof vent lines, especially critical when not venting directly to air. This sizing ensures minimal pressure drop between the vent line and emission control system (e.g., VRU or flare). Typical tank operating pressure is below 0.6 psig, allowing only a small margin to ensure vapor flow to the VRU or flare. Even minor pressure drops from friction can restrict flow, leading to overpressurization and triggering relief valves on the tanks, which results in unwanted emissions. Pipe diameters must be large enough to prevent any pressure drop due to friction that could block flow.&lt;/p&gt;
&lt;div class="row" id="fig-A"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_API12F1.png" style="border: 1px solid #ddd;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure A:&lt;/strong&gt; API 12F tank standard specifications at different nominal capacities, screenshot from API 12F 13th edition, 2019.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="2.3.-Regional-ambient-air-temperatures-data"&gt;2.3. Regional ambient air temperatures data&lt;a class="anchor-link" href="#2.3.-Regional-ambient-air-temperatures-data"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;i&gt;AP-42 Chapter 7 Table 7.1-7. Meteorological Data for Selected U.S. Locations&lt;/i&gt; provides average monthly temperatures for all 12 months across various locations. Key oil and gas regions' average temperatures are summarized in &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;. Notably, the Bakken region shows the largest seasonal temperature difference between summer and winter, leading to the highest seasonal variation in emission volumes (56%), compared to regions like Eagle Ford (22%), as summarized in &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;.&lt;/p&gt;
&lt;div class="row" id="table-1"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_locations.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 1:&lt;/strong&gt; Seasonal temperature data for key U.S. locations, selected from &lt;i&gt;AP-42 Chapter 7 Table 7.1-7&lt;/i&gt;, matched to corresponding basins. Rows are sorted by locations with the highest to lowest temperature differences between January and July.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="3.-Simulation-results"&gt;3. Simulation results&lt;a class="anchor-link" href="#3.-Simulation-results"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; shows storage tank simulation results for quantifying the seasonal contrast for summer vs winter for tank vapor rates and other properties. The colder the region, such as in Bakken, Powder River, and Marcellus, the greater was the differences due to greater seosonal T difference than warmer regions in Texas. Bakken region showed the greated seasonal tank flash rate increase of 56% in summer compared to winter, while Eagleford showed the lowest increase of 22%.&lt;/p&gt;
&lt;p&gt;My simulation result table can be downloaded from here: &lt;a class="ico xls" href="https://aegis4048.github.io/downloads/notebooks/sample_data/seasonal_impact_data.xlsx" target="_blank"&gt;Storage Tank Emissions Simulation Data&lt;/a&gt; &lt;strong&gt;(seasonal_impact_data.xlsx)&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row" id="table-2"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/seasonal_summary_table1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 2:&lt;/strong&gt; Storage tank simulation result table contrasting seasonal differences for summer vs. winter for tank vapor line with assumed setups detailed in &lt;a class="internal-link" href="#2.-Simulation-Setups"&gt;Simulation Setups&lt;/a&gt; above. Air T (Â°F) is regional seasonal ambient air temperature taken from &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;. Tank T (Â°F) is the operating temperature of the storage tank, affected by upstream heater treater temperature (120F in this setup), and ambient air temperature. RVP (psia), Reid Vapor Pressure,  is taken from &lt;i&gt;"Prod. Oil"&lt;/i&gt; stream in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;. Dew T (Â°F) taken from &lt;i&gt;"VRU Discharge"&lt;/i&gt; stream in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;. This is the dew point temperature of the compressed gas at 150 psig. The rest of the properties, Gas (MCFD), SG, and GHV (Btu/scf) are taken from stream &lt;i&gt;"Total Vapor"&lt;/i&gt;. The biggest seasonal contrast occur between Jan vs. July due to the greatest air T difference. &lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="highlights red-theme" id="warning-regional"&gt;
&lt;div class="highlights-title red-theme"&gt;WARNING: Important Assumption Regarding "Regional" Data&lt;/div&gt;
&lt;div class="highlights-content red-theme"&gt;
        Itâ€™s important to clarify that the simulation results for each region are based solely on variations in temperature across different time frames and locations. All other parametersâ€”such as reservoir-specific compositions, pressure, and temperature conditions of vesselsâ€”are held constant. In other words, when referencing results for "Bakken Shale," this does not imply that sample compositional data is obtained from Bakken wells. Only the regional temperature data is adjusted. The purpose of keeping all other variables static, aside from temperature, is to isolate and observe the sole impact of seasonal temperature variations across regions. This provides a clearer idea of how much more flash volume can be expected in summer compared to winter at different key regions.
    &lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights red-theme" id="warning-dewpoint"&gt;
&lt;div class="highlights-title red-theme"&gt;WARNING: Dew Point Sensitivity To Compositions&lt;/div&gt;
&lt;div class="highlights-content red-theme"&gt;
                Dew point temperature (which is part of phase envelope) is highly sensitive to composition. The fact that it showed maximum dew point T difference of only 12F (168F vs 190.7F at winter vs. summer) for Bakken in the sim result table should not be assumed to be similar for other similar applications too. For example in &lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt;, dew point temperature difference at 150 psig is approximately 40 degrees for winter vs summer. However, other parameters are relatively less senstive to composition variations, and can be referenced for general applications.
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.-Conclusion"&gt;4. Conclusion&lt;a class="anchor-link" href="#4.-Conclusion"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; When an upstream liquid line flows into a separator vessel, it enters as 100% liquid, with separation occurring inside the vessel. Changing the vesselâ€™s operating temperature or pressure shifts the fluidâ€™s position on a phase envelope, altering its vapor fraction inside a vessel (see &lt;a class="internal-link" href="#1.1.-Flash-volume-increase"&gt;1.1. Flash volume increase&lt;/a&gt; and &lt;a class="internal-link" href="#fig-3"&gt;Figure 3&lt;/a&gt; above), and compositions of the separated outlet lines. This same phenomenon applies to atmospheric applications like storage tanks.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; Increasing a vesselâ€™s temperature raises flash volume, producing a heavier (richer) separated gas with higher energy content and a higher dew point temperature at a given pressure. For the oil line, higher temperature lowers the crude oilâ€™s Reid Vapor Pressure (RVP), meaning the crude is more stabilized as more volatiles have separated into the gas line.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; Emission handling systems (flares or vapor recovery units) should be sized to manage increased gas volume and gravity during summer compared to winter.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; Summer flash volume increases ranged from 20â€“30% in Texas regions (Eagle Ford, Delaware, Midland) and from 50â€“60% in North Dakota (Bakken), compared to winter.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.&lt;/strong&gt; Colder regions have larger temperature differences between summer and winter, resulting in a greater seasonal variation in tank vapor emissions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.&lt;/strong&gt; See &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; for a summary of simulation results showing the impact of monthly air temperature on tank vapor emissions by region.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="process engineering"></category><category term="ProMax"></category><category term="measurements"></category><category term="gas-sample"></category><category term="separators"></category><category term="VRU"></category><category term="heaters"></category><category term="storage-tank"></category><category term="emissions"></category><category term="API12F"></category><category term="RVP"></category><category term="dew-point"></category><category term="flash"></category><category term="basins"></category></entry><entry><title>Hâ‚‚S Levels: Why High-Pressure Samples Don't Tell the Full Story</title><link href="https://aegis4048.github.io/h2s-levels-why-high-pressure-samples-dont-tell-the-full-story" rel="alternate"></link><published>2024-05-06T00:00:00-07:00</published><updated>2024-05-06T00:00:00-07:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2024-05-06:/h2s-levels-why-high-pressure-samples-dont-tell-the-full-story</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Hâ‚‚S (hydrogen sulfide) measurement is crucial in process engineering for several reasons: 1) regulatory compliance, 2) personnel safety, and 3) maintaining equipment integrity. Different safety and environmental standards protect both people and the environment, and costs associated with equipment damage vary based on the ppm levels of Hâ‚‚S, making accurate measurements essential.&lt;/p&gt;
&lt;p&gt;One problem I've noticed in the energy industry is the assumption that gas sample lab analysis from one pressure point remains representative at other pressure points. For example, operators often take the 20 ppm Hâ‚‚S value measured from the primary pressurized separator (typically operating between 100â€“1000 psig), and re-use it for vapor recovery applications, which usually operate at near 0 psig. At this lower pressure, the Hâ‚‚S ppm can rise to 63 ppm due to phase behavior changes. A model simulating such a facility is shown in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; below.&lt;/p&gt;
&lt;div class="row" id="fig-1"&gt; &lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_study.png"/&gt;&lt;/div&gt; &lt;div class="col-12"&gt; &lt;p class="image-description"&gt; &lt;strong&gt;Figure 1:&lt;/strong&gt; A model of a typical upstream oil and gas facility, simulated with BR&amp;E Promax. The heater treater is omitted for simplicity (as it doesn't significantly affect downstream conditions, with temperatures high enough to break emulsions in this case). The middle-left vessel (HP Sep #500) is the primary separator, operating at 500 psig and 141Â°F. The flash gas line (HP Sep. Gas) from this separator reports 20 ppm Hâ‚‚S, which is higher than the typical 16 ppm midstream requirement and may require sour gas treatment. However, the gas line (Oil Tank Flash) from the oil tank, operating at 0.4 psig, shows 63.4 ppm Hâ‚‚S. The Hâ‚‚S value triples at the lower pressure, demonstrating that reusing the 20 ppm value measured at the HP separator for VRU or combustor applications would be inaccurate. This issue is even more severe for the water tank vapor (Water Tank Flash), which reports 302 ppm Hâ‚‚S. In Oklahoma, according to subsection (c) Storage tank provision of &lt;a href="https://casetext.com/regulation/oklahoma-administrative-code/title-165-corporation-commission/chapter-10-oil-and-gas-conservation/subchapter-3-drilling-developing-and-producing/part-3-completions/section-16510-3-16-operation-in-hydrogen-sulfide-areas" target="_blank"&gt;Okla. Admin. Code Â§ 165:10-3-16&lt;/a&gt;, this requires installation of a warning sign, wind indicator, and fencing. Additionally a flare, vapor recovery, or Hâ‚‚S stripping system is required.&lt;/p&gt; &lt;/div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#1.-Why-does-Hâ‚‚S-ppm-levels-matter?"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;
            Why does Hâ‚‚S ppm levels matter?&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1.1-Regulatory-Compliance"&gt;&lt;span class="toc_label"&gt;1.1.&lt;/span&gt;
                Regulatory Compliance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.2-Equipment-Damage"&gt;&lt;span class="toc_label"&gt;1.2.&lt;/span&gt;
                Equipment Damage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#1.3-Personnel-Safety"&gt;&lt;span class="toc_label"&gt;1.3.&lt;/span&gt;
                Personnel Safety&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#2.-Hâ‚‚S-measurement-practices-in-upstream-Oil-and-Gas"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;
            Hâ‚‚S measurement practices in upstream Oil and Gas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3.-Understanding-phase-behavior-of-Hâ‚‚S-and-hydrocarbons"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;
            Understanding phase behavior of Hâ‚‚S and hydrocarbons&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#3.1.-Flash-Point-Pressure"&gt;&lt;span class="toc_label"&gt;3.1.&lt;/span&gt;
                Flash Point Pressure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3.2.-Hâ‚‚S-ppm-level-changes-in-vapor-vs-liquid"&gt;&lt;span class="toc_label"&gt;3.2.&lt;/span&gt;
                Hâ‚‚S ppm level changes in vapor vs liquid&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#4.-Hâ‚‚S-sim-results-at-various-production-rates"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;
            Hâ‚‚S sim results at various production rates&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#4.1.-Simulation-screenshots"&gt;&lt;span class="toc_label"&gt;4.1.&lt;/span&gt;
                Simulation screenshots&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#4.2.-Simulation-results-summary"&gt;&lt;span class="toc_label"&gt;4.2.&lt;/span&gt;
                Simulation results summary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#5.-Conclusion"&gt;&lt;span class="toc_label"&gt;5.&lt;/span&gt;
            Conclusion&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="1.-Why-does-Hâ‚‚S-ppm-levels-matter?"&gt;1. Why does Hâ‚‚S ppm levels matter?&lt;a class="anchor-link" href="#1.-Why-does-Hâ‚‚S-ppm-levels-matter?"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="1.1-Regulatory-Compliance"&gt;1.1 Regulatory Compliance&lt;a class="anchor-link" href="#1.1-Regulatory-Compliance"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In Oklahoma, &lt;a href="https://casetext.com/regulation/oklahoma-administrative-code/title-165-corporation-commission/chapter-10-oil-and-gas-conservation/subchapter-3-drilling-developing-and-producing/part-3-completions/section-16510-3-15-venting-and-flaring" target="_blank"&gt;Okla. Admin. Code Â§ 165:10-3-15 - Venting and Flaring&lt;/a&gt; provides guidelines on when operators can vent or flare gas, depending on the situation. However, in all cases, if Hâ‚‚S levels exceed 100 ppm, venting is prohibited, and the gas must be flared. It cannot be vented through storage tank thief hatches. This rule applies to scenarios such as initial flowback periods for newly completed or recompleted wells, exploration wells, etc.â€”all must be flared. The only exception is when the gas to be flared is not of pipeline quality, and this exception can only last for up to 45 days.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://casetext.com/regulation/oklahoma-administrative-code/title-165-corporation-commission/chapter-10-oil-and-gas-conservation/subchapter-3-drilling-developing-and-producing/part-3-completions/section-16510-3-16-operation-in-hydrogen-sulfide-areas" target="_blank"&gt;Okla. Admin. Code Â§ 165:10-3-16 - Operation in hydrogen sulfide areas&lt;/a&gt; applies to upstream facilities with Hâ‚‚S levels above 20 ppm. &lt;strong&gt;Notably, Subsection (c) requires measuring Hâ‚‚S concentration 1-ft above the open thief hatches of atmospheric storage tanks. If levels exceed 100 ppm, warning signs, wind indicators, and fencing are required. Additionally, a flare, vapor recovery, or Hâ‚‚S stripping system must be installed.&lt;/strong&gt; In &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; above, the Hâ‚‚S ppm level is triple of the 100 ppm threshold, and will most likely need to be monitored. Also, subsection (h) mandates that flaring equipment in public areas be made from hydrogen sulfide stress cracking (HSSC) resistant materials. Material selection guidelines for HSSC resistance can be found in NACE MR-0175/ISO 15156.&lt;/p&gt;
&lt;p&gt;In Texas, the Texas Railroad Commission (RRC) considers oil and gas operations with Hâ‚‚S levels exceeding 100 ppm as sour gas operations and imposes safety and regulatory requirements (&lt;a href="https://texreg.sos.state.tx.us/public/readtac$ext.TacPage?sl=R&amp;app=9&amp;p_dir=&amp;p_rloc=&amp;p_tloc=&amp;p_ploc=&amp;pg=1&amp;p_tac=&amp;ti=16&amp;pt=1&amp;ch=3&amp;rl=36" target="_blank"&gt;RRC Statewide Rule 36&lt;/a&gt;). On the other hand, the Texas Commission on Environmental Quality (TCEQ) defines sour gas as above 24 ppm and imposes additional restrictions beyond those required by the RRC. The RRC focuses on the safety and operational integrity of oil and gas facilities, while the TCEQ emphasizes air emissions control.&lt;/p&gt;
&lt;h3 id="1.2-Equipment-Damage"&gt;1.2 Equipment Damage&lt;a class="anchor-link" href="#1.2-Equipment-Damage"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Natural gas pipeline companies require Hâ‚‚S levels to be below 4â€“16 ppm (depending on the operator) and impose fees if these levels are exceeded to protect their pipelines from damage. Similarly, compressor rental companies also set limits on Hâ‚‚S concentrations to prevent corrosion and protect their equipment. These thresholds are typically outlined in pipeline or equipment rental specifications.&lt;/p&gt;
&lt;h3 id="1.3-Personnel-Safety"&gt;1.3 Personnel Safety&lt;a class="anchor-link" href="#1.3-Personnel-Safety"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Occupational Safety and Health Administration (OSHA) sets three standards based on ppm limits (note that OSHA ppm measurements are based on air sampling in the work environment, not inside a process stream):&lt;/p&gt;
&lt;div class="highlights" id="key1"&gt;
&lt;div class="highlights-title"&gt;1. Permissible Exposure Limit (PEL)&lt;/div&gt;
&lt;div class="highlights-content"&gt;A ceiling of 20 ppm during an 8-hour work shift. Workers should not be exposed to concentrations exceeding this level at any time during the shift, except under specific short-term conditions.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key2"&gt;
&lt;div class="highlights-title"&gt;2. Short-Term Exposure Limit (STEL)&lt;/div&gt;
&lt;div class="highlights-content"&gt;Workers can be exposed to up to 50 ppm of Hâ‚‚S, but only for a maximum of 10 minutes. Beyond this, protective measures are mandatory to prevent prolonged exposure.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key3"&gt;
&lt;div class="highlights-title"&gt;3. Immediately Dangerous to Life or Health (IDLH)&lt;/div&gt;
&lt;div class="highlights-content"&gt;Exposure above 100 ppm is immediately dangerous to life and health. Immediate evacuation or the use of self-contained breathing apparatus (SCBA) is required for worker safety.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="2.-Hâ‚‚S-measurement-practices-in-upstream-Oil-and-Gas"&gt;2. Hâ‚‚S measurement practices in upstream Oil and Gas&lt;a class="anchor-link" href="#2.-Hâ‚‚S-measurement-practices-in-upstream-Oil-and-Gas"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Hâ‚‚S measurements in upstream production facilities are rarely done using air detection devices. Typically, a gas sample is taken from a primary pressurized separator, usually operating between 100~1000 psig. The main purpose of this sample is to ensure compliance with gas pipeline specifications (such as water content, Hâ‚‚S, COâ‚‚, and Nâ‚‚ levels) and to determine the fair price of the gas, with higher energy content leading to higher value. The sample is sent to a lab for compositional analysis.&lt;/p&gt;
&lt;p&gt;If the operation engineer has concerns about Hâ‚‚S levels, based on offset well experiences, they may request the lab to specifically report Hâ‚‚S concentrations at an extra cost. Some labs include this for free, while others charge for it. Often, Hâ‚‚S is not reported in the standard lab analysis. When asked to provide Hâ‚‚S ppm numbers, sometime they get a nearby offset well sample analysis that includes Hâ‚‚S numbers, and report it instead of the actual well they are working on and call it good (which can be, of course, largely inaccurate). &lt;a class="internal-link" href="#fig-2"&gt;Figure 2&lt;/a&gt; shows a real lab sample where Hâ‚‚S composition is reported, and &lt;a class="internal-link" href="#fig-3"&gt;Figure 3&lt;/a&gt; illustrates a case where Hâ‚‚S was omitted.&lt;/p&gt;
&lt;p&gt;When Hâ‚‚S ppm levels are reported by the lab, operators use this information to comply with regulations and meet pipeline and equipment rental specifications. However, issues arise when Hâ‚‚S ppm values obtained from a pressurized vessel (operating between 100â€“1000 psig) are applied to atmospheric applications like storage tanks or vapor recovery systems. Hâ‚‚S concentrations at near-atmospheric pressures can be significantly higher than those measured in high-pressure vessels.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; above illustrates this issue, showing a case where 20 ppm Hâ‚‚S is reported at a 500 psig separator gas line, but 63.4 ppm and 302 ppm are reported in the gas lines of oil and water storage tanks at 0.4 psig, respectively.&lt;/p&gt;
&lt;p&gt;I witnessed a similar issue at a gas compressor rental company. Operators provided Hâ‚‚S measurements of 10â€“15 ppm, but our rental equipment suffered damage consistent with much higher concentrations. Initially, our account managers suspected the customer was either lying or mistaken. However, as this problem occurred repeatedly, they asked me to model the facility and simulate Hâ‚‚S at the compressor inlet. &lt;strong&gt;&lt;u&gt;My analysis revealed that Hâ‚‚S ppm values measured at high-pressure separators are not representative of atmospheric applications.&lt;/u&gt;&lt;/strong&gt; As pressure decreases, lighter hydrocarbons like methane and ethane preferentially flash off more quickly than Hâ‚‚S, leading to an increase in Hâ‚‚S concentration as the lighter components escape first. Detailed explanation of this phenomenon is provided &lt;a class="internal-link" href="#3.-Understanding-phase-behavior-of-Hâ‚‚S-and-hydrocarbons"&gt;below&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width mb-2" id="fig-2"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_lab_sample_reported.png" style="outline: 1px solid black;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; Gas sample analysis from VRU pulling flash gas from upstream atmospheric oil tanks, reporting 0.01% mol frac = 100 ppm Hâ‚‚S. This is right on the 100 ppm Hâ‚‚S limit set by &lt;a href="https://casetext.com/regulation/oklahoma-administrative-code/title-165-corporation-commission/chapter-10-oil-and-gas-conservation/subchapter-3-drilling-developing-and-producing/part-3-completions/section-16510-3-15-venting-and-flaring" target="_blank"&gt;Okla. Admin. Code Â§ 165:10-3-15&lt;/a&gt; and cannot be vented.&lt;/p&gt;&lt;/div&gt;&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width mb-1" id="fig-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_lab_sample_omitted.png" style="outline: 1px solid black;"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; Example of a gas analysis from a primary HP separator operating at 959 psia. Although the lab offers an option for Hâ‚‚S analysis, it was not measured as the customer opted not to pay extra for it.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="3.-Understanding-phase-behavior-of-Hâ‚‚S-and-hydrocarbons"&gt;3. Understanding phase behavior of Hâ‚‚S and hydrocarbons&lt;a class="anchor-link" href="#3.-Understanding-phase-behavior-of-Hâ‚‚S-and-hydrocarbons"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;During oil and gas phase separation and distillation processes, compounds with smaller molecular weights, known as "light-ends," tend to flash off into the gas phase before the "heavy-ends." The exact classification of light-ends versus heavy-ends can vary depending on the context, but for this article, I will use these terms to compare the relative weights of compounds.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt; below shows a simulation of reservoir fluid being sequentially separated into gas and liquid phases through 3-stage separation (500 psig, 200 psig, and 0 psig). The fraction of methane, the lightest compound, in each vesselâ€™s gas line sequentially decreases as the 2-phase fluid moves through lower-pressure vessels. Light-ends flash off into the gas phase much faster than heavy-ends. By the time the process stream pressure reaches atmospheric level (0 psig), a significant portion of the light-ends has already escaped in the previous separators, leaving behind a higher concentration of heavy-ends. This also increases the concentration of Hâ‚‚S because Hâ‚‚S is heavier than methane and other light-ends have already flashed off.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; shows the compositional changes in percentage between the 500# flash gas and the 0# flash gas. It also highlights that not only does the absolute fraction of heavy-ends increase relative to light-ends, but the magnitude of such increase is more pronounced for heavier compounds. For example, ethane (MW = 30.07) fraction increased by 376.4%, whereas pentane (MW = 72.15) saw a dramatic 1932% increase.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_phase_behavior_pressure_decrease.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; Simulation of an upstream facility where reservoir fluid is separated through a series of 3 vessels, modeled using BR&amp;E Promax. The reservoir fluid composition reflects real well fluid properties. Initially, the fluid enters the primary separator at 500 psig, with methane making up 87.3% of the gas line, decreasing to 70.3% and 25.5% in downstream separators as pressure drops. Meanwhile, the concentration of heavier compounds increases due to the reduction of methane. Note the rising energy content (Btu/ftÂ³) and Hâ‚‚S ppm levels as separator pressures decrease. The Hâ‚‚S level increased from 18.8 ppm at the high-pressure separator to 129 ppm (a 6.86-fold increase) in the atmospheric tank. This demonstrates that Hâ‚‚S ppm levels measured at high pressure cannot be directly applied to low-pressure applications.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row full_screen_margin_100 mobile_responsive_plot_full_width" id="table-1"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_change_compare.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 1:&lt;/strong&gt; Comparison of compositional changes at the 500 psig separator vs. the 0 psig atmospheric tank gas line. Methane fraction decreased as it flashed off first, increasing the concentration of heavier-ends. The magnitude of the change correlates with each compound's molecular weight, with heavier compounds showing greater changes.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="3.1.-Flash-Point-Pressure"&gt;3.1. Flash Point Pressure&lt;a class="anchor-link" href="#3.1.-Flash-Point-Pressure"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Why do light-ends flash to gas before heavy-ends? Itâ€™s because the flash point pressure of light-ends is higher than that of heavy-ends. &lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt; shows the flash point curves of six pure compounds. If the pressure and temperature are to the left of a compoundâ€™s curve, it exists as a liquid; if to the right, it exists as vapor.&lt;/p&gt;
&lt;p&gt;Take ethane (orange) as an example. At 80Â°F, the flash point pressure of ethane is 618 psig. At the same temperature, propane's (red) flash point pressure is 131 psig, which is lower than ethane. Now, assume these two compounds are in the same system (but exist as independent pure compounds) at the same temperature of 80Â°F (illustrated by the vertical dashed grey line), and the pressure changes from 620 psig to 300 psig and then 100 psig. At 620 psig, both compounds are in liquid form. As pressure drops to 300 psig, ethane will vaporize while propane remains liquid. When pressure drops further to 100 psig, pressure is below both compounds' flash curves, and both will vaporize. This occurs because ethane's flash point curve is higher than propane's, meaning ethane vaporizes first.&lt;/p&gt;
&lt;p&gt;Looking at the figure, youâ€™ll notice that the lighter the compound, the higher its curve, illustrating why lighter compounds preferentially flash to vapor more easily than heavy-ends. &lt;strong&gt;&lt;u&gt;The flash point curve of Hâ‚‚S is located below (or to the right of) methane and ethane, which explains why methane and ethane vaporize more easily than Hâ‚‚S.&lt;/u&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_flash_point_pressure.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; Flash point curves of pure compounds, calculated and generated using Python. Circular markers indicate critical points. Note that the critical point of Hâ‚‚S extends far outside the plot at 1285 psig and 213Â°F (not shown), showing a different pattern from the hydrocarbon compounds. This is because Hâ‚‚S does not contain a carbon atom and, therefore, does not fully follow the characteristics of hydrocarbons. The grey dashed line shows the 80Â°F isothermal temperature. Downward-triangular markers indicate flash point pressures of various compounds along the 80Â°F line. However, the 80Â°F isothermal is located far right of methane's flash curve, meaning it does not intersect. This indicates that methane will always be in a vapor phase, regardless of the pressure, until the pressure is below its critical pressure, after which methane enters a critical phase.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (5)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import CoolProp.CoolProp as CP
import matplotlib.pyplot as plt
import numpy as np


def Pa_to_psi(pa):
    return pa / 6894.745

def K_to_F(K):
    return (K - 273.15) * 1.8 + 32

components = ['Methane', 'Ethane', 'H2S', 'Propane', 'Butane', 'Pentane']
comp_dict = {comp: {} for comp in components}
for comp in components:
    HEOS = CP.AbstractState('HEOS', comp)
    HEOS.set_mole_fractions([1])
    HEOS.build_phase_envelope("dummy")
    PE = HEOS.get_phase_envelope_data()
    comp_dict[comp]['Ts'] = np.array(sorted([K_to_F(item) for item in PE.T]))
    comp_dict[comp]['Ps'] = np.array(sorted([Pa_to_psi(item) - 14.7 for item in PE.p]))

T_unit = 'F'
P_unit ='psig'

fig, ax = plt.subplots(figsize=(8, 4.5))

for comp in components: 
    ax.plot(comp_dict[comp]['Ts'], comp_dict[comp]['Ps'], label=comp)
    ax.scatter(comp_dict[comp]['Ts'][-1], comp_dict[comp]['Ps'][-1], s=40, edgecolor='k', fc='white', zorder=3)

ax.scatter(comp_dict[comp]['Ts'][-1], comp_dict[comp]['Ps'][-1], s=40, edgecolor='k', fc='white', zorder=3)
ax.axvline(x=80, color='grey', linestyle='--')

ax.set_xlabel('Temperature [%s]' % T_unit)
ax.set_ylabel('Pressure [%s]' % P_unit)

ax.grid(True)
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)
ax.set_xlim(-300, 400)
ax.set_ylim(0, 799)

ax.legend(ncol=3, fontsize=9, loc='upper left')

x_increment = 5
ax.text(73, 799, '80Â°F Line', fontsize=10, ha='center', va='top', color='grey', rotation=90)

ax.text(80 + x_increment, 617.64, '618# (Ethane)', ha='left', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][1])
ax.text(80 + x_increment, 291.29, '291# (Hydrogen Sulfide)', ha='left', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][2])
ax.text(80 + x_increment, 130.64, '131# (Propane)', ha='left', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][3])
ax.text(80 + x_increment, 22.52, '23# (n-Butane)', ha='left', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][4])

ax.scatter(80, 617.64, marker='v', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][1])
ax.scatter(80, 291.29, marker='v', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][2])
ax.scatter(80, 130.64, marker='v', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][3])
ax.scatter(80, 22.52, marker='v', c=plt.rcParams['axes.prop_cycle'].by_key()['color'][4])

ax.minorticks_on()
ax.grid(axis='both', which='minor', color='grey', linestyle='--', alpha=0.2)

ax.text(0.98, 0.08, 'aegis4048.github.io', fontsize=10, ha='right', transform=ax.transAxes, color='grey', alpha=0.5)
def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])


bold_txt = setbold('Pure Compound Flash Points at 80Â°F, ')
plain_txt = 'Phase Diagram'
fig.suptitle(bold_txt + plain_txt, verticalalignment='top', x=0, horizontalalignment='left', fontsize=11)
yloc = 0.9
ax.annotate('', xy=(0.01, yloc + 0.01), xycoords='figure fraction', xytext=(1.02, yloc + 0.01),
            arrowprops=dict(arrowstyle="-", color='k', lw=0.7))


fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="mixture_behavior"&gt;&lt;/div&gt;
&lt;div class="alert alert-info"&gt;
&lt;h4&gt;Notes: Mixture behavior&lt;/h4&gt;
&lt;p&gt;Assume a 50:50 mol fraction binary mixture of ethane and propane at 80Â°F. In this case, they are mixed, not existing as independent pure compounds. The mixture starts at 1000 psig as 100% liquid. Now, drop the pressure to 300 psig, which is below ethane's flash point but above propane's. Would the mixture be a 2-phase fluid? Yes. However, does this mean the vapor fraction is composed of 100% ethane? No.&lt;/p&gt;
&lt;p&gt;When compounds are mixed and the pressure drops, it doesn't work as if all of the lighter compounds vaporize first, and then, once the pressure drops further, the heavier ones vaporize later. It doesn't work like that. Both compounds vaporize together, but the lighter compound preferentially vaporizes more than the heavier one. &lt;/p&gt;
&lt;p&gt;Running such a simulation in BR&amp;E Promax, one can find that at 80Â°F and 300 psig, the mixture forms a 2-phase fluid with 35.4% vapor and 64.6% liquid. The vapor phase (35.4%) is composed of 64.8% ethane and 35.2% propane. The liquid phase (64.6%) is composed of 41.9% ethane and 58.1% propane. This distinction needs to be clarified.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="3.2.-Hâ‚‚S-ppm-level-changes-in-vapor-vs-liquid"&gt;3.2. Hâ‚‚S ppm level changes in vapor vs liquid&lt;a class="anchor-link" href="#3.2.-Hâ‚‚S-ppm-level-changes-in-vapor-vs-liquid"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Hâ‚‚S ppm levels are typically more problematic in the gas phase because concentrations are higher there than in the liquid phase. As shown in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;, Hâ‚‚S levels in the gas phase are consistently higher than in the liquid phase. Additionally, as the reservoir fluid undergoes separation at decreasing pressures, Hâ‚‚S ppm in the gas phase rises, while it drops in the liquid phase. This trend holds in both 2-phase and 3-phase separations. Why does this happen?&lt;/p&gt;
&lt;p&gt;The answer lies in Hâ‚‚S's high flash point pressure of 291 psig. At 80Â°F and 0 psig, Hâ‚‚S primarily exists in the gas phase. In simpler terms, Hâ‚‚S prefers the gas phase, although not as much as lighter gases like methane or ethane.&lt;/p&gt;
&lt;p&gt;In contrast, heavier compounds like pentane, hexane, and heptane, which usually end up in crude oil tanks, have much lower flash points. At 80Â°F, pentaneâ€™s flash point is -4.2 psig, hexaneâ€™s is -11.7 psig, and heptaneâ€™s is -13.8 psig. At atmospheric pressure (0 psig), these compounds mostly stay in the liquid phase.&lt;/p&gt;
&lt;p&gt;Most of the Hâ‚‚S ends up in the gas phase because of its lower molecular weight and tendency to remain in gas form as pressure decreases. &lt;strong&gt;As pressure drops, Hâ‚‚S flashes into the gas phase more easily than it dissolves in the liquid.&lt;/strong&gt; Since Hâ‚‚S has lower solubility in the liquid phase compared to heavier hydrocarbons, it concentrates in the gas phase as pressure decreases, while its presence in the liquid phase lessens.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row mb-1" id="fig-6"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_vapor_vs_liquid.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 6:&lt;/strong&gt; Simulation of an upstream facility where reservoir fluid is separated through 3 vessels, modeled using BR&amp;E Promax. The reservoir fluid composition represents real well fluid properties. The simulation shows two key results: 1) Hâ‚‚S levels are higher in the gas phase than in the liquid phase, and 2) Hâ‚‚S concentrations increase in the gas phase as separation progresses, while they decrease in the liquid phase. This phenomenon is due to Hâ‚‚S's high flash point pressure and its preference to flash into the gas phase rather than dissolve into the liquid phase.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.-Hâ‚‚S-sim-results-at-various-production-rates"&gt;4. Hâ‚‚S sim results at various production rates&lt;a class="anchor-link" href="#4.-Hâ‚‚S-sim-results-at-various-production-rates"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;In &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt; above, Hâ‚‚S increased from 20 ppm to 60 ppm at oil tank flash, and 300 ppm at water tank flash. This scenario was assuming 1000 BOPD, 500 BWPD, 5 MMSCFD production. How would the ppm values change at different production rates? I provide Promax sim result screenshots in this section for readers to observe and learn. For all scenarios, oil prod is fixed at 1000 BOPD. Water rate ranges between 100 to 2000 BWPD, and gas rate ranges from 2 MMSCFD to 20 MMSCFD. Oil gravity is assumed to be 40Â° API (impact of API gravity didn't seem to be much after running some simulations).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.1.-Simulation-screenshots"&gt;4.1. Simulation screenshots&lt;a class="anchor-link" href="#4.1.-Simulation-screenshots"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;For summary, navigate down to &lt;a class="internal-link" href="#4.2.-Simulation-results-summary"&gt;4.2. Simulation results summary.&lt;/a&gt;&lt;/p&gt;
&lt;h4 id="4.1.1-100-BWPD"&gt;4.1.1 100 BWPD&lt;a class="anchor-link" href="#4.1.1-100-BWPD"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;2 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;5 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;10 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;20 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs4.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;h4 id="4.1.2-1000-BWPD"&gt;4.1.2 1000 BWPD&lt;a class="anchor-link" href="#4.1.2-1000-BWPD"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;2 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs5.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;5 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs6.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;10 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs7.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;20 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs8.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;h4 id="4.1.3-2000-BWPD"&gt;4.1.3 2000 BWPD&lt;a class="anchor-link" href="#4.1.3-2000-BWPD"&gt;Â¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;2 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs9.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;5 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs10.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;10 MMSCFD&lt;/strong&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs11.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;17 MMSCFD&lt;/strong&gt; *&lt;/p&gt;
&lt;p&gt;Simulated failed and could not be converged beyond 17 MMSCFD mark, so 17 MMSCFD is reported here instead of 20.&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/hs_failed_17mmscfd.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="4.2.-Simulation-results-summary"&gt;4.2. Simulation results summary&lt;a class="anchor-link" href="#4.2.-Simulation-results-summary"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; shows the simulated Hâ‚‚S ppm levels at various production rates across different process streams. &lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt; is a normalized version of Table 2, allowing for easier comparison of how Hâ‚‚S ppm levels measured at high-pressure conditions change at lower-pressure conditions. Normalization was necessary because Hâ‚‚S ppm levels at the 500# separatorâ€™s gas side fluctuate as production rates (BOPD, BWPD, MMSCFD) change.&lt;/p&gt;
&lt;p&gt;Four key conclusions can be drawn from &lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt;:&lt;/p&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; Hâ‚‚S ppm levels measured at high-pressure applications should not be used for low-pressure applications due to significant discrepancies.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; These discrepancies are more pronounced in water tank flash gas than in oil tank flash gas. For oil tank flash gas, Hâ‚‚S levels were 2.5 times higher than in the separator gas, whereas for water tank flash gas, the difference was 13â€“24 times greater. Stricter standards should be applied for water tank flash lines.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; Increasing the Gas-Oil-Ratio (GOR) raises ppm levels to a certain extent in lower-pressure applications, increasing the deviation from high-pressure separator measurements. However, high GOR results in only ~10% higher Hâ‚‚S ppm compared to low GOR, and the effect of GOR on Hâ‚‚S ppm is minimized in high watercut applications.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; An increase in water cut slightly reduces Hâ‚‚S levels, but the effect is minimal.&lt;/p&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;div class="row" id="table-2"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_summary_table_original.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 2:&lt;/strong&gt; Hâ‚‚S ppm levels reported at various process streams and production rates, taken from simulation results shown in &lt;a class="internal-link" href="#4.1.-Simulation-screenshots"&gt;4.1. Simulation screenshots&lt;/a&gt; above.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/H2S_summary_table_normalized.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 3:&lt;/strong&gt; Normalized version of &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;. All simulated ppm values were multiplied by a normalizing factor so that the H2S ppm levels taken at the 500# separator's gas side equals 20 ppm in all scenarios.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="5.-Conclusion"&gt;5. Conclusion&lt;a class="anchor-link" href="#5.-Conclusion"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; Hâ‚‚S ppm levels are important to comply with regulations, prevent equipment damage, and ensure personnel safety.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; Hâ‚‚S ppm levels measured in high-pressure applications should not be applied to low-pressure environments, as the compositions change during separation at lower pressures.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; Hâ‚‚S ppm levels significantly increase at low pressure. For example, in &lt;a class="internal-link" href="#fig-1"&gt;Figure 1&lt;/a&gt;, 20 ppm measured at the 500# separator rises to 63.4 ppm and 302 ppm at the atmospheric oil and water tank flash lines, respectively.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; Hâ‚‚S levels increase as lighter ends (methane and ethane) flash off before (and more) Hâ‚‚S enters the gas phase. This occurs because methane (MW=16.04) and ethane (MW=30.07) are lighter than Hâ‚‚S (MW=34.08), giving them higher flash point pressures, as shown in &lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt;. However, methane is the main driver, as it flashes significantly easier than ethane (shown in &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt; and &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt;), leaving a higher concentration of Hâ‚‚S in lower-pressure vessels.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.&lt;/strong&gt; Hâ‚‚S levels are much higher in gas streams than in liquid streams because Hâ‚‚S has a high flash point pressure of 291 psig (at 80Â°F) and prefers the gas phase. As pressure drops, Hâ‚‚S flashes into the gas phase more readily than it dissolves into the liquid.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.&lt;/strong&gt; Discrepancies between high- and low-pressure ppm levels are more pronounced in water tank flash gas than in oil tank flash gas. For oil tank flash gas, Hâ‚‚S levels were 2.5 times higher than in the 500 psig separator gas, whereas for water tank flash gas, the difference was 13â€“24 times greater (shown in &lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt;). Stricter safety and corrosion standards should be applied for water tank flash lines.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7.&lt;/strong&gt; The impact of GOR and water cut is minimal. The main factor is the compositional changes due to pressure drop and flashing.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="H2S"></category><category term="process engineering"></category><category term="ProMax"></category><category term="measurements"></category><category term="gas-sample"></category><category term="separators"></category><category term="VRU"></category></entry><entry><title>Quantifying The Impact Of Completion Delay Since Drilled On Production</title><link href="https://aegis4048.github.io/quantifying_the_impact_of_completion_delay_since_drilled_on_production" rel="alternate"></link><published>2023-03-03T00:00:00-08:00</published><updated>2023-03-03T00:00:00-08:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2023-03-03:/quantifying_the_impact_of_completion_delay_since_drilled_on_production</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Once a well is drilled, it must be completed to produce oil and gas. However, operators sometimes delay completing a well for various reasons, such as waiting for fracking crews or facing budget constraints. These delayed wells, known as &lt;strong&gt;Drilled but Uncompleted (DUC)&lt;/strong&gt; wells, are considered to be a working oil field capital because the wells can be turned on line for production for cheap. However, the empirical evidences suggests that the DUC wells may no longer function as a working capital if completion is delayed for too long. The probability of completion falls drastically after two years of delay in completion, and DUC wells that still remain un-completed beyond this time frame are likely to be never completed.&lt;/p&gt;
&lt;p&gt;The study conducted in this article is built on top of the previous scientific findings which claim that the nearby parent wells can have a negative impact on the production of child wells, which worsens the longer the parent wells have been producing. This is particularly critical for DUC wells, as the wells awaiting completion are already exposed to these pressure variations from existing wells that continue to produce and deplete. This study aims to quantify the impact of increasing delays in completion on production by observing changes in estimated ultimate recovery (EUR) normalized by lateral length and completion concentration per perforated foot as a function of DUC time.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#Sample data description"&gt;&lt;span class="toc_label"&gt;0.&lt;/span&gt;Sample data description&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Key takeaways"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;Key takeaways&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Quick overview on DUC wells"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;Quick overview on DUC wells&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Reservoir depletion due to existing offset wells"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;Reservoir depletion due to existing offset wells&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Quantifying the impact of DUC time on EUR"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;Quantifying the impact of DUC time on EUR&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Preliminary data cleaning"&gt;&lt;span class="toc_label"&gt;4.1.&lt;/span&gt;Preliminary data cleaning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Raw EUR vs. DUC time"&gt;&lt;span class="toc_label"&gt;4.2.&lt;/span&gt;Raw EUR vs. DUC time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Factors that affect EUR: Completion size and lateral length"&gt;&lt;span class="toc_label"&gt;4.3.&lt;/span&gt;Factors that affect EUR: Completion size and lateral length&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Normalized EUR vs. DUC time"&gt;&lt;span class="toc_label"&gt;4.4.&lt;/span&gt;Normalized EUR vs. DUC time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#Dead DUC wells"&gt;&lt;span class="toc_label"&gt;5.&lt;/span&gt;"Dead" DUC wells&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Conclusion"&gt;&lt;span class="toc_label"&gt;6.&lt;/span&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Sample data description"&gt;&lt;/div&gt;&lt;h2 id="0.-Sample-data-description"&gt;0. Sample data description&lt;a class="anchor-link" href="#0.-Sample-data-description"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The main data source used for this article is the &lt;a href="https://www.enverus.com/" target="_blank"&gt;Enverus&lt;/a&gt; Drilling Info application. Within Drilling Info's data base, I selected wells in the seven major basins in the US, defined by the US Energy Information Adminitration's (EIA) &lt;a href="https://www.eia.gov/petroleum/drilling/" target="_blank"&gt;Drilling Productivity Report&lt;/a&gt; (DPR): Anadarko, Appalachia, Bakken, Eagle Ford, Haynesville, Niobrara, and Permian.&lt;/p&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-1" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/DPR-basins.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 1:&lt;/strong&gt; 7 major basins in the US, Source: EIA&lt;/p&gt;&lt;/div&gt;&lt;p&gt;The DPR provides which county and state they used to define each major basins. For your convenience, I compiled a text file (&lt;a href="https://aegis4048.github.io/downloads/notebooks/sample_data/Basins_Boundaries.txt" target="_blank"&gt;Basins_Boundaries.txt&lt;/a&gt;) that has the list of state and counties that can be easily pasted into Drilling Info's filter tab. Unfortunately Enverus Drilling Info is a commerical software and not everyone will be able to use it.&lt;/p&gt;
&lt;div class="row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-2" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/drilling_info_paste.png"/&gt;&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; Pasting the Eagle Ford basin's state and county data into Drilling Info for query&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="pandas table"&gt;&lt;/div&gt;&lt;p&gt;Pulling all active wells in the specified counties and states gives this &lt;a class="ico xls" href="https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx" target="_blank"&gt;Excel file&lt;/a&gt; &lt;strong&gt;(EUR_vs_Lag.xlsx).&lt;/strong&gt; The file has 7 tabs for each basin. The below code output shows small portion of the Anadarko wells data. Each row represents a record of one well.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;InÂ [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class="highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_excel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sheet_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'Anadarko'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;
&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[3]:&lt;/div&gt;
&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div&gt;
&lt;style scoped=""&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
&lt;thead&gt;
&lt;tr style="text-align: right;"&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;Spud Date&lt;/th&gt;
&lt;th&gt;Completion Date&lt;/th&gt;
&lt;th&gt;Drill Type&lt;/th&gt;
&lt;th&gt;Lag&lt;/th&gt;
&lt;th&gt;EUR Oil (Full)&lt;/th&gt;
&lt;th&gt;EUR Gas (Full)&lt;/th&gt;
&lt;th&gt;EUR (Full) BOE&lt;/th&gt;
&lt;th&gt;First 12 BOE&lt;/th&gt;
&lt;th&gt;Production Type&lt;/th&gt;
&lt;th&gt;DI Lateral Length&lt;/th&gt;
&lt;th&gt;Total Proppant (First Treatment Job)&lt;/th&gt;
&lt;th&gt;Total Fluid (First Treatment Job)&lt;/th&gt;
&lt;th&gt;Proppant per Perforated Foot (First Treatment Job)&lt;/th&gt;
&lt;th&gt;Fluid per Perforated Foot (First Treatment Job)&lt;/th&gt;
&lt;th&gt;Proppant Concentration (lbs/gal) (First Treatment Job)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;td&gt;2020-01-09&lt;/td&gt;
&lt;td&gt;2021-04-09&lt;/td&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;456.0&lt;/td&gt;
&lt;td&gt;672317.75&lt;/td&gt;
&lt;td&gt;0.00&lt;/td&gt;
&lt;td&gt;672317.750000&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;OIL&lt;/td&gt;
&lt;td&gt;10776.0&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;td&gt;2019-05-03&lt;/td&gt;
&lt;td&gt;2019-07-26&lt;/td&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;84.0&lt;/td&gt;
&lt;td&gt;129760.25&lt;/td&gt;
&lt;td&gt;2348886.00&lt;/td&gt;
&lt;td&gt;521241.250000&lt;/td&gt;
&lt;td&gt;141195.17&lt;/td&gt;
&lt;td&gt;GAS&lt;/td&gt;
&lt;td&gt;5739.0&lt;/td&gt;
&lt;td&gt;6137496.0&lt;/td&gt;
&lt;td&gt;170614.00&lt;/td&gt;
&lt;td&gt;1069.4365&lt;/td&gt;
&lt;td&gt;29.73&lt;/td&gt;
&lt;td&gt;0.86&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;td&gt;2018-06-20&lt;/td&gt;
&lt;td&gt;2018-07-28&lt;/td&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;38.0&lt;/td&gt;
&lt;td&gt;89633.48&lt;/td&gt;
&lt;td&gt;472189.47&lt;/td&gt;
&lt;td&gt;168331.725000&lt;/td&gt;
&lt;td&gt;61155.83&lt;/td&gt;
&lt;td&gt;GAS&lt;/td&gt;
&lt;td&gt;4338.0&lt;/td&gt;
&lt;td&gt;4304900.0&lt;/td&gt;
&lt;td&gt;100874.00&lt;/td&gt;
&lt;td&gt;992.3698&lt;/td&gt;
&lt;td&gt;23.25&lt;/td&gt;
&lt;td&gt;1.02&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;td&gt;2018-05-21&lt;/td&gt;
&lt;td&gt;2018-07-07&lt;/td&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;47.0&lt;/td&gt;
&lt;td&gt;158308.72&lt;/td&gt;
&lt;td&gt;2718710.75&lt;/td&gt;
&lt;td&gt;611427.178333&lt;/td&gt;
&lt;td&gt;222754.17&lt;/td&gt;
&lt;td&gt;GAS&lt;/td&gt;
&lt;td&gt;4859.0&lt;/td&gt;
&lt;td&gt;5627071.0&lt;/td&gt;
&lt;td&gt;194148.98&lt;/td&gt;
&lt;td&gt;1158.0718&lt;/td&gt;
&lt;td&gt;39.96&lt;/td&gt;
&lt;td&gt;0.69&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;td&gt;2018-04-09&lt;/td&gt;
&lt;td&gt;2018-07-06&lt;/td&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;88.0&lt;/td&gt;
&lt;td&gt;153994.27&lt;/td&gt;
&lt;td&gt;3887145.75&lt;/td&gt;
&lt;td&gt;801851.895000&lt;/td&gt;
&lt;td&gt;268463.00&lt;/td&gt;
&lt;td&gt;GAS&lt;/td&gt;
&lt;td&gt;4845.0&lt;/td&gt;
&lt;td&gt;8990772.0&lt;/td&gt;
&lt;td&gt;292805.38&lt;/td&gt;
&lt;td&gt;1855.6805&lt;/td&gt;
&lt;td&gt;60.43&lt;/td&gt;
&lt;td&gt;0.73&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Key takeaways"&gt;&lt;/div&gt;&lt;h2 id="1.-Key-takeaways"&gt;1. Key takeaways&lt;a class="anchor-link" href="#1.-Key-takeaways"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;div class="highlights" id="key1"&gt;
&lt;div class="highlights-title"&gt;1. Characteristics of DUC wells&lt;/div&gt;
&lt;div class="highlights-content"&gt;DUC wells can be turned on line for cheap since the cost of drilling have been paid. This allows them to function as a secondary form of hydrocarbon storage under the ground, instead of traditional above-ground facilities.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key2"&gt;
&lt;div class="highlights-title"&gt;2. Delaying completion during times of low oil prices in the hope of a future recovery may not be a financially wise decision&lt;/div&gt;
&lt;div class="highlights-content"&gt;This is because nearby wells can induce reservoir depletion, which can significantly reduce the potential yield. Operators should carefully consider the long-term financial implications of delaying completion and weigh them against the potential benefits of waiting for better market conditions.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key3"&gt;
&lt;div class="highlights-title"&gt;3. Scientific wisdom states that the greater difference in completion timing among adjacent wells worsens child well's production&lt;/div&gt;
&lt;div class="highlights-content"&gt;The prolonged production from nearby parent wells can lead to reservoir depletion and pressure sinks, which can affect the productivity of the child well. This issue is particularly important for DUC wells because as existing wells continue to produce and deplete, the wells awaiting completion are already exposed to these pressure variations, which can worsen if completion is further delayed &lt;a href="https://onepetro.org/REE/article-abstract/22/01/190/206725/Concerns-and-Clarifications-for-Drilled" target="_blank"&gt;(Srinivasan et al. 2018)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key4"&gt;
&lt;div class="highlights-title"&gt;4. Contrary to the scientific wisdom, wells completed shortly after drilling tend to have smaller EUR compared to wells with longer DUC time&lt;/div&gt;
&lt;div class="highlights-content"&gt;This is due to the fact that younger DUC wells tend to have shorter lateral length and treated with smaller completion concentration for each lateral foot. This means that the operators tend to undersize completion design for their younger DUC wells, resulting in sub-optimal EUR.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key5"&gt;
&lt;div class="highlights-title"&gt;5. To discern the genuine influence of DUC time on production, EUR is normalized by lateral length, proppant per perforated foot, and fluid per perforated foot&lt;/div&gt;
&lt;div class="highlights-content"&gt;This decision is made after visually confirming positive correlation between EUR vs. lateral length and completion size in &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key6"&gt;
&lt;div class="highlights-title"&gt;6. Anadarko and Permian basins showed the worst reduction in normalized EUR in the shortest time span between drilling and completion&lt;/div&gt;
&lt;div class="highlights-content"&gt;Normalized EUR dropped by 81% and 74%, respectively, for Anadarko and Permian basins over a span of 150 days of additional delay in completion (&lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;), followed by the Haynesville basin which showed 46% decrease in normalized EUR over a span of additional 100 days of delay in completion.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key7"&gt;
&lt;div class="highlights-title"&gt;7. Appalachia, Eagle Ford and Niobrara basins showed minimal loss in normalized EUR with increasing DUC time&lt;/div&gt;
&lt;div class="highlights-content"&gt;Appalachia experienced only 19% reduction in normalized EUR with 350 days of delay in completion, and Eagle Ford and Niobrara basins showed negligible change in normalized EUR with increasing DUC time. This finding shows that wells in these basins are the least likely to suffer from well-to-well interference problems with increasing DUC time compared to the other basins.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key8"&gt;
&lt;div class="highlights-title"&gt;8. DUC wells have time limit till completion. &lt;/div&gt;
&lt;div class="highlights-content"&gt;The probability of completion falls drastically after a certain time limit due to the degrading economics associated with delays in completion. For example in &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;, the completion time limits for Anadarko and Hanyesville are 308 days and 409 days after drilled, respectively. Beyond these limits, the probability of completion in these basins drops below 5%. This study demonstrates a positive correlation between the extent of these time limits and changes in both normalized EUR and absolute EUR as DUC time increases.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Quick overview on DUC wells"&gt;&lt;/div&gt;&lt;h2 id="2.-Quick-overview-on-DUC-wells"&gt;2. Quick overview on DUC wells&lt;a class="anchor-link" href="#2.-Quick-overview-on-DUC-wells"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Once a well is drilled, it must be completed to produce oil and gas. However, operators sometimes delay completing a well for various reasons, such as waiting for fracking crews or facing budget constraints. These delayed wells, known as &lt;strong&gt;Drilled but Uncompleted (DUC)&lt;/strong&gt; wells, accumulate when drilling outpaces completion and decrease when the opposite occurs. &lt;a class="internal-link" href="#fig-3"&gt;Figure 3&lt;/a&gt; illustrates the historical trend of DUC inventories in the seven major US basins, as defined by the &lt;a href="https://www.eia.gov/petroleum/drilling/" target="_blank"&gt;EIA's DPR&lt;/a&gt; page. &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt; provides more detailed information on each basin, including hydrocarbon production volumes and drilling activities.&lt;/p&gt;
&lt;p&gt;DUC wells have unique features that make them an attractive option for low-cost production. The wells can be turned on line for production for cheap; the costs of drilling have been paid, and completion won't be as costly as new drilling. They can function as a secondary form of hydrocarbon storage underground, unlike traditional above-ground facilities. In times of low oil prices, operators may choose to complete them later, hoping that the oil price would recover in a near future. Throughout the rest of the article, however, I show why this may not be a smart idea for some basins (especially Anadarko and Permian) due to reservoir depletion induced by existing producing offset wells.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-3" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/US Major Basins Completion &amp; Drilling Activities and Commodities.png"/&gt;&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; DUCs accumulate when drilling activity exceeds completion, and vice versa. The line plots depict three distinct periods of significant fluctuations in DUC well inventories, with [1] and [3] representing instances of rapid depletion due to high completion rates, and [2] reflecting a period of accumulation resulting from high drilling activities. WTI Crude oil prices is appended at the bottom to show the effect of commodity prices on DUCs.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (3)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs = df.groupby([pd.Grouper(freq='M'), 'Basin'])['DUC'].mean()
df_DUCs = df_DUCs.unstack().fillna(0)
df_DUCs = round(df_DUCs, 0)
df_DUCs['Total DUCs'] = df_DUCs.T.apply(lambda x: sum(x))

df_drilled = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Drilled'].sum()
df_drilled = df_drilled.unstack().fillna(0)
df_drilled['Total Drilled'] = df_drilled.T.apply(lambda x: sum(x))

df_completed = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Completed'].sum()
df_completed = df_completed.unstack().fillna(0)
df_completed['Total Completed'] = df_completed.T.apply(lambda x: sum(x))

############################################# Plot ##############################################

fig, ax = plt.subplots(figsize=(8, 4))

ax2 = ax.twinx()

ax.plot(df_drilled.index, df_drilled['Total Drilled'], color='k', label='Newly Drilled')
ax.plot(df_completed.index, df_completed['Total Completed'], label='Completed')
ax2.plot(df_DUCs.index, df_DUCs['Total DUCs'], color='purple', label='DUC')


ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2016-03-1') &amp; (df_drilled.index &lt;= '2017-1-1'), color='red', alpha=0.4)
ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2018-08-01') &amp; (df_drilled.index &lt;= '2019-3-1'), color='green', alpha=0.4)
ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2020-07-1') &amp; (df_drilled.index &lt;= '2022-8-1'), color='red', alpha=0.4)

ax.axvline(x=df_drilled.index[26], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[35], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[26], df_drilled.index[35], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[55], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[61], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[55], df_drilled.index[61], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[78], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[102], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[78], df_drilled.index[102], facecolor='lightgrey', alpha=0.3)

ax.set_ylim(0, 2500)
ax2.set_ylim(0, 10000)

ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[5].gridline.set_visible(False)
ax.spines.top.set_visible(False)
ax2.spines.top.set_visible(False)

h1, l1 = ax.get_legend_handles_labels()
h2, l2 = ax2.get_legend_handles_labels()
ax.legend(h1 + h2, l1 + l2, fontsize=10, ncol=3, loc='upper left', framealpha=1)

ax.set_ylabel('Drilled &amp; Completed Wells', fontsize=11)
ax2.set_ylabel('DUC Wells', fontsize=11)

ax.arrow(df_drilled.index[71], 1500, 60, -270, head_width=40, head_length=60, fc='k', ec='k')
ax.text(0.58, 0.62, 'Covid Crash', fontsize=9, transform=ax.transAxes, color='k')

ax.text(0.295, 0.05, '[1]', fontsize=9, transform=ax.transAxes, color='k')
ax.text(0.53, 0.05, '[2]', fontsize=9, transform=ax.transAxes, color='k')
ax.text(0.805, 0.05, '[3]', fontsize=9, transform=ax.transAxes, color='k')

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('US Major Basins Completion &amp; Drilling Activities')  + ",  Jan 2014 - Dec 2022", fontsize=12, pad=10, x=0.4, y=1.06)
ax.annotate('', xy=(-0.11, 1.07), xycoords='axes fraction', xytext=(1.11, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.text(0.145, 0.1, 'aegis4048.github.io', fontsize=10, ha='center', va='center',
        transform=ax.transAxes, color='grey', alpha=0.5)

fig.set_facecolor("white")
fig.tight_layout()

############################################# Plot 2 ##############################################

df = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EIA-commodity.xls', sheet_name='Data 1')
df = df.iloc[338:-1, :-1] # between Jan 2014 to Dec 2022
df.columns = ['date', 'value']
df.reset_index(inplace=True, drop=True)
df['date'] = df['date'].apply(lambda x: x.strftime('%Y-%m'))
df['date'] = pd.to_datetime(df['date'])

fig, ax = plt.subplots(figsize=(7, 1))

ax.plot(df['date'], df['value'], color='green')

ax.set_ylabel('oil ($)', fontsize=10)
ax.set_ylim(0, 120)
ax.set_yticks(np.linspace(0, 120, 4))
ax.tick_params(axis='both', which='major', labelsize=9)

ax.axvspan(df_drilled.index[26], df_drilled.index[35], facecolor='lightgrey', alpha=0.3)
ax.axvspan(df_drilled.index[55], df_drilled.index[61], facecolor='lightgrey', alpha=0.3)
ax.axvspan(df_drilled.index[78], df_drilled.index[103], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[26], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[35], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[55], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[61], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[78], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[103], color='k', linestyle='--', linewidth=1, alpha=0.7)

ax.grid(axis='y', alpha=0.5)
ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)
ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)

ax.annotate('Source: Pythonic Excursions, EIA', xy=(-0.11, -.5), xycoords='axes fraction', fontsize=9)
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="fig-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/DUC &amp; Newly Drilled Wells and Production by Basins, Jan 2014 - Dec 2022.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; Quick glance at the EIA DPR data for each basin. Note that the Permian basin has different y-axis scale for DUC &amp; newly drilled wells count.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (4)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from matplotlib.colors import LinearSegmentedColormap
import warnings
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs_year = df.groupby([df.index.year, 'Basin'])['DUC'].mean()
df_DUCs_year = df_DUCs_year.unstack().fillna(0)
df_DUCs_year = round(df_DUCs_year, 0)

df_drilled_year = df.groupby([df.index.year, 'Basin'])['Drilled'].sum()
df_drilled_year = df_drilled_year.unstack().fillna(0)
df_drilled_year['Total Drilled'] = df_drilled_year.T.apply(lambda x: sum(x))

#################### Import All Data - Rig Count, Oil &amp; Gas Prod per Basins #######################

dfs2 = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/dpr-data.xlsx', sheet_name=basin + ' Region', skiprows=1)
    df_cur['Basin'] = basin
    dfs2.append(df_cur)

year_cutoff = '2013' # counting from year_cutoff + 1
date_header = 'Month'

df2 = pd.concat(dfs2)
df2 = df2.sort_values(date_header)
df2.index = pd.to_datetime(df2[date_header])
df2.drop(df2.columns[[2, 3, 5, 6]], axis=1, inplace=True)
df2.columns = ['Date', 'Rig Count', 'Total Oil Prod (BBLD)', 'Total Gas Prod (MCFD)', 'Basin']
df2 = df2[df2.index &gt; year_cutoff + '-12-31']

################################ Cross Table for Gas Production ###################################

# Total Gas Production
df2_total_gas_prod_year = df2.groupby([df2.index.year, 'Basin'])['Total Gas Prod (MCFD)'].sum()
df2_total_gas_prod_year = df2_total_gas_prod_year.unstack().fillna(0)
df2_total_gas_prod_year['Total Gas (BCFD)'] = df2_total_gas_prod_year.T.apply(lambda x: sum(x))
df2_total_gas_prod_year = df2_total_gas_prod_year / 1000000

################################ Cross Table for Oil Production ###################################

df2_total_oil_prod_year = df2.groupby([df2.index.year, 'Basin'])['Total Oil Prod (BBLD)'].sum()
df2_total_oil_prod_year = df2_total_oil_prod_year.unstack().fillna(0)
df2_total_oil_prod_year['Total (MMBBLD)'] = df2_total_oil_prod_year.T.apply(lambda x: sum(x))
df2_total_oil_prod_year = df2_total_oil_prod_year / 1000000

############################################# Plot ##############################################

# changing datetime index to str is necessary to overlay lineplot on top of barplot
df_drilled_year.index = [str(item) for item in df_drilled_year.index]
df2_total_gas_prod_year.index = [str(item) for item in df2_total_gas_prod_year.index]
df2_total_oil_prod_year.index = [str(item) for item in df2_total_oil_prod_year.index]

cmap_name = 'cubehelix'
colors = sns.color_palette(cmap_name, n_colors=len(basins))
np.random.seed(34)
np.random.shuffle(colors)
colors = colors.as_hex()
colors[0] = 'grey'
colors[-2] = '#914810'
cmap = LinearSegmentedColormap.from_list("my_colormap", colors)
barcolor_dict = {label: color for label, color in zip(basins, colors)}

axis_fontsize = 15
axis_tick_fontsize = 11
title_fontsize = 18
figure_title_fontsize = 20
label_fontsize = 13
legend_fontsize = 16
markersize = 9
y_label_fontsize = 15

gas_prod_color = 'red'
oil_prod_color = 'green'
drilled_color = 'k'

fig = plt.figure(figsize=(16, 17))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,2:4])
axes = [ax1,ax2,ax3,ax4,ax5,ax6,ax7]

for i, (ax, basin) in enumerate(zip(axes, basins)):

    df_DUCs_year.plot.bar(alpha=1, y=basin, ax=ax, legend=None, width=0.9, edgecolor='k', linewidth=0.1, label='DUC Count', color=barcolor_dict[basin])

    ax1 = ax.twinx()
    df_drilled_year.plot(y=basin, ax=ax1, linestyle='-', legend=None, marker='o', color=drilled_color, markersize=markersize, label='New Drilled Wells')

    ax2 = ax.twinx()
    df2_total_oil_prod_year.plot(y=basin, ax=ax2, linestyle='-', marker='o', color='green', markersize=markersize, label='Oil Prod Total', legend=None)
    ax2.set_ylim(0, 70)

    ax3 = ax.twinx()
    df2_total_gas_prod_year.plot(y=basin, ax=ax3, linestyle='-', marker='o', color='red', markersize=markersize, label='Gas Prod Total', legend=None)
    ax3.set_ylim(0, 500)

    ax.set_facecolor('#eeeeee')
    ax.set_axisbelow(True)
    ax.grid(axis='y')
    ax.set_xticklabels([str(dt).split('-')[0] for dt in df_DUCs_year.index])
    ax.tick_params(axis='x', labelrotation=45, labelsize=axis_tick_fontsize)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax1.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax.set_title(basin, fontsize=title_fontsize)

    if i % 2 == 0 and i != 6:
        ax.set_ylabel('DUC Wells Count (k)', fontsize=axis_fontsize)
        ax2.set_yticks([])
        ax3.set_yticks([])        
    else:
        ax1.set_ylabel('Drilled Wells Count (k)', fontsize=axis_fontsize)

        ax2.tick_params(axis='y', colors='green')
        ax2.spines['right'].set_position(('outward', 50))
        ax2.spines['right'].set_color('green')
        ax2.set_ylabel('Total Oil Prod. (MMBBLD)', color='green', fontsize= axis_fontsize)

        ax3.tick_params(axis='y', colors='red')
        ax3.spines['right'].set_position(('outward', 100))
        ax3.spines['right'].set_color('red')
        ax3.set_ylabel('Total Gas Prod. (BCFD)', color='red', fontsize= axis_fontsize) 

    if i == 6:
        ax.set_ylabel('DUC Wells Count (k)', fontsize=axis_fontsize)
    #else:
        #ax1.set_yticks([])
        #ax2.set_yticks([])
        #ax3.set_yticks([])

    if i == 4 or i == 6:
        ax.set_xlabel('Spud Date', fontsize=y_label_fontsize)
    else:
        ax.set_xlabel('')

    if basin == 'Permian':
        pass
        ax.set_ylim(0, 5000)
        ax1.set_ylim(0, 15000)

    else:
        ax.set_ylim(0, 1400)
        ax1.set_ylim(0, 7000)

    ax.yaxis.set_major_formatter(ticker.EngFormatter())
    ax1.yaxis.set_major_formatter(ticker.EngFormatter())        

    ax.spines.top.set_visible(False)
    ax1.spines.top.set_visible(False)
    ax2.spines.top.set_visible(False)
    ax3.spines.top.set_visible(False)

    #ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
    #ax1.yaxis.get_major_ticks()[-1].gridline.set_visible(False)

    h0, l0 = ax.get_legend_handles_labels()
    h1, l1 = ax1.get_legend_handles_labels()
    h2, l2 = ax2.get_legend_handles_labels()
    h3, l3 = ax3.get_legend_handles_labels()
    ax.legend(h0, l0, loc='upper left', ncol=2, fontsize=13, framealpha=0.5)

    fig.legend(h3 + h2 + h1, l3 + l2 + l1, loc='lower left', ncol=2,
               bbox_to_anchor=(0.046, 0.165), bbox_transform=fig.transFigure, fontsize=legend_fontsize)

    for c in ax.containers:
        ax.bar_label(c, label_type='center', color='white', weight='bold', fontsize=label_fontsize)

    ax.text(0.16, 0.80, 'aegis4048.github.io', fontsize=12, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)        

fig.tight_layout()

def setbold(txt): 
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.998
fig.suptitle(setbold('DUC &amp; Newly Drilled Wells Count and Production')  + ",  Jan 2014 - June 2022", fontsize=19, x=0.328, y=1.025)
ax.annotate('', xy=(0.006, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, EIA', xy=(0.05, 0.145), xycoords='figure fraction', fontsize=16)

fig.set_facecolor("white")
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Reservoir depletion due to existing offset wells"&gt;&lt;/div&gt;&lt;h2 id="3.-Reservoir-depletion-due-to-existing-offset-wells"&gt;3. Reservoir depletion due to existing offset wells&lt;a class="anchor-link" href="#3.-Reservoir-depletion-due-to-existing-offset-wells"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Rarely the operators get a chance to drill a well in a virgin reservoir condition, especially in the Permian basin. Most times it's infill drilling among pre-existing wells that have been on production for some time, potentially inducing reservoir depletion problems when chained with unoptimized fracture design and well spacing.&lt;/p&gt;
&lt;p&gt;Well-to-well interference is known to have negative impact on production for both parent (old) and child (new) wells. The prolonged production from a parent well induces reservoir depletion and creates pressure sinks (area of lower pressure). A child well's hydraulic fractures are more prone to grow towards the pressure sink, causing fracture hits. &lt;a href="https://onepetro.org/URTECONF/proceedings-abstract/17URTC/All-17URTC/URTEC-2690466-MS/156487/" target="_blank"&gt;Ajisafe et al. (2016)&lt;/a&gt; studied 300 horizontal wells in the Avalon Shale of the Delaware basin and found that child wells were almost 30% less productive than parent wells. To mitigate the effects of frac hits, they simulated 1,320-ft and 660-ft lateral spacing and found that child wells with 1,320-ft spacing saw only a 5% reduction in cumulative production over five years compared to parent wells, while 660-ft spacing saw a 24% reduction.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://onepetro.org/REE/article-abstract/22/01/190/206725/Concerns-and-Clarifications-for-Drilled" target="_blank"&gt;Srinivasan et al. (2018)&lt;/a&gt; conducted study on the Williston basin, and discovered that &lt;i&gt;"the longer the difference in timing between completions in areas of high reservoir quality, the more pronounced the impacts of pressure depletion will be on new adjacent completions."&lt;/i&gt; It has particular significance for DUC wells because, as existing wells continue to produce and deplete, wells waiting on completion are already experiencing these variations around them, which will worsen as completion is delayed further.&lt;/p&gt;
&lt;p&gt;While the impact of a parent well on a child well is a convoluted function of fracture design, well spacing, DUC time, and many other factors, this article focuses on the effect of DUC time (gap between drilling and completion) on EUR to show why it may not be wise to delay completion for wells in certain basins (especailly Anadarko and Permian).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Quantifying the impact of DUC time on EUR"&gt;&lt;/div&gt;&lt;h2 id="4.-Quantifying-the-impact-of-DUC-time-on-EUR"&gt;4. Quantifying the impact of DUC time on EUR&lt;a class="anchor-link" href="#4.-Quantifying-the-impact-of-DUC-time-on-EUR"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;blockquote class="quote" style="font-family: unset; font-size: unset; font-style: unset; padding-bottom: 12px"&gt;
&lt;div class="terminology" style="margin-top: 2px"&gt;&lt;strong&gt;DUC time:&lt;/strong&gt; Gap in time between drilling and completion of a well (days).&lt;/div&gt;
&lt;div class="terminology"&gt;&lt;strong&gt;PPF:&lt;/strong&gt; Proppant per Perforated Foot (lbs/ft).&lt;/div&gt;
&lt;div class="terminology"&gt;&lt;strong&gt;FPF:&lt;/strong&gt; Fluid per Perforated Foot (gal/ft).&lt;/div&gt;
&lt;div class="terminology"&gt;&lt;strong&gt;Completion size:&lt;/strong&gt; Total volume of proppant and fracturing fluid.&lt;/div&gt;
&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;Data Description&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The primary data source used in this study is Enverus' Drilling Info application (refer to &lt;a class="internal-link" href="#pandas table"&gt;above&lt;/a&gt; for quick peek at the sample data). The data was filtered to include only horizontal wells (column: &lt;em&gt;Drill Type&lt;/em&gt;) and producing wells (column: &lt;em&gt;Production Type&lt;/em&gt;), while excluding injection wells, dry holes, cores, etc. DUC time (column: &lt;em&gt;Lag&lt;/em&gt;) is calculated by the difference between spud date and completion date. Since Drilling Info does not provide finished drilling date, spud date was assumed to be equivalent to drilled date. Modern day drilling typically takes less than 20 days.&lt;/p&gt;
&lt;p&gt;The EUR (column: &lt;em&gt;EUR (Full) BOE&lt;/em&gt;) is expressed in Barrels of Oil Equivalent (BOE). The oil and gas EURs are regularly calculated and updated by Enverus. Although these auto-fitted EURs may not be completely accurate when examined on a well-by-well basis, they provide valuable insights for basin-scale analysis. The gas EUR is converted from MCFD to BOE using a conversion factor of 6 before being combined with the oil EUR.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Methodology&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Literature review suggests that the volume of hydrocarbons lost to parent wells from child wells increases with longer DUC times. However, visualizing the raw EUR vs. DUC time contradicts this proved scientific wisdom, as shown in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;, due to the factors that have inconsistent effects on production at different DUC times. The presented study below attempts to separate the sole effects of DUC time on reservoir depletion by normalizing EUR by lateral length and completion size.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Preliminary data cleaning"&gt;&lt;/div&gt;&lt;h3 id="4.1.-Preliminary-data-cleaning"&gt;4.1. Preliminary data cleaning&lt;a class="anchor-link" href="#4.1.-Preliminary-data-cleaning"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;It is of common phenomenon that real life data has unwanted extreme data points or outliers that skew the derived statistics. This study filters those unwanted data based on percentile method; data points bigger or smaller than 97.5% or 2.5% are removed for lateral length, PPF, and FPF. In case of EUR, data points bigger than 95% percentile are filtered out. &lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt; illustrates the result of outlier removal process for Anadarko and Haynesville for EUR and PPF. Though not shown in the below figure, the outlier removal process is applied for all data types of interest (EUR, lateral, PPF, and FPF) for all seven DPR basins.&lt;/p&gt;
&lt;div class="row" id="fig-5" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/Extreme Data Removal for EURs and PPF.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; Each dot represents one well. The wells are binned by 50 lag days. Each band of dots represents wells completed within the 50-day binned interval. For EUR, upper 5% are removed. For PPF (proppant per perforated foot), upper and lower 2.5% are removed.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (5)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker
from scipy import stats

############################################# Basins ##############################################

basins = ['Anadarko', 'Haynesville', 'Anadarko', 'Haynesville']

################################### DUC Wells Count per Basin #####################################

EURs = ['EUR (Full) BOE', 'EUR Oil (Full)', 'EUR Gas (Full)']
dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx', sheet_name=basin)
    df_cur = df_cur.dropna(subset=['Completion Date'])           # Drop wells that are not completed
    df_cur = df_cur[df_cur['Drill Type'] == 'H']                 # Horizontal wells only

    # Drops non-hydrocarbon wells like: Dry hole, injection, core, etc.
    df_cur = df_cur[df_cur['Production Type'].isin(['OIL', 'GAS', 'OIL &amp; GAS'])]

    df_cur = df_cur.dropna(subset=EURs)
    df_cur[EURs] = df_cur[EURs].div(1000).round(0)
    dfs.append(df_cur)

############################################# Plot ##############################################

fig = plt.figure(figsize=(16, 9))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0:2, 0:2])
ax2 = plt.subplot(gs[0:2, 2:])
ax3 = plt.subplot(gs[2:, 0:2])
ax4 = plt.subplot(gs[2:, 2:])
axes = [ax1,ax2,ax3,ax4]

axis_tick_fontsize = 15
title_fontsize = 19
markersize = 20
y_label_fontsize = 18
legend_annot_fontsize = 18

colors = ['grey', '#c6b4ee', 'grey', '#c6b4ee']
columns = ['EUR (Full) BOE', 'EUR (Full) BOE', 
           'Proppant per Perforated Foot (First Treatment Job)', 'Proppant per Perforated Foot (First Treatment Job)']

for i, (ax, basin, column) in enumerate (zip(axes, basins, columns)):

    df = dfs[i]

    stepsize= 50
    bins = np.arange(0, 1000 + stepsize, stepsize)

    binned = []
    for b in bins[: -1]:
        _ = df[df['Lag'].between(b, b + stepsize)][column]
        binned.append(_)

    binned_outlier = []
    binned_cleaned = []

    ################################# For EURs ######################################

    if column == 'EUR (Full) BOE':

        for item in binned:
            threshold = item.quantile(0.975)
            binned_outlier.append(item[item &gt;= threshold])
            binned_cleaned.append(item[item &lt; threshold])

        if basin == 'Anadarko':
            y_max = 18000
            n_ticks = 7        
        else:
            y_max = 25000
            n_ticks = 6        

        ax.set_ylabel('EUR (MBOE)', fontsize=y_label_fontsize)
        ax.set_title(basin, fontsize=title_fontsize)
        ax.text(0.98, 0.65, 'EURs', fontsize=20, ha='right', transform=ax.transAxes, color='k', alpha=0.5)

    ################################# For Proppants ######################################

    if column == 'Proppant per Perforated Foot (First Treatment Job)':
        for item in binned:
            threshold_upper = item.quantile(0.975) 
            threshold_lower = item.quantile(0.025)
            binned_outlier.append(item[(item &lt; threshold_lower) | (item &gt; threshold_upper)])
            binned_cleaned.append(item[(item &gt;= threshold_lower) &amp; (item &lt;= threshold_upper)])

        if basin == 'Anadarko':
            y_max = 7000
            n_ticks = 8       
        else:
            y_max = 10000
            n_ticks = 6             

        ax.set_ylabel('PPF (lbs/ft)', fontsize=y_label_fontsize)
        ax.set_xlabel('DUC Time (Days)', fontsize=y_label_fontsize + 1)
        ax.text(0.98, 0.65, 'Proppants/Ft', fontsize=20, ha='right', transform=ax.transAxes, color='k', alpha=0.5)

    ######################################################################################

    # scatter plot of cleaned data
    for j, item in enumerate(binned_cleaned):
        x = np.random.normal(j + 1, 0.06, size=len(item))
        ax.scatter(x, item, color=colors[i], alpha=0.5, s=10, edgecolors='k', linewidth=0.1, label='Original wells')

    # scatter plot of outliers
    for k, item_outlier in enumerate(binned_outlier):
        x_outlier = np.random.normal(k + 1, 0.06, size=len(item_outlier))
        ax.scatter(x_outlier, item_outlier, color='r', alpha=0.5, s=50, marker='x', label='Outliers')

    # axis range
    ymin = 0 - 0.05 * y_max
    ax.set_ylim(ymin, y_max)

    # tick settings
    ax.yaxis.set_major_locator(plt.MaxNLocator(n_ticks))
    ax.tick_params(axis='x', labelsize=axis_tick_fontsize)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax.yaxis.set_major_formatter(ticker.EngFormatter())
    ax.xaxis.set_major_locator(plt.MaxNLocator(11))
    ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
    ax.set_xticklabels([int(item) for item in ax.get_xticks() * stepsize], rotation=30, fontsize=axis_tick_fontsize)

    # spines and grid
    ax.spines.top.set_visible(False)
    ax.spines.right.set_visible(False)
    ax.grid(axis='y', alpha=0.5)
    ax.set_axisbelow(True)
    ax.set_facecolor('#eeeeee')

    # legend
    h0, l0 = ax.get_legend_handles_labels()
    leg = ax.legend([h0[0], h0[-1]], [l0[0], l0[-1]], fontsize=16, ncol=1, loc='upper right')
    for lh in leg.legendHandles:
        lh.set_alpha(1)
        lh.set_sizes([50])
    ax.text(0.19, 0.88, 'aegis4048.github.io', fontsize=16, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)

fig.tight_layout()

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.993
fig.suptitle(setbold('Extreme Data Removal for EURs and PPF')  + ",  Jan 2014 - June 2022", fontsize=19, x=0.29, y=1.04)
ax.annotate('', xy=(0.005, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, DrillingInfo', xy=(0.01, 0.02),
            xycoords='figure fraction', fontsize=legend_annot_fontsize)

fig.set_facecolor("white")

plt.subplots_adjust(bottom=.15)
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Raw EUR vs. DUC time"&gt;&lt;/div&gt;&lt;h3 id="4.2.-Raw-EUR-vs.-DUC-time"&gt;4.2. Raw EUR vs. DUC time&lt;a class="anchor-link" href="#4.2.-Raw-EUR-vs.-DUC-time"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;According to prevailing scientific knowledge, the duration of DUC time is expected to negatively impact production. Nevertheless, the findings displayed in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; appear to contradict this notion. The plot depicts the raw EUR on the y-axis and the DUC time on the x-axis. The mean EURs for wells completed soon after drilling (within 50 days, first bands of dots in each basin plot) appear to be lower than those completed between 250 and 350 days after drilling. Notably, this difference is most pronounced for the Haynesville wells, as &lt;strong&gt;those completed within 300-350 days exhibit an EUR that is 328% higher than wells completed within 50 days after drilling&lt;/strong&gt;. This observation is illogical and suggests that further data analysis and investigation are required to discern the genuine influence of DUC time on EUR.&lt;/p&gt;
&lt;div class="row" id="fig-6" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/0_EUR_raw.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 6:&lt;/strong&gt; Each dot represents one well. The wells are binned by 50 DUC days. Each band of dots represents wells completed within the 50-day binned interval. The blue line plot represents the average of wells in each 50-day bin. Note that the credibility of this average line plot falls with the increasing DUC time due to lack of data near the end of the x-axis. Index of peak is chosen by visual inspection; the point which "looks like" an inflection point is chosen, and is prone to subjectivity.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (6)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

no_NA = ['EUR (Full) BOE']
dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx', sheet_name=basin)
    df_cur = df_cur.dropna(subset=no_NA)           # Drop wells that are not completed
    df_cur = df_cur[df_cur['Drill Type'] == 'H']                   # Horizontal wells only

    # Drops non-hydrocarbon wells like: Dry hole, injection, core, etc.
    df_cur = df_cur[df_cur['Production Type'].isin(['OIL', 'GAS', 'OIL &amp; GAS'])]

    # BOE to MBOE unit conversion
    df_cur[no_NA] = df_cur[no_NA].div(1000).round(0)
    dfs.append(df_cur)

############################################# Plot ################################################

axis_tick_fontsize = 14
title_fontsize = 19
markersize = 20
y_label_fontsize = 16

colors = ['grey', '#a1794a', '#d484a9', '#cbe8f0', '#c6b4ee', '#914810', '#16534c']

fig = plt.figure(figsize=(16, 17))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,2:])
axes = [ax1,ax2,ax3,ax4,ax5,ax6,ax7]

def annotate_arrows(data_y, num, tick_spacing, ymax, x_start=1, ox=0.2, fontsize=14, flip_y=False):
    '''
    data_y = y coordinate of the datapoint of interest
    num = index of the datapoint of interest
    tick_spacing = spacing between two major ticks
    ox = offset of x
    '''

    head_padding = ymax * 0.04                 # extra space between the datapoint of interest and arrowhead
    oy = ymax * 0.15                           # offset of y
    sx = x_start + (tick_spacing / 2) * num
    sy = data_y + head_padding

    if flip_y:
        oy = -ymax * 0.15
        sy = data_y - head_padding

    ax.arrow(sx + ox, sy + oy, -ox, -oy, head_width=0.3, head_length=ymax * 0.0333, fc='k', ec='k', lw=2)
    t1 = ax.text(sx + ox, sy + oy, int(data_y), fontsize=fontsize, color='k', ha='center')
    t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

    xytext = (sx + ox, sy + oy)

    return xytext 

for i, (ax, basin) in enumerate (zip(axes, basins)):

    # select current basin data
    df = dfs[i]

     # cut off high lag bins with too few wells
    df = df[df['Lag'] &lt;= 1000]

    # binning by 50 days
    stepsize = 50
    bins = np.arange(0, 1000 + stepsize, stepsize)

    # scatter plot of binned wells
    eur_original = []
    eur_cleaned = []
    eur_outlier = []
    #cleaned_indices = []
    for b in bins[: -1]:

        eur_original_ = df[df['Lag'].between(b, b + stepsize)]['EUR (Full) BOE']

        cutoff = 0.95
        eur_cleaned_ = eur_original_[eur_original_ &lt;= eur_original_.quantile(cutoff)]
        eur_outlier_ = eur_original_[eur_original_ &gt; eur_original_.quantile(cutoff)]

        eur_cleaned.append(eur_cleaned_)
        eur_outlier.append(eur_outlier_)    

    for j, item in enumerate(eur_cleaned):
        x = np.random.normal(j + 1, 0.06, size=len(item))
        ax.scatter(x, item, color=colors[i], alpha=0.5, s=10, edgecolors='k', linewidth=0.1, label='One well data')

    for k, item_outlier in enumerate(eur_outlier):
        x_outlier = np.random.normal(k + 1, 0.06, size=len(item_outlier))
        ax.scatter(x_outlier, item_outlier, color='r', alpha=0.3, s=30, marker='x', label='Outliers')   

    # line plot of average of binned wells
    means = [np.mean(item) for item in eur_cleaned]
    ax.plot([i + 1 for i in range(len(means))], means, linestyle='-', marker='o', markersize=8, alpha=0.7,
            label='AVG. EUR, binned by 50 lag days')       

    # axis range
    #ymax = y_max[basin]
    ymax = 5000
    ymin = 0 - 0.05 * ymax
    ax.set_ylim(ymin, ymax)
    #ax.set_ylim(2500, 12000)

    # tick settings
    ax.minorticks_on()
    ax.xaxis.set_tick_params(which='minor', bottom=False)
    ax.xaxis.set_major_locator(plt.MaxNLocator(12))
    ax.yaxis.set_major_locator(plt.MaxNLocator(7))  

    ax.yaxis.set_major_locator(plt.MaxNLocator(6)) 
    ax.yaxis.set_minor_locator(ticker.AutoMinorLocator(2)) 

    ax.set_xticklabels([int(item) for item in ax.get_xticks() * stepsize], fontsize=axis_tick_fontsize)
    ax.tick_params(axis='x', labelsize=axis_tick_fontsize, labelrotation=30)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
    ax.yaxis.set_major_formatter(ticker.EngFormatter())

    # spines and grid
    ax.spines.top.set_visible(False)
    ax.spines.right.set_visible(False)
    ax.grid(axis='y', alpha=0.5)
    ax.grid(axis='y', which='minor', color='grey', linestyle='--', alpha=0.2)
    ax.set_axisbelow(True)

    # texts
    ax.set_title(basin + ': ' + str(df.shape[0]) + ' wells', fontsize=title_fontsize)
    ax.set_ylabel('EUR (MBOE)', fontsize=y_label_fontsize)
    if i == 4 or i == 6:
        ax.set_xlabel('DUC time (Days)', fontsize=y_label_fontsize)
    ax.set_facecolor('#eeeeee')
    ax.text(0.15, 0.88, 'aegis4048.github.io', fontsize=12, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)    

    # legends
    h0, l0 = ax.get_legend_handles_labels()
    leg = ax.legend([h0[0]], [l0[0]], fontsize=14, ncol=2, loc='upper right')
    for lh in leg.legendHandles:
        lh.set_alpha(1)
        lh.set_sizes([50])

    h1, l1 = ax.get_legend_handles_labels()
    fig.legend([h1[-1]], [l1[-1]], loc='lower left', ncol=2,
               bbox_to_anchor=(0.046, 0.195), bbox_transform=fig.transFigure, fontsize=18) 

    fs = 15
    lw = 2
    _1 = 0
    spacing = abs(ax.get_xticks()[1] - ax.get_xticks()[2])
    if basin == 'Anadarko':
        _2 = 4
        yloc = 3000 
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

    if basin == 'Appalachia': 
        _2 = 2
        yloc = 1000 
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Bakken':
        _2 = 4
        yloc = 3000 
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Eagle Ford':
        _2 = 4
        yloc = 3000
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2))        
    if basin == 'Haynesville': 
        _2 = 6
        yloc = 4200 
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs, flip_y=False)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs, flip_y=True)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Niobrara':
        _2 = 4
        yloc = 3000
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2))  
    if basin == 'Permian':
        _2 = 6
        yloc = 3500 
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

fig.tight_layout()

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.998
fig.suptitle(setbold('EUR vs. Days Till Completion')  + ",  Jan 2014 - June 2022", fontsize=20, x=0.24, y=1.025)
ax.annotate('', xy=(0.006, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, DrillingInfo', xy=(0.055, 0.173), xycoords='figure fraction', fontsize=16)

fig.set_facecolor("white")    
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-1" style="margin-top: -15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_table_1.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 1:&lt;/strong&gt; Summary table of Figure 6.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Factors that affect EUR: Completion size and lateral length"&gt;&lt;/div&gt;&lt;h3 id="4.3.-Factors-that-affect-EUR:-Completion-size-and-lateral-length"&gt;4.3. Factors that affect EUR: Completion size and lateral length&lt;a class="anchor-link" href="#4.3.-Factors-that-affect-EUR:-Completion-size-and-lateral-length"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The trend observed in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; above, where EURs increase with increasing DUC time, contradicts the established scientific knowledge. However, we have found that this illogical trend is due to the use of smaller completion sizes and shorter lateral lengths for wells with shorter DUC times. Interestingly, the basins showing the greatest difference in EUR between the peak and trough in &lt;a class="internal-link" href="#table-1"&gt;Table 1&lt;/a&gt; (Anandarko and Haynesville) are also those with the largest increase in completion size and lateral length as DUC time increases.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p style="display: inline"&gt;&lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt; illustrates the variation in EUR due to completion size and lateral length with increasing DUC time for different basins. The largest increase in EUR between two time periods ([1] and [2]) was observed in the Haynesville basin, with a difference of 2,223 MBOE (a 209% increase)(&lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;)&lt;/p&gt;&lt;strong style="color: #a4a4a4"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_1.png"/&gt;&lt;p style="display: inline"&gt;grey bars)&lt;/p&gt;&lt;/strong&gt;. A correlation analysis showed that this increase was positively associated with a 46% increase (2,111 ft) in lateral length (&lt;a class="internal-link" href="#table-3"&gt;Table 3&lt;/a&gt;)&lt;strong style="color: #111111"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_2.png"/&gt;black line)&lt;/strong&gt;, 121% boost in PPF (&lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt;)&lt;strong style="color: #9504d3"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_3.png"/&gt;&lt;p style="display: inline"&gt;purple lines)&lt;/p&gt;&lt;/strong&gt; and a 95% boost in FPF (&lt;a class="internal-link" href="#table-5"&gt;Table 5&lt;/a&gt;)&lt;strong style="color: #287cb7"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_4.png"/&gt;&lt;p style="display: inline"&gt;blue lines)&lt;/p&gt;&lt;/strong&gt;&lt;p style="display: inline"&gt; for wells completed between 200-250 days after drilling, compared to wells completed within 50 days after drilling. Similar trends were observed for the Anadarko, Permian, and Bakken basins, although the EUR increase in the Bakken basin occurred at a much slower pace over a 500-day period.&lt;/p&gt;&lt;p&gt;Recall that PPF and FPF represent completion size normalized by lateral length (per foot). An increase in PPF and FPF implies that operators are not only increasing the total volume of proppant and fluid to fracture additional lateral length, but also increasing the completion concentration for each foot of the lateral for older DUC wells. This increase in completion size may be an effort to compensate for potential reservoir depletion issues that older DUC wells may encounter due to nearby parent wells have have already been producing for a while.&lt;/p&gt;
&lt;p&gt;Such attempt to compensate for potential reservoir depletion induced by parent wells can be best observed in the Anadarko and Hanyesville wells. An examination of &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt; reveals a significant 217% (Anadarko) and 209% (Haynesville) increase in EUR &lt;strong style="color: #a4a4a4"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_1.png"/&gt;grey bars)&lt;/strong&gt; when completion concentration is boosted between [1] and [2]. Anadarko observed 104% and 60% additional PPF and FPF, and Hanyesville 121% and 95% bigger PPF and FPF, respectively (&lt;a class="internal-link" href="#table-2"&gt;Table 4&lt;/a&gt; and &lt;a class="internal-link" href="#table-2"&gt;Table 5&lt;/a&gt;). These findings from &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt; prove the positive correlation between bigger EUR and bigger completion size.&lt;/p&gt;
&lt;p&gt;Conversely, however, the figure also suggests that the &lt;strong&gt;operators tend to undersize their completion design for wells completed shortly after drilling (within 250 days), resulting in sub-optimal EUR&lt;/strong&gt;. Put another way, wells completed shortly after drilling often receive smaller completion concentrations and yield smaller EUR, despite the fact that they have superior reservoir condition, compared to older DUC wells. As such, operators could potentially profit more from larger completion investments for wells completed shortly after drilling.&lt;/p&gt;
&lt;p&gt;In contrast, wells in the Appalachia, Eagle Ford, and Niobrara basins showed only a slight increase in completion size and lateral length with increasing DUC time, with the exception of the Niobrara basin which showed a decrease in PPF (&lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt;)&lt;strong style="color: #9504d3"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_3.png"/&gt;purple line)&lt;/strong&gt; despite the longer lateral length. The magnitude of the difference between [1] and [2] was not as drastic as in the other basins. This finding explains why wells in these basins showed minimal difference in EUR with increasing DUC time in contrast to the Anadarko, Bakken, Haynesville, and Permian basins; because the volume of proppants and fluids used for completion and lateral length stayed relatively constant with increasing DUC time.&lt;/p&gt;
&lt;p&gt;Additionally, it is worth noting that the wells with longer lateral length tended to have longer DUC time. While this may sound obvious, taking a closer look at it reveals that it is not so. Between [1] and [2], the average difference in lateral length of wells in the Haynesville basin was 2,111 ft and the difference in time was 200 days. An experienced drilling and completion engineer would recognize that it does not take an additional 200 days to drill an extra 2,111 ft and hydraulically fracture that additional length. Modern day drilling takes under 15~25 days, and completion 3~5 days. One possible explanation for operators' tendency to delay completion for longer lateral wells is that the costs and time associated with bigger proppant and fluid volumes required to adequately fracture longer lateral sections are higher. Nevertheless, further research is needed to fully understand the economic trade-offs involved in completion timing for longer lateral wells.&lt;/p&gt;
&lt;div class="row" id="fig-7" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/7_factors_that_affect_EUR.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 7:&lt;/strong&gt; Each data point represents an average data (lateral length, PPF and FPF) of wells completed within 50-day binned interval. Each bar represents raw EUR. Note that the credibility of the average line plots decrease with the increasing DUC time due to lack of data near the end of the x-axis (refer to &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; to visually understand how each average is calculated). [1] and [2] represent local trough and peak used for comparison in Table 2, 3, 4 and 5. Indices of [2]s are chosen by visual inspection; the point which "looks like" an inflection point is chosen, and is prone to subjectivity.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (7)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

no_NA = ['EUR (Full) BOE', 'Fluid per Perforated Foot (First Treatment Job)', 
         'DI Lateral Length', 'Proppant per Perforated Foot (First Treatment Job)']
dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx', sheet_name=basin)
    df_cur = df_cur.dropna(subset=no_NA)           # Drop wells that are not completed
    df_cur = df_cur[df_cur['Drill Type'] == 'H']                   # Horizontal wells only

    # Drops non-hydrocarbon wells like: Dry hole, injection, core, etc.
    df_cur = df_cur[df_cur['Production Type'].isin(['OIL', 'GAS', 'OIL &amp; GAS'])]

    dfs.append(df_cur)

############################################# Plot ##############################################

colors = ['grey', '#a1794a', '#d484a9', '#cbe8f0', '#c6b4ee', '#914810', '#16534c']

axis_tick_fontsize = 14
title_fontsize = 19
markersize = 20
y_label_fontsize = 16

gas_prod_color = 'red'
oil_prod_color = 'green'
drilled_color = 'k'

fig = plt.figure(figsize=(16, 17))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,2:4])
axes = [ax1,ax2,ax3,ax4,ax5,ax6,ax7]

for i, (ax, basin) in enumerate(zip(axes, basins)):

    # select current basin data
    df = dfs[i]

    # cut off high lag bins with too few wells
    df = df[df['Lag'] &lt;= 1000]

    # binning by 50 days
    stepsize = 50
    bins = np.arange(0, 1000 + stepsize, stepsize)    

    # extreme data removal - 5%
    binned_cleaned_lateral = []
    binned_cleaned_ppf = []
    binned_cleaned_fpf = []
    binned_cleaned_eur = []
    for b in bins[: -1]:
        binned_lateral = df[df['Lag'].between(b, b + stepsize)]['DI Lateral Length']
        binned_ppf = df[df['Lag'].between(b, b + stepsize)]['Proppant per Perforated Foot (First Treatment Job)']
        binned_fpf = df[df['Lag'].between(b, b + stepsize)]['Fluid per Perforated Foot (First Treatment Job)']
        binned_eur = df[df['Lag'].between(b, b + stepsize)]['EUR (Full) BOE']

        # cutoff between 2.5% and 97.5%
        binned_cleaned_lateral_ = np.clip(binned_lateral, binned_lateral.quantile(0.025), binned_lateral.quantile(0.975))
        binned_cleaned_ppf_ = np.clip(binned_ppf, binned_ppf.quantile(0.025), binned_ppf.quantile(0.975))
        binned_cleaned_fpf_ = np.clip(binned_fpf, binned_fpf.quantile(0.025), binned_fpf.quantile(0.975))
        binned_cleaned_eur_ = np.clip(binned_eur, binned_eur.quantile(0.025), binned_eur.quantile(0.975))

        binned_cleaned_lateral.append(binned_cleaned_lateral_)
        binned_cleaned_ppf.append(binned_cleaned_ppf_)
        binned_cleaned_fpf.append(binned_cleaned_fpf_)
        binned_cleaned_eur.append(binned_cleaned_eur_)    

    means_lateral = [np.mean(item) for item in binned_cleaned_lateral]
    means_ppf = [np.mean(item) for item in binned_cleaned_ppf]
    means_fpf = [np.mean(item) for item in binned_cleaned_fpf]
    means_eur = [np.mean(item) / 1000 for item in binned_cleaned_eur] # BOE to MBOE

    # colors
    color_lat = 'k'
    color_ppf = 'darkviolet'
    color_fpf = '#1f77b4'

    # EUR (MBOE) - bar plot
    ax.bar([i + 1 for i in range(len(means_eur))], [item for item in means_eur], label='Avg. EUR', 
           alpha=0.3, color='k')
    ymax = 5000
    ax.set_ylim(0 - 0.025 * ymax, ymax)

    # Lateral length (ft) - line plot
    ax1 = ax.twinx()
    ax1.plot([i + 1 for i in range(len(means_lateral))], means_lateral, linestyle='--', marker='o', markersize=6, alpha=0.7,
        label='Avg. Lateral length', color=color_lat)    
    ymax = 15000
    ax1.set_ylim(0 - 0.025 * ymax, ymax)

    # PPF (lbs/ft) - line plot
    ax2 = ax.twinx()
    ax2.plot([i + 1 for i in range(len(means_ppf))], means_ppf, linestyle='--', marker='o', markersize=6, alpha=0.7,
        label='Avg. PPF', color=color_ppf)    
    ymax = 5000
    ax2.set_ylim(0 - 0.025 * ymax, ymax)

    # FPF (gal/ft) - line plot
    ax3 = ax.twinx()
    ax3.plot([i + 1 for i in range(len(means_fpf))], means_fpf, linestyle='--', marker='o', markersize=6, alpha=0.7,
        label='Avg. FPF', color=color_fpf)   
    ymax = 100
    ax3.set_ylim(0 - 0.025 * ymax, ymax)

    # 
    ax.yaxis.set_major_locator(plt.MaxNLocator(6))
    ax1.yaxis.set_major_locator(plt.MaxNLocator(6))
    ax2.yaxis.set_major_locator(plt.MaxNLocator(6))
    ax3.yaxis.set_major_locator(plt.MaxNLocator(6))
    ax.minorticks_on()
    ax.xaxis.set_tick_params(which='minor', bottom=False)
    ax.yaxis.set_minor_locator(ticker.AutoMinorLocator(3))

    ax.set_title(basin + ': ' + str(df.shape[0]) + ' wells', fontsize=title_fontsize)
    ax.set_facecolor('#eeeeee')
    ax.set_axisbelow(True)
    ax.grid(axis='y')
    ax.tick_params(axis='x', labelrotation=45, labelsize=axis_tick_fontsize)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax1.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax2.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax3.tick_params(axis='y', labelsize=axis_tick_fontsize)

    if i % 2 == 0 and i != 6:
        ax.set_ylabel('EUR (MBOE)', fontsize=y_label_fontsize)
        ax1.set_yticks([])
        ax2.set_yticks([])
        ax3.set_yticks([])
    else:
        ax1.tick_params(axis='y', colors=color_lat)
        #ax1.spines['right'].set_color(color_lat)
        ax1.set_ylabel('Lateral Length (ft)', color=color_lat, fontsize=y_label_fontsize)

        ax2.tick_params(axis='y', colors=color_ppf)
        ax2.spines['right'].set_position(('outward', 65))
        ax2.spines['right'].set_color(color_ppf)
        ax2.set_ylabel('PPF (lbs/ft)', color=color_ppf, fontsize=y_label_fontsize)

        ax3.tick_params(axis='y', colors=color_fpf)
        ax3.spines['right'].set_position(('outward', 120))
        ax3.spines['right'].set_color(color_fpf)
        ax3.set_ylabel('FPF (gal/ft)', color=color_fpf, fontsize=y_label_fontsize)        

    if i == 6:
        ax.set_ylabel('EUR (MBOE)', fontsize=y_label_fontsize)

    if i == 4 or i == 6:
        ax.set_xlabel('DUC Time (Days)', fontsize=y_label_fontsize)
    else:
        ax.set_xlabel('')

    ax.grid(axis='y', which='minor', color='grey', linestyle='--', alpha=0.2)

    ax.xaxis.set_major_locator(plt.MaxNLocator(12))
    ax.set_xticklabels([int(item) for item in ax.get_xticks() * stepsize], fontsize=axis_tick_fontsize)
    ax.tick_params(axis='x', labelsize=axis_tick_fontsize, labelrotation=30)

    ax.yaxis.set_major_formatter(ticker.EngFormatter())
    ax1.yaxis.set_major_formatter(ticker.EngFormatter())
    ax2.yaxis.set_major_formatter(ticker.EngFormatter())
    ax1.yaxis.set_major_formatter(ticker.EngFormatter())

    ax.spines.top.set_visible(False)
    ax1.spines.top.set_visible(False)
    ax2.spines.top.set_visible(False)

    h0, l0 = ax.get_legend_handles_labels()
    h1, l1 = ax1.get_legend_handles_labels()
    h2, l2 = ax2.get_legend_handles_labels()
    h3, l3 = ax3.get_legend_handles_labels()

    fig.legend(h0 + h1 + h2 + h3, l0 + l1 + l2 + l3, loc='lower left', ncol=2,
               bbox_to_anchor=(0.046, 0.18), bbox_transform=fig.transFigure, fontsize=18)

    ax.text(0.86, 0.85, 'aegis4048.github.io', fontsize=12, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)

    _1 = 1
    if basin == 'Anadarko':
        _2 = 5
    elif basin == 'Appalachia':
        _2 = 4
    elif basin == 'Bakken':
        _2 = 10
    elif basin == 'Eagle Ford':
        _2 = 5
    elif basin == 'Haynesville':
        _2 = 5
    elif basin == 'Niobrara':
        _2 = 6
    else:
        _2 = 7

    ax.axvline(x=_1, color='k', linestyle='--', linewidth=1, alpha=0.7)
    t1 = ax.text(_1, 4000, '[1]', fontsize=14, color='k', ha='center', va='center')    
    t1.set_bbox(dict(facecolor='#eeeeee', alpha=1, edgecolor='#eeeeee', pad=1))

    ax.axvline(x=_2, color='k', linestyle='--', linewidth=1, alpha=0.7)
    t2 = ax.text(_2, 4000, '[2]', fontsize=14, color='k', ha='center', va='center')    
    t2.set_bbox(dict(facecolor='#eeeeee', alpha=1, edgecolor='#eeeeee', pad=1))

fig.tight_layout()

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.998
fig.suptitle(setbold('Factors Affecting EUR: Lateral Length, PPF, and FPF')  + ",  Jan 2014 - June 2022", fontsize=19, x=0.345, y=1.025)
ax.annotate('', xy=(0.006, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, EIA', xy=(0.055, 0.16), xycoords='figure fraction', fontsize=16)

fig.set_facecolor("white")
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="row" id="table-2" style="margin-top: -15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_table_5.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;&gt;Table 2:&lt;/strong&gt; Summary table for Figure 7 - Estimated Ultimate Recovery&lt;/p&gt;&lt;/div&gt;&lt;div class="row" id="table-3"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_table_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 3:&lt;/strong&gt; Summary table for Figure 7 - Lateral length&lt;/p&gt;&lt;/div&gt;&lt;div class="row" id="table-4"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_table_3.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 4:&lt;/strong&gt; Summary table for Figure 7 - Proppant per Perforated Feet&lt;/p&gt;&lt;/div&gt;&lt;div class="row" id="table-5"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_table_4.png"/&gt;&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Table 5:&lt;/strong&gt; Summary table for Figure 7 - Fluid per Perforated Feet&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Normalized EUR vs. DUC time"&gt;&lt;/div&gt;&lt;h3 id="4.4.-Normalized-EUR-vs.-DUC-time"&gt;4.4. Normalized EUR vs. DUC time&lt;a class="anchor-link" href="#4.4.-Normalized-EUR-vs.-DUC-time"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt; above revealed positive correlation between completion size and lateral length with EUR; increased lateral length requires a larger completion size to fracture the additional length, leading to a greater EUR. To isolate the effect of DUC time on EUR and eliminate the influence of other confounding variables, EURs (BOE) are normalized (divided) by PPF (lbs/ft), FPF (gal/ft), and lateral length (ft). The resulting statistic has an unit of (BOE &lt;em&gt; ft)/(lbs &lt;/em&gt; gal). Its absolute value is meaningless, as it is a statistic created solely to distinguish the effects of other variables on EUR. Only the relative percentage change in the statistic is relevant.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt; displays the impact of DUC time on normalized EUR for each basin. The local troughs and peaks in each basin represent points of interest used to quantify the relative change in EUR for wells completed shortly after drilling compared to old DUC wells. A detailed analysis and commentary for each basin are presented &lt;a class="internal-link" href="#detailed"&gt;below&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Moreover, &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt; has the potential to be a useful tool in evaluating completion investment efficiency. For instance, the Bakken basin, which has the highest mean normalized EUR along the x-axis, can be argued to have superior rate of return for each dollars spent for hydraulic fracturing compared to the other basins. Conversely, the Eagle Ford and Permian basins have lower mean normalized EUR values at different DUC times, which is expected due to their status as some of the oldest oil and gas plays in the US and the significant depletion of their "sweet spots."&lt;/p&gt;
&lt;p&gt;It is important to note that the calculated statistic in &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;, the average normalized EUR &lt;strong style="color: #287cb7"&gt;(&lt;img class="inline-image" src="jupyter_images/duc_legend_5.png"/&gt;blue lines)&lt;/strong&gt;, is heavily influenced by extreme data points due to two reasons. Firstly, the statistic is a combination of four variables, each of which may not contain outliers individually but may do so when combined. Therefore, if multiple variables have extreme data points, the calculated statistic will have greater skewness due to a larger standard deviation. Secondly, the derivation of the statistic necessitates the presence of four variables (EUR, PPF, FPF, and lateral length) simultaneously, causing the source data file (&lt;a class="ico xls" href="https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx" target="_blank"&gt;EUR_vs_Lag.xlsx&lt;/a&gt;) to drop rows with any of the four variables missing. Consequently, the Haynesville basin, which had 2,858 wells in &lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;, had only 1,724 wells in &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;.&lt;/p&gt;
&lt;div class="row" id="fig-8" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/6_normalized_EUR_Lateral_FPF_PPF_2.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 8:&lt;/strong&gt; Each dot represents one well's normalized EUR. The wells are binned by 50 DUC days. Each band of dots represents wells completed within the 50-day binned interval. The blue line plot represetns the average of wells in each 50-day bin. Note that the credibility of this average line plot is affected by the number of data points in each bin. Bakken and Haynesville have suffers from lack of data for their first bin. Indices of the local peaks and troughs are chosen by visual inspection; the points which "look like" local troughs and peaks are picked, and are prone to subjectivity.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (8)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

no_NA = ['EUR (Full) BOE', 'Fluid per Perforated Foot (First Treatment Job)', 
         'DI Lateral Length', 'Proppant per Perforated Foot (First Treatment Job)']
dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx', sheet_name=basin)
    df_cur = df_cur.dropna(subset=no_NA)           # Drop wells that are not completed
    df_cur = df_cur[df_cur['Drill Type'] == 'H']                   # Horizontal wells only

    # Drops non-hydrocarbon wells like: Dry hole, injection, core, etc.
    df_cur = df_cur[df_cur['Production Type'].isin(['OIL', 'GAS', 'OIL &amp; GAS'])]

    #df_cur[EURs] = df_cur[EURs].div(1000).round(0)
    dfs.append(df_cur)

############################################# Plot ################################################

axis_tick_fontsize = 14
title_fontsize = 19
markersize = 20
y_label_fontsize = 16

colors = ['grey', '#a1794a', '#d484a9', '#cbe8f0', '#c6b4ee', '#914810', '#16534c']

fig = plt.figure(figsize=(16, 17))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,2:])
axes = [ax1,ax2,ax3,ax4,ax5,ax6,ax7]

def annotate_arrows(data_y, num, tick_spacing, ymax, x_start=1, ox=0.2, fontsize=14, flip_y=False):
    '''
    data_y = y coordinate of the datapoint of interest
    num = index of the datapoint of interest
    tick_spacing = spacing between two major ticks
    ox = offset of x
    '''

    head_padding = ymax * 0.04                 # extra space between the datapoint of interest and arrowhead
    oy = ymax * 0.15                           # offset of y
    sx = x_start + (tick_spacing / 2) * num
    sy = data_y + head_padding

    if flip_y:
        oy = -ymax * 0.15
        sy = data_y - head_padding

#------------------------------------------------------------------------------------------------------------------

    ax.arrow(sx + ox, sy + oy, -ox, -oy, head_width=0.0, fc='k', ec='k', lw=2)
    t1 = ax.text(sx + ox, sy + oy, round(data_y, 5), fontsize=fontsize, color='k', ha='center')
    t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

#------------------------------------------------------------------------------------------------------------------

    xytext = (sx + ox, sy + oy)

    return xytext 


for i, (ax, basin) in enumerate (zip(axes, basins)):

    # select current basin data
    df = dfs[i]

     # cut off high lag bins with too few wells
    df = df[df['Lag'] &lt;= 1000]

    # binning by 50 days
    stepsize = 50
    bins = np.arange(0, 1000 + stepsize, stepsize)

    # scatter plot of binned wells
    #norm_eur_original = []
    norm_eur_cleaned = []
    norm_eur_outlier = []
    for b in bins[: -1]:

        eur_bin = df[df['Lag'].between(b, b + stepsize)]['EUR (Full) BOE']
        lateral_bin = df[df['Lag'].between(b, b + stepsize)]['DI Lateral Length']
        fpf_bin = df[df['Lag'].between(b, b + stepsize)]['Fluid per Perforated Foot (First Treatment Job)']
        ppf_bin = df[df['Lag'].between(b, b + stepsize)]['Proppant per Perforated Foot (First Treatment Job)']

        cutoff = 0.95
        norm_eur_original_ = eur_bin/lateral_bin/fpf_bin/ppf_bin
        norm_eur_cleaned_ = norm_eur_original_[norm_eur_original_ &lt;= norm_eur_original_.quantile(cutoff)]
        norm_eur_outlier_ = norm_eur_original_[norm_eur_original_ &gt; norm_eur_original_.quantile(cutoff)]

        norm_eur_cleaned.append(norm_eur_cleaned_)
        norm_eur_outlier.append(norm_eur_outlier_)    

    for j, item in enumerate(norm_eur_cleaned):
        x = np.random.normal(j + 1, 0.06, size=len(item))
        ax.scatter(x, item, color=colors[i], alpha=0.5, s=10, edgecolors='k', linewidth=0.0, label='One well data')

    for k, item_outlier in enumerate(norm_eur_outlier):
        x_outlier = np.random.normal(k + 1, 0.06, size=len(item_outlier))
        ax.scatter(x_outlier, item_outlier, color='r', alpha=0.3, s=30, marker='x', label='Outliers')   

    # line plot of average of binned wells
    means = [np.mean(item) for item in norm_eur_cleaned]
    ax.plot([i + 1 for i in range(len(means))], means, linestyle='-', marker='o', markersize=8, alpha=0.7,
            label='AVG. normalized EUR, binned by 50 lag days')       

    # axis range
    ymax = 0.02
    ymin = 0 - 0.05 * ymax
    ax.set_ylim(ymin, ymax)

    # tick settings
    ax.xaxis.set_major_locator(plt.MaxNLocator(12))
    ax.yaxis.set_major_locator(plt.MaxNLocator(6))  
    ax.set_xticklabels([int(item) for item in ax.get_xticks() * stepsize], fontsize=axis_tick_fontsize)
    ax.tick_params(axis='x', labelsize=axis_tick_fontsize, labelrotation=30)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
    #ax.yaxis.set_major_formatter(ticker.EngFormatter())
    ax.minorticks_on()
    ax.xaxis.set_tick_params(which='minor', bottom=False)
    ax.yaxis.set_minor_locator(ticker.AutoMinorLocator(2))

    # spines and grid
    ax.spines.top.set_visible(False)
    ax.spines.right.set_visible(False)
    ax.grid(axis='y', alpha=0.5)
    ax.grid(axis='y', which='minor', color='grey', linestyle='--', alpha=0.2)
    ax.set_axisbelow(True)

    # texts
    ax.set_title(basin + ': ' + str(np.concatenate(norm_eur_cleaned).shape[0]) + ' wells', fontsize=title_fontsize)
    ax.set_ylabel('EUR/PPF/FPF/Lateral', fontsize=y_label_fontsize)
    if i == 4 or i == 6:
        ax.set_xlabel('DUC time (Days)', fontsize=y_label_fontsize)
    ax.set_facecolor('#eeeeee')
    ax.text(0.15, 0.88, 'aegis4048.github.io', fontsize=12, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)    

    # legends
    h0, l0 = ax.get_legend_handles_labels()
    leg = ax.legend([h0[0]], [l0[0]], fontsize=14, ncol=2, loc='upper right')
    for lh in leg.legendHandles:
        lh.set_alpha(1)
        lh.set_sizes([50])

    h1, l1 = ax.get_legend_handles_labels()
    fig.legend([h1[-1]], [l1[-1]], loc='lower left', ncol=2,
               bbox_to_anchor=(0.046, 0.195), bbox_transform=fig.transFigure, fontsize=18) 

    fs = 15
    lw = 2
    _1 = 0
    spacing = abs(ax.get_xticks()[1] - ax.get_xticks()[2])
    if basin == 'Anadarko':
        _2 = 3
        yloc = 0.011
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

    if basin == 'Appalachia': 
        _2 = 6
        yloc = 0.015
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs, flip_y=False)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs, flip_y=False)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Bakken':
        _1 = 1
        _2 = 14
        yloc = 0.012
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Eagle Ford':
        _2 = 5
        yloc = 0.014
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2))        
    if basin == 'Haynesville': 
        _1 = 1
        _2 = 3
        yloc = 0.015
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs, flip_y=False)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs, flip_y=False)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 
    if basin == 'Niobrara':
        _2 = 5
        yloc = 0.015
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '+' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='green', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2))  
    if basin == 'Permian':
        _2 = 3
        yloc = 0.014
        textxy1 = annotate_arrows(means[_1], _1, spacing, ymax, fontsize=fs)
        textxy2 = annotate_arrows(means[_2], _2, spacing, ymax, fontsize=fs)   
        ax.plot([textxy1[0], textxy1[0]], [textxy1[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy2[0], textxy2[0]], [textxy2[1], yloc], lw=lw, color='k', ls='--')
        ax.plot([textxy1[0], textxy2[0]], [yloc, yloc], lw=lw, color='k', ls='--')
        diff_percentage = '' + str(int((means[_2] - means[_1])/means[_1] * 100)) + '%'
        t1 = ax.text((textxy1[0] + textxy2[0])/2, yloc, diff_percentage, fontsize=fs, color='red', ha='center')
        t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='k', pad=5, lw=2)) 

    #break

fig.tight_layout()

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.998
fig.suptitle(setbold('EUR Normalized by PPF, FPF and Lateral Length')  + ",  Jan 2014 - June 2022", fontsize=20, x=0.34, y=1.025)
ax.annotate('', xy=(0.006, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, DrillingInfo', xy=(0.055, 0.173), xycoords='figure fraction', fontsize=16)

fig.set_facecolor("white")    
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="detailed" style="margin-top: -15px"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Anadarko&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The normalized EUR for Anadarko wells completed beyond 50 days since drilled dropped by 81% over a 150-day span. The two outlier points in the average normalized EUR at 400-day and 450-day bins were identified as a result of extreme data points that could not be filtered out using the percentile method due to a lack of data. The observed decrease in normalized EUR with increasing DUC time follows the pattern observed in typical logarithmic production decline curve with a high b-factor, indicating a fast initial decline in production due to reservoir depletion. This could be an indication of severe well-to-well interference problems in the Anadarko basin.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-9" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_anadarko.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 9:&lt;/strong&gt; Anadarko basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Appalachia&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The normalized EUR dropped by 19% over a span of 300 DUC days beyond the initial 50-day bin average. It seems to decrease linearly with DUC time at a very slow pace compared to Anadarko or Permian. Assuming linear regression, one could argue that the Appalachia DUC wells lose 2.7% EUR for every 50 days of delay in completion.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-10" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_appalachia.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 10:&lt;/strong&gt; Appalachia basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Bakken&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The normalized EUR of Bakken wells exhibits an exponential decline trend, with the initial decline rate smaller than Anadarko but greater than Appalachia. Note that the first bin of data (50-day bin) for Bakken wells is characterized by a limited number of data points, including extreme outliers that heavily skew the calculated normalized EUR values. Therefore, the second bin (100-day bin) is considered as the starting point, where Bakken wells experienced a 70% decrease in production over 700 DUC days. It is important to note that this decline would likely be greater if more data points were available in the first bin, thereby yielding a more reliable average normalized EUR value.&lt;/p&gt;
&lt;p&gt;Based on the observation that Anadarko and Permian wells exhibit logarithmic decline in normalized EUR and experience rapid decline during early DUC time, it is expected that the initial average normalized EUR value for Bakken wells would be higher in the first day bin compared to the second day bin. Assuming an initial average normalized EUR value of 0.016 (although this is subjective), it is projected that the Bakken basin would experience a 78% decrease in production over a span of 750 DUC days.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-11" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_bakken.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 11:&lt;/strong&gt; Bakken basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Eagle Ford&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The Eagle Ford wells showed very minimal or no degradation in EUR with increasing DUC time. One can deduce that the Eagle Ford wells are more resilient to the well-to-well interference problems than the other basins. Note that this shows the trend of the entire basin; limiting the data pool to a small group of wells in a small area of interest may reveal different trend.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-12" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_eagleford.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 12:&lt;/strong&gt; Eagle Ford basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Haynesville&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The statistical analysis of the Haynesville basin is limited due to the dearth of available data. Specifically, only 1,792 wells in the basin have complete information on EUR, proppant, fluid volume, and lateral length, which was further reduced to 1,724 after removing outliers. Notably, the average normalized EUR for the 50-day and 450-day bins extends beyond the y-axis range, while only the wells within the 100- to 350-day bins exhibit reliable results with sufficient number of records.&lt;/p&gt;
&lt;p&gt;Treating the 100-day bin as the first index of a local peak and the 200-day bin as the index of a local trough, the Haynesville wells demonstrated a 46% decrease in normalized EUR during 100 days of DUC time. However, given the logarithmic decline in average normalized EUR observed in Anadarko and Permian wells, an interpolation can be performed to estimate a plausible value of the first bin, around 0.008, although subjectivity is a possible limitation. This estimation leads to an anticipated 69% production decline in the Haynesville basin during the subsequent 150 DUC days after the initial 50 DUC days, followed by a relatively constant level of production afterwards.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-13" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_haynesville.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 13:&lt;/strong&gt; Haynesville basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Niobrara&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Notably, the Niobrara basin demonstrated a substantial increasing trend in normalized EUR with increasing DUC time up to the 300-day bin, followed by a relatively constant or slowly declining trend in normalized EUR.&lt;/p&gt;
&lt;p&gt;The observation of increasing normalized EUR with increasing DUC time in Niobrara wells is intriguing and contradicts the prevailing scientific literature, which suggests that child wells tend to underperform relative to parent wells. However, this premise assumes the presence of a parent-child relationship between wells. In the absence of well-to-well interference factors, DUC wells waiting to be completed may be free from such negative impacts on production.&lt;/p&gt;
&lt;p&gt;One potential explanation for this counter-intuitive trend in normalized EUR could be the presence of unique geologic characteristics specific to the Niobrara basin, or the existence of hidden factors that were not accounted for during the normalization process. For example, Niobrara may be relatively free from vertical fracture interference problems associated with stacked laterals compared to other basins, or may have been subjected to substantially different completion or production techniques. It is important to note that &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt; and &lt;a class="internal-link" href="#table-4"&gt;Table 4&lt;/a&gt; above revealed that Niobrara was the only basin to exhibit a decrease in PPF with increasing DUC time, which suggests the presence of hidden factors not captured in the data set used for this study. Therefore, further analysis and study is required to understand this unexpected behavior.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-14" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_niobrara.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 14:&lt;/strong&gt; Niobrara basin from Figure 8&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Permian&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The normalized EUR for Permian wells completed beyond 50 days since drilled dropped by 74% over a span of 150 days. The normalized EUR does not substantially drop further after the 200-day bin. This trend is very similar to that of the Anadarko basin's.&lt;/p&gt;
&lt;div class="row row full_screen_margin_60 mobile_responsive_plot_full_width" id="fig-15" style="margin-top: 10px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/duc_normalized_permian.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 15:&lt;/strong&gt; Permian basin from Figure 8&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Dead DUC wells"&gt;&lt;/div&gt;&lt;h2 id='5.-"Dead"-DUC-wells'&gt;5. "Dead" DUC wells&lt;a class="anchor-link" href='#5.-"Dead"-DUC-wells'&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;DUC wells are treated as a form of oilfield working capital. They are essentially a long-term, partially funded storage of hydrocarbons "under" the ground instead of "on" the ground. However, if a well remains in DUC stage for too long, it no longer functions as a working oilfield capital. Analyst John Freeman from Raymond James &amp; Associates Inc. said that that 95% of the drilled wells have been completed within 2 years, and that DUCs older than 2 years have low chance of ever being completed and considered out-of-the-system (a.k.a. Dead DUCs). Comparing with the Enverus data of wells in the seven DPR regions supports this claim to be reasonably true.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt; presents a 95% box plot of the DUC time for wells in each basin, providing insight into the time limit till completion for oil and gas wells in the US. The plot indicates that 95% of the wells in the Anadarko basin were completed within 309 days after drilling, while wells in the Appalachia basin were completed within 956 days. The weighted average for all DPR regions reveals that 95% of wells in the US are completed within 567 days after drilling. The implications of these results suggest that any well not completed within this timeframe has a less than 5% chance of being completed, thereby rendering the expensive drilling cost that the operator incurred a waste.&lt;/p&gt;
&lt;p&gt;The completion time limit for DUC wells depends on their ultimate rate of return, which is a complex function of various factors, including EUR, well-to-well interference problems, royalty rate, and costs associated with site-clearing, drilling, lateral length, completion size and concentration per foot, daily operating costs, and lease purchase and renewal. However, comparing the 95% upper limit for DUC time across basins in &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt; reveals an interesting correlation with the other findings of this study.&lt;/p&gt;
&lt;p&gt;Notably, the three basins with the shortest DUC time limit, namely Anadarko (309 days), Haynesville (409 days), and Permian (470 days), also had the worst depletion rates in normalized EUR. Recall that in &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;, Anadarko experienced an 81% drop in normalized EUR in 150 DUC days, while Haynesville and Permian experienced a 46% and 74% drop, respectively. Conversely, the Appalachia, Eagle Ford, and Niobrara basins demonstrated greater resilience to reductions in normalized EUR with increasing DUC time, and showed longer time limit till completion in &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;When considering the economic factors that impact the time limit till completion, it is essential to consider EUR as it has a direct impact on the final economic rate of return of a well. In &lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;, Appalachia has the longest time limit till completion, which can be attributed to its highest EUR along the x-axis compared to other basins. The high EUR renders operators to be more flexible with the costs associated with maintaining their DUC wells' lease. This understanding explains why Niobrara has a close DUC time limit with that of Permian despite Niobrara's strong resilience to the decrease in normalized EUR with increasing DUC time. In &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt;'s &lt;a class="internal-link" href="#table-2"&gt;Table 2&lt;/a&gt;, Niobrara shows 541 MBOE of EUR at its local peak [2], while Permian shows 1,061 MBOE of EUR, which is almost double. In summary, Niobrara and Permian have opposing pros and cons that balance their time limit till completion to be similar.&lt;/p&gt;
&lt;div class="row" id="fig-16" style="margin-top: 20px"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/Time Limit Until Completion.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 16:&lt;/strong&gt; 95% Box plot of gap time between drilling and completion. The plot shows the time limit until completion for each basin. Each dot (very small, 99.5% transparency) represent one well of a basin. Upper whisker and the numeric annotation above it represent 95% upper limit. This means that wells with DUC time longer than the annotated number have less then 95% chance of ever being completed. Box plot for "All Regions" represent weighted average of all basins.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (16)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store the completion &amp; drilling date difference data of 7 basins
# data restricted to wells that has "Completion Date" column populated
# source: DrillingInfo App of Enverus

lags = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EUR_vs_Lag.xlsx', sheet_name=basin)
    df_cur = df_cur.dropna(subset=['Completion Date'])           # Drop wells that are not completed
    df_cur = df_cur[df_cur['Drill Type'] == 'H']
    lags.append(df_cur['Lag'].values)

flattened = []
temp = [list(lag) for lag in lags]
for item in temp:
    flattened += item

lags.append(flattened)
basins.append('All Regions')

############################################# Plot ##############################################

fig, ax = plt.subplots(figsize=(8, 4.5))

colors = ['grey', '#a1794a', '#d484a9', '#cbe8f0', '#c6b4ee', '#914810', '#16534c', 'lightgrey']

cutoff = 95

for i, basin_lag in enumerate(lags):
    i = i + 1
    x = np.random.normal(i, 0.06, size=len(basin_lag))
    ax.scatter(x, basin_lag, color=colors[i - 1], alpha=0.005)
    _cutoff = int(np.percentile(basin_lag, cutoff))
    ax.text(i, _cutoff + 150, str(_cutoff) + ' days', fontsize=10, ha='center', va='center', color='k')

lw = 1
caps = ax.boxplot(lags, sym='', whis=[0, cutoff], showfliers=True,
                     boxprops=dict(linewidth=lw, color='#4e98c3'),
                     whiskerprops=dict(linewidth=lw, color='#4e98c3', linestyle='--'), vert=True,
                     capprops=dict(linewidth=lw, color='k'),
                     medianprops=dict(linewidth=lw, color='#ad203e'));

n = 0.12
for cap in caps['caps']:
    cap.set(xdata=cap.get_xdata() + (-n, +n))

ax.set_xticklabels(basins, rotation=20)
ax.set_ylim(-70, 2000)
ax.set_ylabel('Lag (Days)')

ax.yaxis.set_major_locator(plt.MaxNLocator(6))
ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
ax.spines.top.set_visible(False)
ax.spines.right.set_visible(False)

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('Time Limit Until Completion: 95\% Boxplot')  + ",  Jan 2014 - June 2022", fontsize=12, pad=10,
             x=0.31, y=1.06)
ax.annotate('', xy=(-0.11, 1.07), xycoords='axes fraction', xytext=(1.02, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.annotate('Data Source: Pythonic Excursions, DrillingInfo', xy=(-0.11, -0.3), xycoords='axes fraction', fontsize=10)
ax.text(0.16, 0.23, 'aegis4048.github.io', fontsize=10, ha='center', va='center',
        transform=ax.transAxes, color='white', alpha=0.5)

ax.axvline(x=7.5, color='k', linestyle='--', linewidth=1, alpha=0.7)

fig.set_facecolor("white")
fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Conclusion"&gt;&lt;/div&gt;&lt;h2 id="6.-Conclusion"&gt;6. Conclusion&lt;a class="anchor-link" href="#6.-Conclusion"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The well-established scientific wisdom suggests that parent (old) wells perform better than their nearby child (new) wells, due to the parent wells having already drained a significant volume of hydrocarbons and left the child well with lower reservoir pressure and smaller volume of fluids left to produce.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wells completed shortly after drilling (within 50 days) tend to have substantially smaller EUR compared to wells with longer DUC time (&lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt;). This is because wells with longer DUC time tend to have longer lateral length and are treated with bigger completion. Conversely, it means that operators tend to undersize their completion concentration per lateral foot for wells completed shortly after drilling (&lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt;). Thus, investing in larger completion size for wells completed shortly after drilling may yield greater profit for operators.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;To assess the genuine impact of DUC time on production, EUR was normalized by lateral length, proppant per perforated foot (PPF), and fluid per perforated foot (FPF).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;It has been found that increasing DUC time has a significant negative impact on the EUR of Anadarko, Bakken, Hanyesville, and Permian wells. Notably, Anadarko and Permian showed 81% and 74% drop in noramlized EUR, respectively, over a span of 150 days of DUC time. However, Appalachia, Eagle Ford and Niobrara wells have been found to be resilient from the EUR loss due to increasing DUC time (&lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;), showing negligible decrease in normalized EUR along the x-axis.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In some basins, delaying completion due to unfavorable commodity prices may not be a financially sound strategy.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt; provides valuable insight to evaluate completion investment efficiency as it shows EUR normalized by completion size and lateral length.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;DUC wells have time limit till completion. For example, Anadarko wells have less than 5% chance of completion for DUC wells older than 308 days since drilled (&lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;). Chance of completion drastically falls afterwards, which may render the drilling investment made for the well to be a waste.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Anadarko and Haynesville wells have the shortest time limit till completion (&lt;a class="internal-link" href="#fig-16"&gt;Figure 16&lt;/a&gt;). This can be attributed to the fact that they are the ones with the worst decrease in normalized EUR with increasing DUC time, as demonstrated in &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;. On the other hand, Appalachia wells have the longest time limit till completion because they yield the greatest EUR at differnt DUC times, and their normalized EUR decreases minimally with increasing DUC time.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlights red-theme" id="boxcox-warning"&gt;
&lt;div class="highlights-title red-theme"&gt;WARNING!&lt;/div&gt;
&lt;div class="highlights-content red-theme"&gt;
&lt;p&gt;The presented analysis provides a basin-wide overview at a high level, and the conclusions drawn assume homogeneity within each basin. However, this assumption may not hold true for many regions. By restricting the analysis to a county-level, different trends may emerge compared to those observed at the basin level.&lt;/p&gt;
&lt;p&gt;In &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt;, it was observed that delaying completion by 150 days resulted in an 81% decline in normalized EUR for Anadarko wells. In contrast, no drop in EUR was observed for Eagle Ford wells. These conclusions should be interpreted as follows: "If a new well is drilled in a typical area where most other operators drill, and typical well spacing, completion, and production techniques are applied across the basin, an 81% loss of EUR can be expected for Anadarko wells if completion is delayed by 150 days. It would be advisable to complete Anadarko wells as soon as possible to avoid drainage from neighboring competitor wells. However, for Eagle Ford wells, completion can be delayed for a prolonged period if the oil price is not favorable."&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="DUC"></category><category term="drilling"></category><category term="horizontals"></category><category term="verticals"></category><category term="completion"></category><category term="production"></category><category term="recent-trend"></category><category term="energy-shortage"></category><category term="EIA"></category><category term="DrillingInfo"></category><category term="Enverus"></category><category term="DPR"></category><category term="dead-duc"></category><category term="Anadarko"></category><category term="Appalachia"></category><category term="Bakken"></category><category term="Eagle Ford"></category><category term="Niobrara"></category><category term="Hanyesville"></category><category term="Permian"></category></entry><entry><title>DUC Wells and Their Economic Complications</title><link href="https://aegis4048.github.io/duc_wells_and_their_economic_complications" rel="alternate"></link><published>2023-02-09T00:00:00-08:00</published><updated>2023-02-09T00:00:00-08:00</updated><author><name>ERIC KIM</name></author><id>tag:aegis4048.github.io,2023-02-09:/duc_wells_and_their_economic_complications</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color â€¦&lt;/style&gt;</summary><content type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph &gt; img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Once a well is drilled, it must be completed to produce. However, operators may choose not to immediately complete a well for various reasons:&lt;/p&gt;
&lt;ol class="rounded-list" style="margin-bottom: 30px !important; margin-top: 30px! important;"&gt;
&lt;li&gt;&lt;p&gt;Availability of fracking crews&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Drilling contracts that are too expensive to revoke&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Constraints on capital spending&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Commodity prices&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Many others&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Whatever the reasons may be, this in-transit time between drilling and completion stages creates an inventory of DUC wells. The term, &lt;strong&gt;DUC wells&lt;/strong&gt;, have a literal definition - &lt;strong&gt;Drilled but Uncompleted wells&lt;/strong&gt;. They essentially serve as a secodary form of hydrocarbon storage underground, instead of surface storage facilities. The wells can be turned on line for production for cheap; the costs of drilling have been paid, and completion won't be as costly as new drilling. This unique characteristic of DUC wells allows the operators to make strategic decisions during the time of financial crisis (ex: 2020 COVID crash); they complete the existing DUC wells and take profits instead of drilling new wells. However, this profit taking process inevitably leads to the reduction in size of DUC well inventories, which gave rise to the concerns regarding potential energy supply shortage due to the depletion of DUC wells around early 2022.&lt;/p&gt;
&lt;p&gt;In this article I attempt to help the readers to understand what it means to have DUC well inventories, why they exist, and the economic impact they have on the US energy industry.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="display-none" id="toc_container"&gt;
&lt;p class="toc_title"&gt;&lt;i class="fas fa-list"&gt;&lt;/i&gt;Contents&lt;/p&gt;
&lt;ul class="toc_list"&gt;
&lt;li&gt;&lt;a href="#Sample data description"&gt;&lt;span class="toc_label"&gt;0.&lt;/span&gt;Sample data description&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Key takeaways"&gt;&lt;span class="toc_label"&gt;1.&lt;/span&gt;Key takeaways&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#How are DUC wells created?"&gt;&lt;span class="toc_label"&gt;2.&lt;/span&gt;How are DUC wells created?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#DUC wells and Economic Complications"&gt;&lt;span class="toc_label"&gt;3.&lt;/span&gt;DUC wells and Economic Complications&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Potential depletion of DUC wells and enegy supply shortage"&gt;&lt;span class="toc_label"&gt;3.1.&lt;/span&gt;Potential depletion of DUC wells and enegy supply shortage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Recent trend: more production with less drilling"&gt;&lt;span class="toc_label"&gt;3.2.&lt;/span&gt;Recent trend: more production with less drilling&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;li&gt;&lt;a href="#Continued discussion: Dead DUC wells"&gt;&lt;span class="toc_label"&gt;4.&lt;/span&gt;Continued discussion: "Dead DUC Wells"&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Sample data description"&gt;&lt;/div&gt;&lt;h2 id="0.-Sample-data-description"&gt;0. Sample data description&lt;a class="anchor-link" href="#0.-Sample-data-description"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The main data source I use for this article is the &lt;a href="https://www.eia.gov/petroleum/drilling/" target="_blank"&gt;Drilling Productivity Report&lt;/a&gt; (DPR) from the US Energy Information Administration (EIA), and some supplemental data from the &lt;a href="https://www.enverus.com/" target="_blank"&gt;Enverus&lt;/a&gt; Drilling Info application since 2014. While the DPR data is readily available to the public as its provided by the US government, Enverus' Drilling Info data is not because its a commerical software.&lt;/p&gt;
&lt;p&gt;The DPR data covers the 7 major oil and gas basins in the US: Anadarko, Appalachia, Bakken, Eagle Ford, Haynesville, Niobrara, and Permian.&lt;/p&gt;
&lt;div class="row full_screen_margin_80 mobile_responsive_plot_full_width" id="fig-1" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/DPR-basins.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 1:&lt;/strong&gt; 7 major basins in the US, Source: EIA&lt;/p&gt;&lt;/div&gt;&lt;p&gt;I downloaded the &lt;a class="ico xls" href="https://www.eia.gov/petroleum/drilling/xls/dpr-data.xlsx" target="_blank"&gt;Report data (aggregated by region)&lt;/a&gt; &lt;strong&gt;(dpr-data.xlsx)&lt;/strong&gt; and the &lt;a class="ico xls" href="https://www.eia.gov/petroleum/drilling/xls/duc-data.xlsx"&gt;DUC data (aggregated by region)&lt;/a&gt; &lt;strong&gt;(duc-data.xlsx)&lt;/strong&gt;, which can be found in the &lt;i&gt;"Contents"&lt;/i&gt; tab in the right side of this &lt;a href="https://www.eia.gov/petroleum/drilling/" target="_blank"&gt;page&lt;/a&gt;. Visualizing the DPR data for each basin generates the below figure:&lt;/p&gt;
&lt;div class="row" id="fig-2" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/DUC &amp; Newly Drilled Wells and Production by Basins, Jan 2014 - Dec 2022.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 2:&lt;/strong&gt; Quick glance at the EIA DPR data for each basin. Note that the Permian basin has different y-axis scale for DUC &amp; newly drilled wells count.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (2)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from matplotlib.colors import LinearSegmentedColormap
import warnings
import matplotlib.gridspec as gridspec
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs_year = df.groupby([df.index.year, 'Basin'])['DUC'].mean()
df_DUCs_year = df_DUCs_year.unstack().fillna(0)
df_DUCs_year = round(df_DUCs_year, 0)

df_drilled_year = df.groupby([df.index.year, 'Basin'])['Drilled'].sum()
df_drilled_year = df_drilled_year.unstack().fillna(0)
df_drilled_year['Total Drilled'] = df_drilled_year.T.apply(lambda x: sum(x))

#################### Import All Data - Rig Count, Oil &amp; Gas Prod per Basins #######################

dfs2 = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/dpr-data.xlsx', sheet_name=basin + ' Region', skiprows=1)
    df_cur['Basin'] = basin
    dfs2.append(df_cur)

year_cutoff = '2013' # counting from year_cutoff + 1
date_header = 'Month'

df2 = pd.concat(dfs2)
df2 = df2.sort_values(date_header)
df2.index = pd.to_datetime(df2[date_header])
df2.drop(df2.columns[[2, 3, 5, 6]], axis=1, inplace=True)
df2.columns = ['Date', 'Rig Count', 'Total Oil Prod (BBLD)', 'Total Gas Prod (MCFD)', 'Basin']
df2 = df2[df2.index &gt; year_cutoff + '-12-31']

################################ Cross Table for Gas Production ###################################

# Total Gas Production
df2_total_gas_prod_year = df2.groupby([df2.index.year, 'Basin'])['Total Gas Prod (MCFD)'].sum()
df2_total_gas_prod_year = df2_total_gas_prod_year.unstack().fillna(0)
df2_total_gas_prod_year['Total Gas (BCFD)'] = df2_total_gas_prod_year.T.apply(lambda x: sum(x))
df2_total_gas_prod_year = df2_total_gas_prod_year / 1000000

################################ Cross Table for Oil Production ###################################

df2_total_oil_prod_year = df2.groupby([df2.index.year, 'Basin'])['Total Oil Prod (BBLD)'].sum()
df2_total_oil_prod_year = df2_total_oil_prod_year.unstack().fillna(0)
df2_total_oil_prod_year['Total (MMBBLD)'] = df2_total_oil_prod_year.T.apply(lambda x: sum(x))
df2_total_oil_prod_year = df2_total_oil_prod_year / 1000000

############################################# Plot ##############################################

# changing datetime index to str is necessary to overlay lineplot on top of barplot
df_drilled_year.index = [str(item) for item in df_drilled_year.index]
df2_total_gas_prod_year.index = [str(item) for item in df2_total_gas_prod_year.index]
df2_total_oil_prod_year.index = [str(item) for item in df2_total_oil_prod_year.index]

cmap_name = 'cubehelix'
colors = sns.color_palette(cmap_name, n_colors=len(basins))
np.random.seed(34)
np.random.shuffle(colors)
colors = colors.as_hex()
colors[0] = 'grey'
colors[-2] = '#914810'
cmap = LinearSegmentedColormap.from_list("my_colormap", colors)
barcolor_dict = {label: color for label, color in zip(basins, colors)}

axis_fontsize = 15
axis_tick_fontsize = 11
title_fontsize = 18
figure_title_fontsize = 20
label_fontsize = 13
legend_fontsize = 16
markersize = 9
y_label_fontsize = 15

gas_prod_color = 'red'
oil_prod_color = 'green'
drilled_color = 'k'

fig = plt.figure(figsize=(16, 17))
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,2:4])
axes = [ax1,ax2,ax3,ax4,ax5,ax6,ax7]

for i, (ax, basin) in enumerate(zip(axes, basins)):

    df_DUCs_year.plot.bar(alpha=1, y=basin, ax=ax, legend=None, width=0.9, edgecolor='k', linewidth=0.1, label='DUC Count', color=barcolor_dict[basin])

    ax1 = ax.twinx()
    df_drilled_year.plot(y=basin, ax=ax1, linestyle='-', legend=None, marker='o', color=drilled_color, markersize=markersize, label='New Drilled Wells')

    ax2 = ax.twinx()
    df2_total_oil_prod_year.plot(y=basin, ax=ax2, linestyle='-', marker='o', color='green', markersize=markersize, label='Oil Prod Total', legend=None)
    ax2.set_ylim(0, 70)

    ax3 = ax.twinx()
    df2_total_gas_prod_year.plot(y=basin, ax=ax3, linestyle='-', marker='o', color='red', markersize=markersize, label='Gas Prod Total', legend=None)
    ax3.set_ylim(0, 500)

    ax.set_facecolor('#eeeeee')
    ax.set_axisbelow(True)
    ax.grid(axis='y')
    ax.set_xticklabels([str(dt).split('-')[0] for dt in df_DUCs_year.index])
    ax.tick_params(axis='x', labelrotation=45, labelsize=axis_tick_fontsize)
    ax.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax1.tick_params(axis='y', labelsize=axis_tick_fontsize)
    ax.set_title(basin, fontsize=title_fontsize)

    if i % 2 == 0 and i != 6:
        ax.set_ylabel('DUC Wells Count (k)', fontsize=axis_fontsize)
        ax2.set_yticks([])
        ax3.set_yticks([])        
    else:
        ax1.set_ylabel('Drilled Wells Count (k)', fontsize=axis_fontsize)

        ax2.tick_params(axis='y', colors='green')
        ax2.spines['right'].set_position(('outward', 50))
        ax2.spines['right'].set_color('green')
        ax2.set_ylabel('Total Oil Prod. (MMBBLD)', color='green', fontsize= axis_fontsize)

        ax3.tick_params(axis='y', colors='red')
        ax3.spines['right'].set_position(('outward', 100))
        ax3.spines['right'].set_color('red')
        ax3.set_ylabel('Total Gas Prod. (BCFD)', color='red', fontsize= axis_fontsize) 

    if i == 6:
        ax.set_ylabel('DUC Wells Count (k)', fontsize=axis_fontsize)
    #else:
        #ax1.set_yticks([])
        #ax2.set_yticks([])
        #ax3.set_yticks([])

    if i == 4 or i == 6:
        ax.set_xlabel('Spud Date', fontsize=y_label_fontsize)
    else:
        ax.set_xlabel('')

    if basin == 'Permian':
        pass
        ax.set_ylim(0, 5000)
        ax1.set_ylim(0, 15000)

    else:
        ax.set_ylim(0, 1400)
        ax1.set_ylim(0, 7000)

    ax.yaxis.set_major_formatter(ticker.EngFormatter())
    ax1.yaxis.set_major_formatter(ticker.EngFormatter())        

    ax.spines.top.set_visible(False)
    ax1.spines.top.set_visible(False)
    ax2.spines.top.set_visible(False)
    ax3.spines.top.set_visible(False)

    #ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)
    #ax1.yaxis.get_major_ticks()[-1].gridline.set_visible(False)

    h0, l0 = ax.get_legend_handles_labels()
    h1, l1 = ax1.get_legend_handles_labels()
    h2, l2 = ax2.get_legend_handles_labels()
    h3, l3 = ax3.get_legend_handles_labels()
    ax.legend(h0, l0, loc='upper left', ncol=2, fontsize=13, framealpha=0.5)

    fig.legend(h3 + h2 + h1, l3 + l2 + l1, loc='lower left', ncol=2,
               bbox_to_anchor=(0.046, 0.165), bbox_transform=fig.transFigure, fontsize=legend_fontsize)

    for c in ax.containers:
        ax.bar_label(c, label_type='center', color='white', weight='bold', fontsize=label_fontsize)

    ax.text(0.16, 0.80, 'aegis4048.github.io', fontsize=12, ha='center', va='center',
            transform=ax.transAxes, color='grey', alpha=0.5)        

fig.tight_layout()

def setbold(txt): 
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

y_pos = 0.998
fig.suptitle(setbold('DUC &amp; Newly Drilled Wells Count and Production')  + ",  Jan 2014 - June 2022", fontsize=19, x=0.328, y=1.025)
ax.annotate('', xy=(0.006, y_pos), xycoords='figure fraction', xytext=(1, y_pos), arrowprops=dict(arrowstyle="-", color='k', lw=1.3))
ax.annotate('Source: Pythonic Excursions, EIA', xy=(0.05, 0.145), xycoords='figure fraction', fontsize=16)

fig.set_facecolor("white")
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;For the Enverus data, I synchronized the wells from the EIA database with the Drilling Info database by matching their states and counties. The &lt;i&gt;"RegionCounties"&lt;/i&gt; tab in the &lt;strong&gt;dpr-data.xlsx&lt;/strong&gt; shows how EIA decides which states and counties belong to which basins. If you have Driling Info subscription and would like to follow the steps I've taken, you can download this &lt;a href="https://aegis4048.github.io/downloads/notebooks/sample_data/Basins_Boundaries.txt" target="_blank"&gt;text file&lt;/a&gt; I created, and paste its state and county data into Drilling Info's &lt;i&gt;"Paste Filter Selections"&lt;/i&gt; as shown below. You will need to do this 7 times for each basins.&lt;/p&gt;
&lt;div class="row full_screen_margin_70 mobile_responsive_plot_full_width" id="fig-3" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/drilling_info_paste.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 3:&lt;/strong&gt; Pasting the Eagle Ford basin's state and county data into Drilling Info for query&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Key takeaways"&gt;&lt;/div&gt;&lt;h2 id="1.-Key-takeaways"&gt;1. Key takeaways&lt;a class="anchor-link" href="#1.-Key-takeaways"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;div class="highlights" id="key1"&gt;
&lt;div class="highlights-title"&gt;1. DUCs are accumulated when drilling activity exceeds completion, and vice versa&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key2"&gt;
&lt;div class="highlights-title"&gt;2. DUCs are created due to the following reasons:&lt;/div&gt;
&lt;div class="highlights-content"&gt;(1) Cost efficiency with batch-fracking or batch-drilling (2) Drilling contracts that are too expensive to revoke (3) Constraitns on capital spending and (4) Lack of infrastructure.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key3"&gt;
&lt;div class="highlights-title"&gt;3. DUC wells function as a working oilfield capital&lt;/div&gt;
&lt;div class="highlights-content"&gt;DUCs can quickly be turned on line for production for cheap because the cost of drilling has already been paid. Completing DUC wells is essentially a profit-taking process, so long as there are DUCs left to complete.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key4"&gt;
&lt;div class="highlights-title"&gt;4. Depletion of DUC wells may cause energy shortage problems&lt;/div&gt;
&lt;div class="highlights-content"&gt;The recent COVID crash left operators with scarce capitals to spend. They chose to complete the existing DUC wells for profit instead of drilling new wells, which resulted in fast depletion of DUCs in the US. Prolonged profit-taking process from DUCs without new drilling may result in energy shortage problems when the operators run out of DUC wells to complete.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key5"&gt;
&lt;div class="highlights-title"&gt;5. Modern day industry is producing more hydrocarbons with less drilling activities&lt;/div&gt;
&lt;div class="highlights-content"&gt;This is due to the fact horizontal wells produce 2.5 to 7 times more than verticals, and that modern day drilling is composed of 91% horizontals and 9% verticals.&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlights" id="key6"&gt;
&lt;div class="highlights-title"&gt;6. Gap time between drilling and completion should not be a contributing factor to the birth of "Dead" DUCs&lt;/div&gt;
&lt;div class="highlights-content"&gt;The impact of gap time is not significant enough to render operators to shy away from completing their old DUCs. This is discussed in more detail in my next article.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="How are DUC wells created?"&gt;&lt;/div&gt;&lt;h2 id="2.-How-are-DUC-wells-created?"&gt;2. How are DUC wells created?&lt;a class="anchor-link" href="#2.-How-are-DUC-wells-created?"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The formation of DUC wells in the oil and gas industry is caused by a variety of factors. The most straightforward reason is that they occur when operators drill more wells than they complete, and vice versa, whether by choice or not. If they drill more wells than they complete, DUC wells accumulate. If they complete more wells than they drill, DUC wells deplete. This trend can be observed in &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt;, which showcases three distinct periods where the US DUC well counts in the seven DPR regions experienced rapid increases and decreases as a result of imbalanced drilling and completion activities.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-4" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/US Major Basins Completion &amp; Drilling Activities and Commodities.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 4:&lt;/strong&gt; DUCs accumulate when drilling activity exceeds completion, and vice versa. The line plots depict three distinct periods of significant fluctuations in DUC well inventories, with [1] and [3] representing instances of rapid depletion due to high completion rates, and [2] reflecting a period of accumulation resulting from high drilling activities. WTI Crude oil prices is appended at the bottom to show the effect of commodity prices on DUCs.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (4)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs = df.groupby([pd.Grouper(freq='M'), 'Basin'])['DUC'].mean()
df_DUCs = df_DUCs.unstack().fillna(0)
df_DUCs = round(df_DUCs, 0)
df_DUCs['Total DUCs'] = df_DUCs.T.apply(lambda x: sum(x))

df_drilled = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Drilled'].sum()
df_drilled = df_drilled.unstack().fillna(0)
df_drilled['Total Drilled'] = df_drilled.T.apply(lambda x: sum(x))

df_completed = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Completed'].sum()
df_completed = df_completed.unstack().fillna(0)
df_completed['Total Completed'] = df_completed.T.apply(lambda x: sum(x))

############################################# Plot ##############################################

fig, ax = plt.subplots(figsize=(8, 4))

ax2 = ax.twinx()

ax.plot(df_drilled.index, df_drilled['Total Drilled'], color='k', label='Newly Drilled')
ax.plot(df_completed.index, df_completed['Total Completed'], label='Completed')
ax2.plot(df_DUCs.index, df_DUCs['Total DUCs'], color='purple', label='DUC')


ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2016-03-1') &amp; (df_drilled.index &lt;= '2017-1-1'), color='red', alpha=0.4)
ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2018-08-01') &amp; (df_drilled.index &lt;= '2019-3-1'), color='green', alpha=0.4)
ax.fill_between(df_drilled.index, df_drilled['Total Drilled'], df_completed['Total Completed'],
                where=(df_drilled.index &gt;= '2020-07-1') &amp; (df_drilled.index &lt;= '2022-8-1'), color='red', alpha=0.4)

ax.axvline(x=df_drilled.index[26], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[35], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[26], df_drilled.index[35], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[55], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[61], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[55], df_drilled.index[61], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[78], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[102], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvspan(df_drilled.index[78], df_drilled.index[102], facecolor='lightgrey', alpha=0.3)

ax.set_ylim(0, 2500)
ax2.set_ylim(0, 10000)

ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[5].gridline.set_visible(False)
ax.spines.top.set_visible(False)
ax2.spines.top.set_visible(False)

h1, l1 = ax.get_legend_handles_labels()
h2, l2 = ax2.get_legend_handles_labels()
ax.legend(h1 + h2, l1 + l2, fontsize=10, ncol=3, loc='upper left', framealpha=1)

ax.set_ylabel('Drilled &amp; Completed Wells', fontsize=11)
ax2.set_ylabel('DUC Wells', fontsize=11)

ax.arrow(df_drilled.index[71], 1500, 60, -270, head_width=40, head_length=60, fc='k', ec='k')
ax.text(0.58, 0.62, 'Covid Crash', fontsize=9, transform=ax.transAxes, color='k')

ax.text(0.295, 0.05, '[1]', fontsize=9, transform=ax.transAxes, color='k')
ax.text(0.53, 0.05, '[2]', fontsize=9, transform=ax.transAxes, color='k')
ax.text(0.805, 0.05, '[3]', fontsize=9, transform=ax.transAxes, color='k')

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('US Major Basins Completion &amp; Drilling Activities')  + ",  Jan 2014 - Dec 2022", fontsize=12, pad=10, x=0.4, y=1.06)
ax.annotate('', xy=(-0.11, 1.07), xycoords='axes fraction', xytext=(1.11, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.text(0.145, 0.1, 'aegis4048.github.io', fontsize=10, ha='center', va='center',
        transform=ax.transAxes, color='grey', alpha=0.5)

fig.set_facecolor("white")
fig.tight_layout()

############################################# Plot 2 ##############################################

df = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/EIA-commodity.xls', sheet_name='Data 1')
df = df.iloc[338:-1, :-1] # between Jan 2014 to Dec 2022
df.columns = ['date', 'value']
df.reset_index(inplace=True, drop=True)
df['date'] = df['date'].apply(lambda x: x.strftime('%Y-%m'))
df['date'] = pd.to_datetime(df['date'])

fig, ax = plt.subplots(figsize=(7, 1))

ax.plot(df['date'], df['value'], color='green')

ax.set_ylabel('oil ($)', fontsize=10)
ax.set_ylim(0, 120)
ax.set_yticks(np.linspace(0, 120, 4))
ax.tick_params(axis='both', which='major', labelsize=9)

ax.axvspan(df_drilled.index[26], df_drilled.index[35], facecolor='lightgrey', alpha=0.3)
ax.axvspan(df_drilled.index[55], df_drilled.index[61], facecolor='lightgrey', alpha=0.3)
ax.axvspan(df_drilled.index[78], df_drilled.index[103], facecolor='lightgrey', alpha=0.3)

ax.axvline(x=df_drilled.index[26], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[35], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[55], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[61], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[78], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[103], color='k', linestyle='--', linewidth=1, alpha=0.7)

ax.grid(axis='y', alpha=0.5)
ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)
ax.yaxis.get_major_ticks()[-1].gridline.set_visible(False)

ax.annotate('Source: Pythonic Excursions, EIA', xy=(-0.11, -.5), xycoords='axes fraction', fontsize=9)
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Here I list more detailed reasons as to why operators may choose to not complete their well.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cost efficiency with batch-fracking or batch-drilling&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As an efficient operator, it is ideal to avoid engaging a fracturing fleet until all logistical requirements have been thoroughly understood and procured and a substantial number of wells have been collected for prolonged, uninterrupted operations. This can be achieved either by maintaining a consistent inventory of wells waiting to be completed or by alternating the company's focus in the region between drilling a series of wells and then completing them all. If there are 10 wells in one location and it takes 10 days to drill each well, the first drilled well will stay idle for at least 90 days before it can be completed. This lag can result in the formation of additional DUC wells in the event of an unforeseen circumstance that renders fracturing unfeasible or undesirable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Drilling contracts that are too expensive to revoke&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Often times the drilling contracts between an operator and a service company entails drilling a batch of wells and expensive contract revokation fee. If the oil price suddenly drops while drilling the contracted batch of wells, the operator may choose not to complete the drilled wells while letting the rig crews keep drilling new wells due to the existing contract. This was the most apparent in the recent COVID crash, which took place around March of 2020. Taking a close look at &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt; around March of 2020 (slightly to the left of [3]), one can observe that there higher drilling than completion activities, which temporarily boosted the number of DUCs until July of 2020 (start of [3]). This happened because there were rig contracts that were still in effect few months after the COVID crash. However, this phenomena did not last long once those contracts expired or have been fulfilled, thus rapidly depleting the number of DUCs until late 2022.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Constraints on capital spending&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The operator may choose not to finish their wells due to restrictions on the company's capital expenditures or adverse market circumstances, opting instead to wait for better economics. However, this approach may not always be advisable, as DUC wells older than two years have a low probability, less than 5%, of being completed due to issues such as lost leases.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lack of infrastructure&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;An operator may leave a well uncompleted if there is no nearby pipeline to transport the produced gas after a pad site is cleared and a well is drilled. However, unexpected issues during pipeline construction may result in the well remaining as a DUC well for an extended period until resolved.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="DUC wells and Economic Complications"&gt;&lt;/div&gt;&lt;h2 id="3.-DUC-wells-and-economic-complications"&gt;3. DUC wells and economic complications&lt;a class="anchor-link" href="#3.-DUC-wells-and-economic-complications"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;DUC wells are a form of hydrocarbon storage under the ground instead of on the surface storage facilities. The operators invest on drilling first and take profits later when its desirable. This unique characteristics of DUCs create economic complications for the oil and gas industry due to the following reasons:&lt;/p&gt;
&lt;div&gt;&lt;hr/&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Timing:&lt;/strong&gt; DUC wells are partially completed sources of supply that can be brought to market more quickly and at a lower cost than a newly drilled well. However, completing DUC wells at the right time to balance the market demand for energy can be challenging.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p p="" style="display: inline"&gt;&lt;strong&gt;Market fluctuations:&lt;/strong&gt; DUC wells are often used to keep up with demand during times of high energy demand. However, during periods of declining oil prices, completing DUC wells may not be economically viable, leading to a buildup of uncompleted wells. This has been the most apparent between late 2018 to early 2019; WTI crude dropped from &lt;/p&gt;&lt;p style="display: inline"&gt;$&lt;/p&gt;86 to &lt;p style="display: inline"&gt;$&lt;/p&gt;&lt;p style="display: inline"&gt;54. This accumulation of DUCs due to oil price drop can be observed in &lt;a class="internal-link" href="#fig-4"&gt;Figure 4&lt;/a&gt;'s highlighted area [2].&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Rig contracts:&lt;/strong&gt; In times of declining oil prices, operators may continue to drill wells due to rig contracts, but not complete these wells and bring them into production. This can result in a buildup of DUC wells that may not be economically viable to complete in the future (due to reasons like lost leases).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Profit-taking:&lt;/strong&gt; Completing DUC wells is essentially a profit-taking process done on wells with substantial investment already made. However, if the timing of completion is not aligned with market demand or if capital is not available, the profit-taking process may not yield the expected results.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Capital management:&lt;/strong&gt; The inventory levels of DUC wells are closely linked to the availability of industry capital. When capital is abundant, producers tend to increase drilling relative to completions, leading to a rise in DUC inventory. On the other hand, when capital is scarce, producers prioritize well completion over new drilling, which can lead to a depletion of DUC wells.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Potential depletion of DUC wells and enegy supply shortage"&gt;&lt;/div&gt;&lt;h3 id="3.1.-Potential-depletion-of-DUC-wells-and-enegy-supply-shortage"&gt;3.1. Potential depletion of DUC wells and enegy supply shortage&lt;a class="anchor-link" href="#3.1.-Potential-depletion-of-DUC-wells-and-enegy-supply-shortage"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The COVID-19 pandemic resulted in a reduction of available capital for the oil and gas industry. To conserve cash, many operators prioritized well completion over new drilling, enabling them to maintain production with less capital. However, this strategy of profit-taking cannot be sustained in the long-term and resulted in a rapid decrease of DUC wells in the US, raising concerns about the potential depletion of DUCs and energy supply shortages.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-5"&gt;Figure 5&lt;/a&gt; demonstrates the swift depletion rate of DUCs since July 2020. If this rate continued, the US oil and gas industry would have exhausted its DUC wells by the end of 2023, potentially leading to an energy shortage. Fortunately, drilling activity caught up with completion activities by mid-2022, resulting in a stable level of DUC wells now.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-5" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/Depletion of DUC wells and energy supply.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 5:&lt;/strong&gt; Rapid depletion of US DUC wells since July 2020. Prolonged depletion of DUC wells may result in potential shortage with energy supply if the operators don't drill more wells.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (5)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as ticker
from sklearn import linear_model
import datetime

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA-old.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs = df.groupby([pd.Grouper(freq='M'), 'Basin'])['DUC'].mean()
df_DUCs = df_DUCs.unstack().fillna(0)
df_DUCs = round(df_DUCs, 0)
df_DUCs['Total DUCs'] = df_DUCs.T.apply(lambda x: sum(x))

df_drilled = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Drilled'].sum()
df_drilled = df_drilled.unstack().fillna(0)
df_drilled['Total Drilled'] = df_drilled.T.apply(lambda x: sum(x))

df_completed = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Completed'].sum()
df_completed = df_completed.unstack().fillna(0)
df_completed['Total Completed'] = df_completed.T.apply(lambda x: sum(x))

#################### Import All Data - Rig Count, Oil &amp; Gas Prod per Basins #######################

dfs2 = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/dpr-data-old.xlsx', sheet_name=basin + ' Region', skiprows=1)
    df_cur['Basin'] = basin
    dfs2.append(df_cur)

year_cutoff = '2013' # counting from year_cutoff + 1
date_header = 'Month'

df2 = pd.concat(dfs2)
df2 = df2.sort_values(date_header)
df2.index = pd.to_datetime(df2[date_header])
df2.drop(df2.columns[[2, 3, 5, 6]], axis=1, inplace=True)
df2.columns = ['Date', 'Rig Count', 'Total Oil Prod (BBLD)', 'Total Gas Prod (MCFD)', 'Basin']
df2 = df2[df2.index &gt; year_cutoff + '-12-31']

# current year (2022) prediction parameter
num_month_2022 = 6 # number of months in data set for current year
pred_factor = 12 / num_month_2022 

################################ Cross Table for Gas Production ###################################

# Total Gas Production
df2_total_gas_prod = df2.groupby([pd.Grouper(freq='M'), 'Basin'])['Total Gas Prod (MCFD)'].sum()
df2_total_gas_prod = df2_total_gas_prod.unstack().fillna(0)
df2_total_gas_prod['Total Gas (BCFD)'] = df2_total_gas_prod.T.apply(lambda x: sum(x))
df2_total_gas_prod = df2_total_gas_prod / 1000000

################################ Cross Table for Oil Production ###################################

df2_total_oil_prod = df2.groupby([pd.Grouper(freq='M'), 'Basin'])['Total Oil Prod (BBLD)'].sum()
df2_total_oil_prod = df2_total_oil_prod.unstack().fillna(0)
df2_total_oil_prod['Total Oil (MBBLD)'] = df2_total_oil_prod.T.apply(lambda x: sum(x))
df2_total_oil_prod = df2_total_oil_prod / 1000

############################################# Plot ##############################################

axis_label_fontsize = 12
title_fontsize = 13
legend_fontsize = 11

fig, axes = plt.subplots(2, 1, figsize=(9, 6.5))

ax1 = axes[0]
ax2 = axes[1]
ax3 = ax2.twinx()

n = 16

# extends the right-end of the x-axis
ext = 38
x_extender = df_DUCs.index.union(df_DUCs.index.shift(n + ext)[-(n + ext):])
x_extender_y = [1 for item in x_extender]

ax1.plot(x_extender, x_extender_y, alpha=0)
ax2.plot(x_extender, x_extender_y, alpha=0)

ax1.axvspan(x_extender[-ext-1], x_extender[-1], facecolor='lightgrey', alpha=0.5)
ax2.axvspan(x_extender[-ext-1], x_extender[-1], facecolor='lightgrey', alpha=0.5)

################################### DUC Wells Linear Regression ###################################

X_pred_plot = df_DUCs.index.union(df_DUCs.index.shift(n)[-n:])
X_pred = X_pred_plot.to_julian_date().values.reshape(-1, 1)

X = df_DUCs.index.to_julian_date().values.reshape(-1, 1)
y = df_DUCs['Total DUCs'].values

fit_begin = 79
fit_end = -3
plot_begin = 90

ols = linear_model.LinearRegression()
model = ols.fit(X[fit_begin: fit_end], y[fit_begin: fit_end])
response = model.predict(X_pred[plot_begin:])

ax1.plot(df_DUCs.index, df_DUCs['Total DUCs'], color='purple', label='DUC')
ax1.plot(X_pred_plot[plot_begin:], response, color='b', label='DUC Prediction', linestyle='--', linewidth=2)
ax1.vlines(x=df_DUCs.index[fit_begin - 1], ymin=0, ymax=max(y) - 100, color='purple', alpha=0.7, linestyle='--')
ax1.scatter(X_pred_plot[-1], 0, marker='o', color='b', label='point', clip_on=False, s=80)

############################# Oil and Gas Production Linear Regression ############################

n = n - 2
X_pred_plot = df2_total_oil_prod.index.union(df2_total_oil_prod.index.shift(n)[-n:])
X_pred = X_pred_plot.to_julian_date().values.reshape(-1, 1)

X = df2_total_oil_prod.index.to_julian_date().values.reshape(-1, 1)

y_oil = df2_total_oil_prod['Total Oil (MBBLD)'].values
y_gas = df2_total_gas_prod['Total Gas (BCFD)'].values

ols_oil = linear_model.LinearRegression()
ols_gas = linear_model.LinearRegression()
model_oil = ols_oil.fit(X, y_oil)
model_gas = ols_gas.fit(X, y_gas)
response_oil = model_oil.predict(X_pred)
response_gas = model_gas.predict(X_pred)

ax2.plot(X_pred_plot[plot_begin:], response_oil[plot_begin:], label='Oil Prediction', color='green', linestyle='--')
ax3.plot(X_pred_plot[plot_begin:], response_gas[plot_begin:], label='Gas Prediction', color='red', linestyle='--')

ax2.scatter(X_pred_plot[-1], response_oil[-1], marker='o', color='green', clip_on=False, s=80)
ax3.scatter(X_pred_plot[-1], response_gas[-1], marker='o', color='red', clip_on=False, s=80)

ax2.scatter(df2_total_oil_prod.index, df2_total_oil_prod['Total Oil (MBBLD)'], label='Oil', marker='o', color='green', s=10, alpha=0.3)
ax3.scatter(df2_total_gas_prod.index, df2_total_gas_prod['Total Gas (BCFD)'], label='Gas', marker='o', color='red', s=10, alpha=0.3)

ax1.set_ylim(0, 10000)
ax2.set_ylim(0, 15000)
ax3.set_ylim(0, 150)

ax1.set_ylabel('Drilled &amp; DUC Well Counts', fontsize=axis_label_fontsize)
ax2.set_ylabel('Total Oil Prod. (MBBLD)', fontsize=axis_label_fontsize) 
ax2.set_yticks(np.arange(0, 15001, 3000))
ax3.set_ylabel('Total Gas Prod. (BCFD)', fontsize=axis_label_fontsize) 
ax3.set_yticks(np.arange(0, 151, 30))

ax1.tick_params(axis='both', which='major', labelsize=11)
ax2.tick_params(axis='both', which='major', labelsize=11)

ax1.grid(axis='y', alpha=0.5)
ax1.yaxis.get_major_ticks()[5].gridline.set_visible(False)
ax2.grid(axis='y', alpha=0.5)
ax2.yaxis.get_major_ticks()[5].gridline.set_visible(False)

ax1.spines.top.set_visible(False)
ax1.spines.right.set_visible(False)
ax2.spines.top.set_visible(False)
ax3.spines.top.set_visible(False)

h1, l1 = ax1.get_legend_handles_labels()
ax1.legend(h1[:2], l1[:2], loc='upper left', fontsize=legend_fontsize)
h2, l2 = ax2.get_legend_handles_labels()
h3, l3 = ax3.get_legend_handles_labels()
ax2.legend(h2 + h3, l2 + l3, fontsize=legend_fontsize, ncol=2, loc='upper left')

ax1.yaxis.set_major_formatter(ticker.EngFormatter()) 
ax2.yaxis.set_major_formatter(ticker.EngFormatter())  
ax3.yaxis.set_major_formatter(ticker.EngFormatter())  

def setbold(txt): 
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax1.set_title(setbold('Depletion of DUC Wells and Energy Supply')  + ",  Jan 2014 - June 2022", 
             fontsize=title_fontsize, pad=10, x=0.335, y=1.06)
ax1.annotate('', xy=(-0.1, 1.07), xycoords='axes fraction', xytext=(1.07, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax1.text(0.535, 0.4, 'July 2020', fontsize=10, ha='center', va='center', 
        transform=ax1.transAxes, color='purple', alpha=0.7, rotation=270)

ax2.annotate('Source: Pythonic Excursions, EIA', xy=(-0.11, -0.22), xycoords='axes fraction', fontsize=12)
ax1.text(0.145, 0.1, 'aegis4048.github.io', fontsize=10, ha='center', va='center', 
        transform=ax1.transAxes, color='grey', alpha=0.5)
ax2.text(0.145, 0.1, 'aegis4048.github.io', fontsize=10, ha='center', va='center', 
        transform=ax2.transAxes, color='grey', alpha=0.5)

ax1.text(0.765, 0.43, 'Depleted DUCs', fontsize=11, transform=ax1.transAxes, color='k')
ax2.text(0.75, 0.43, 'Potential Shortage', fontsize=11, transform=ax2.transAxes, color='k')
ax2.text(0.74, 0.33, 'with Energy Supply', fontsize=11, transform=ax2.transAxes, color='k')

fig.set_facecolor("white")
fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Recent trend: more production with less drilling"&gt;&lt;/div&gt;&lt;h3 id="3.2.-Recent-trend:-more-production-with-less-drilling"&gt;3.2. Recent trend: more production with less drilling&lt;a class="anchor-link" href="#3.2.-Recent-trend:-more-production-with-less-drilling"&gt;Â¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Some readers may recall President Biden's request for the US oil and gas industry to ramp up drilling in order to curb the recent surge in gasoline prices. The industry reportedly hesitated to comply due to &lt;a href="https://www.cbsnews.com/news/oil-production-prices-us-companies-wont-increase-2022-dallas-fed-survey/" target="_blank"&gt;pressure from Wall Street for immediate financial returns.&lt;/a&gt; However, this is not the sole reason for the industry's reluctance to return to their previous drilling levels from 2014. Advances in technology (specifically horizontal drilling) have enabled the industry to produce more oil and gas with fewer wells, meaning they no longer need to drill as many wells as in the past to meet production demands.&lt;/p&gt;
&lt;p&gt;&lt;a class="internal-link" href="#fig-6"&gt;Figure 6&lt;/a&gt; highlights three key points that demonstrate a clear trend. The decline in the number of drilling operations can be observed at [1], [2], and [3], while production steadily increases. A comparison to July 2018 [2] shows a 31% reduction in the number of newly drilled wells, but a 26% increase in oil production and a 35% increase in gas production. The contrast becomes even more striking when compared to September 2014 [1], where drilling activity decreased by 50% while production of both oil and gas nearly doubled.&lt;/p&gt;
&lt;div class="row" id="fig-6" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/US Major Basins Well Counts &amp; Production.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 6:&lt;/strong&gt; Recent trend in production and drilling activities and count of DUC wells. We've been producing more oil and gas with less drilling activities over time.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (6)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as ticker

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################### DUC Wells Count per Basin #####################################

# compile a DataFrame to store count of DUC wells per basin
# source: EIA - https://www.eia.gov/petroleum/drilling/

dfs = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/Duc-EIA.xlsx', sheet_name=basin)
    df_cur['Basin'] = basin
    dfs.append(df_cur)

df = pd.concat(dfs)
df = df.sort_values('Date')
df.index = pd.to_datetime(df['Date'])

df_DUCs = df.groupby([pd.Grouper(freq='M'), 'Basin'])['DUC'].mean()
df_DUCs = df_DUCs.unstack().fillna(0)
df_DUCs = round(df_DUCs, 0)
df_DUCs['Total DUCs'] = df_DUCs.T.apply(lambda x: sum(x))

df_drilled = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Drilled'].sum()
df_drilled = df_drilled.unstack().fillna(0)
df_drilled['Total Drilled'] = df_drilled.T.apply(lambda x: sum(x))

df_completed = df.groupby([pd.Grouper(freq='M'), 'Basin'])['Completed'].sum()
df_completed = df_completed.unstack().fillna(0)
df_completed['Total Completed'] = df_completed.T.apply(lambda x: sum(x))

#################### Import All Data - Rig Count, Oil &amp; Gas Prod per Basins #######################

dfs2 = []
for basin in basins:
    df_cur = pd.read_excel('https://aegis4048.github.io/downloads/notebooks/sample_data/dpr-data.xlsx', sheet_name=basin + ' Region', skiprows=1)
    df_cur['Basin'] = basin
    dfs2.append(df_cur)

year_cutoff = '2013' # counting from year_cutoff + 1
date_header = 'Month'

df2 = pd.concat(dfs2)
df2 = df2.sort_values(date_header)
df2.index = pd.to_datetime(df2[date_header])
df2.drop(df2.columns[[2, 3, 5, 6]], axis=1, inplace=True)
df2.columns = ['Date', 'Rig Count', 'Total Oil Prod (BBLD)', 'Total Gas Prod (MCFD)', 'Basin']
df2 = df2[df2.index &gt; year_cutoff + '-12-31']

# current year (2022) prediction parameter
num_month_2022 = 6 # number of months in data set for current year
pred_factor = 12 / num_month_2022 

################################ Cross Table for Gas Production ###################################

# Total Gas Production
df2_total_gas_prod = df2.groupby([pd.Grouper(freq='M'), 'Basin'])['Total Gas Prod (MCFD)'].sum()
df2_total_gas_prod = df2_total_gas_prod.unstack().fillna(0)
df2_total_gas_prod['Total Gas (BCFD)'] = df2_total_gas_prod.T.apply(lambda x: sum(x))
df2_total_gas_prod = df2_total_gas_prod / 1000000

################################ Cross Table for Oil Production ###################################

df2_total_oil_prod = df2.groupby([pd.Grouper(freq='M'), 'Basin'])['Total Oil Prod (BBLD)'].sum()
df2_total_oil_prod = df2_total_oil_prod.unstack().fillna(0)
df2_total_oil_prod['Total Oil (MBBLD)'] = df2_total_oil_prod.T.apply(lambda x: sum(x))
df2_total_oil_prod = df2_total_oil_prod / 1000

############################################# Plot ##############################################

axis_label_fontsize = 13
title_fontsize = 13
legend_fontsize = 11

fig, ax = plt.subplots(figsize=(9, 4.5))

ax3 = ax.twinx()
ax4 = ax.twinx()

ax.plot(df_drilled.index, df_drilled['Total Drilled'], color='k', label='Drilled')
ax.plot(df_DUCs.index, df_DUCs['Total DUCs'], color='purple', label='DUC')
ax3.plot(df2_total_oil_prod.index, df2_total_oil_prod['Total Oil (MBBLD)'], label='Oil', color='green')
ax4.plot(df2_total_gas_prod.index, df2_total_gas_prod['Total Gas (BCFD)'], label='Gas', color='red')

ax.set_ylim(0, 10000)
ax3.set_ylim(0, 15000)
ax4.set_ylim(0, 150)

ax.set_ylabel('Drilled &amp; DUC Well Counts', fontsize=axis_label_fontsize)

ax3.tick_params(axis='y', colors='green')
#ax3.spines['right'].set_position(('outward', 50))
ax3.spines['right'].set_color('green')
ax3.set_ylabel('Total Oil Prod. (MBBLD)', color='green', fontsize=axis_label_fontsize) 
ax3.set_yticks(np.arange(0, 15001, 3000))

ax4.tick_params(axis='y', colors='red')
ax4.spines['right'].set_position(('outward', 50))
ax4.spines['right'].set_color('red')
ax4.set_ylabel('Total Gas Prod. (BCFD)', color='red', fontsize=axis_label_fontsize) 
ax4.set_yticks(np.arange(0, 151, 30))
ax.tick_params(axis='both', which='major', labelsize=11)

ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[5].gridline.set_visible(False)

ax.spines.top.set_visible(False)
ax3.spines.top.set_visible(False)
ax4.spines.top.set_visible(False)

h1, l1 = ax.get_legend_handles_labels()
h3, l3 = ax3.get_legend_handles_labels()
h4, l4 = ax4.get_legend_handles_labels()
ax.legend(h1 + h3 + h4, l1 + l3 + l4, fontsize=legend_fontsize, ncol=4, loc='upper left', framealpha=1)

ax.yaxis.set_major_formatter(ticker.EngFormatter()) 
ax3.yaxis.set_major_formatter(ticker.EngFormatter())  
ax4.yaxis.set_major_formatter(ticker.EngFormatter())  

def setbold(txt): 
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('US Major Basins Well Counts &amp; Production')  + ",  Jan 2014 - June 2022", 
             fontsize=title_fontsize, pad=10, x=0.37, y=1.06)
ax.annotate('', xy=(-0.115, 1.07), xycoords='axes fraction', xytext=(1.2, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.annotate('Source: Pythonic Excursions, EIA', xy=(-0.11, -0.18), xycoords='axes fraction', fontsize=12)
ax.text(0.145, 0.7, 'aegis4048.github.io', fontsize=10, ha='center', va='center', 
        transform=ax.transAxes, color='grey', alpha=0.5)

ax.axvline(x=df_drilled.index[8], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[54], color='k', linestyle='--', linewidth=1, alpha=0.7)
ax.axvline(x=df_drilled.index[-1], color='k', linestyle='--', linewidth=1, alpha=0.7)

t1 = ax.text(0.1, 0.25, '[1]', fontsize=10, transform=ax.transAxes, color='k', )
t2 = ax.text(0.49, 0.25, '[2]', fontsize=10, transform=ax.transAxes, color='k')
t3 = ax.text(0.94, 0.25, '[3]', fontsize=10, transform=ax.transAxes, color='k')

t1.set_bbox(dict(facecolor='white', alpha=1, edgecolor='white', pad=1))
t2.set_bbox(dict(facecolor='white', alpha=1, edgecolor='white', pad=1))
t3.set_bbox(dict(facecolor='white', alpha=1, edgecolor='white', pad=1))

oil1 = str(int(df2_total_oil_prod['Total Oil (MBBLD)'][8])) + ' MBBLD'
gas1 = str(int(df2_total_gas_prod['Total Gas (BCFD)'][8])) + ' BCFD'
drill1 = str(int(df_drilled['Total Drilled'][8])) + ' drilled'
ax.text(df_drilled.index[8 + 4], 2500, oil1, fontsize=9, color='green', bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[8 + 4], 3000, gas1, fontsize=9, color='red', bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[8 + 4], 2000, drill1, fontsize=9, color='k', bbox=dict(facecolor='none', edgecolor='none'))


oil2 = str(int(df2_total_oil_prod['Total Oil (MBBLD)'][54])) + ' MBBLD'
gas2 = str(int(df2_total_gas_prod['Total Gas (BCFD)'][54])) + ' BCFD'
drill2 = str(int(df_drilled['Total Drilled'][54])) + ' drilled'
ax.text(df_drilled.index[54 + 4], 2500, oil2, fontsize=9, color='green', bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[54 + 4], 3000, gas2, fontsize=9, color='red', bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[54 + 4], 2000, drill2, fontsize=9, color='k', bbox=dict(facecolor='none', edgecolor='none'))

ha = 'right'
oil3 = str(int(df2_total_oil_prod['Total Oil (MBBLD)'][-1])) + ' MBBLD'
gas3 = str(int(df2_total_gas_prod['Total Gas (BCFD)'][-1])) + ' BCFD'
drill3 = str(int(df_drilled['Total Drilled'][-1])) + ' drilled'
ax.text(df_drilled.index[-1 - 4], 2500, oil3, fontsize=9, color='green', ha=ha, bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[-1 - 4], 3000, gas3, fontsize=9, color='red', ha=ha, bbox=dict(facecolor='none', edgecolor='none'))
ax.text(df_drilled.index[-1 - 4], 2000, drill3, fontsize=9, color='k', ha=ha, bbox=dict(facecolor='none', edgecolor='none'))

fig.set_facecolor("white")
fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The improvement in production efficiency despite the reduction in drilling can be attributed to the increasing use of horizontal wells. As compared to vertical wells, horizontal wells produce 2.5 to 7 times more, allowing the industry to meet demand with fewer drilling operations. As illustrated in &lt;a class="internal-link" href="#fig-7"&gt;Figure 7&lt;/a&gt;, during economic downturns, the industry has favored horizontal wells by significantly reducing the number of vertical wells. It demonstrates a steady decrease in vertical wells, indicating that the majority of modern day drilling operations now consist of 91% horizontal wells and only 9% vertical wells.&lt;/p&gt;
&lt;div class="row full_screen_margin_90 mobile_responsive_plot_full_width" id="fig-7" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/Monthly Historical Drill Type Count 2004.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 7:&lt;/strong&gt; Historically the US oil and gas industry has turned into horizontal drilling during the times of economic crisis. Modern day drilling is mostly horizontal wells, which explains the higher production rates despite low drilling activities compared to 2014.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div class="solution_panel closed"&gt;
&lt;div class="solution_title"&gt;
&lt;p class="solution_title_string"&gt;Source Code For Figure (7)&lt;/p&gt;
&lt;ul class="nav navbar-right panel_toolbox"&gt;
&lt;li&gt;&lt;a class="collapse-link"&gt;&lt;i class="fa fa-chevron-down"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="clearfix"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="solution_content"&gt;
&lt;pre&gt;
            &lt;code class="language-python"&gt;
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from matplotlib.colors import LinearSegmentedColormap
import matplotlib.ticker as ticker
import warnings

############################################# Basins ##############################################

basins = sorted(['Anadarko', 'Appalachia', 'Eagle Ford', 'Haynesville', 'Niobrara', 'Permian', 'Bakken'])

################################# Drilled Wells Count per Basin ###################################

# import multiple csv files of basins and compile them into yearly count sum
# source: DrillingInfo

filename = 'https://aegis4048.github.io/downloads/notebooks/sample_data/Drill_Type_2004.xlsx'

# suppress warnings
warnings.filterwarnings('ignore')
warnings.simplefilter('ignore')

dfs = []
for basin in basins:
    df = pd.read_excel(filename, sheet_name=basin)
    df = df[df['Spud Date'].notna()]
    df['Basin'] = basin
    df['Year'] = df['Spud Date'].apply(lambda x: str(x).split('-')[0])
    dfs.append(df)

df_drilltype = pd.concat(dfs)
df_drilltype = df_drilltype.sort_values('Spud Date')
df_drilltype.index = pd.to_datetime(df_drilltype['Spud Date'])

df_drilltype = df_drilltype.groupby(pd.Grouper(freq='M'))['Drill Type'].value_counts(sort=True)
df_drilltype = df_drilltype.unstack().fillna(0).drop(['D', 'U'], axis=1)

df_drilltype_percent = df_drilltype.apply(lambda x: round(x / x.sum() * 100, 2), axis=1)
df_drilltype_percent = round(df_drilltype_percent, 1)

############################################# Plot ##############################################

fig, ax = plt.subplots(figsize=(8, 4))

x = df_drilltype.index
y = np.array([df_drilltype['H'].values, df_drilltype['V'].values])

ax.stackplot(x, *y, labels=['Horizontal', 'Vertical'], colors=['lightgrey', 'grey'])
ax.set_ylabel('Drilled Wells', fontsize=13)
ax.axvline(x=df_drilltype.index[-93], color='k', linestyle='--')
ax.axvline(x=df_drilltype.index[-28], color='k', linestyle='--')
ax.axvline(x=df_drilltype.index[-166], color='k', linestyle='--')

ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[6].gridline.set_visible(False)
ax.spines.top.set_visible(False)
ax.spines.right.set_visible(False)

ax.legend(fontsize=11, ncol=3, loc='upper right')
ax.tick_params(axis='both', which='major', labelsize=11)

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('Newly Drilled Wells Horizontal vs. Vertical Counts Trend')  + ",  Jan 2004 - June 2022", fontsize=12, pad=10, x=0.41, y=1.06)
ax.annotate('', xy=(-0.11, 1.07), xycoords='axes fraction', xytext=(1.02, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.annotate('Data Source: Pythonic Excursions, DrillingInfo', xy=(-0.11, -0.18), xycoords='axes fraction', fontsize=12)
ax.text(0.16, 0.23, 'aegis4048.github.io', fontsize=10, ha='center', va='center',
        transform=ax.transAxes, color='white', alpha=0.5)
ax.text(0.705, 0.63, '2014 Oil Price Crash', fontsize=11, ha='center', va='center',
        transform=ax.transAxes, color='k')
ax.text(0.91, 0.55, 'Covid-19', fontsize=11, ha='center', va='center',
        transform=ax.transAxes, color='k')
ax.text(0.375, 0.75, '2008 Recession', fontsize=11, ha='center', va='center',
        transform=ax.transAxes, color='k')

fig.set_facecolor("white")
fig.tight_layout()


#################################################################################################

fig, ax = plt.subplots(figsize=(8, 4))

ax.plot(df_drilltype_percent.index, df_drilltype_percent['H'], color='grey', label='Horizontal')
ax.plot(df_drilltype_percent.index, df_drilltype_percent['V'], color='k', label='Vertical')
ax.set_ylabel('Percent of Total', fontsize=13)
ax.tick_params(axis='both', which='major', labelsize=11)
ax.set_yticks(np.arange(0, 101, 10))

ax.grid(axis='y', alpha=0.5)
ax.yaxis.get_major_ticks()[10].gridline.set_visible(False)
ax.spines.top.set_visible(False)
ax.spines.right.set_visible(False)

ax.legend(fontsize=11, loc='center left')

def setbold(txt):
    return ' '.join([r"$\bf{" + item + "}$" for item in txt.split(' ')])

ax.set_title(setbold('Newly Drilled Wells Horizontal vs. Vertical Ratio Trend')  + ",  Jan 2004 - June 2022", fontsize=12, pad=10, x=0.41, y=1.06)
ax.annotate('', xy=(-0.11, 1.07), xycoords='axes fraction', xytext=(1.02, 1.07), arrowprops=dict(arrowstyle="-", color='k'))
ax.annotate('Data Source: Pythonic Excursions, DrillingInfo', xy=(-0.11, -0.18), xycoords='axes fraction', fontsize=12)
ax.text(0.16, 0.23, 'aegis4048.github.io', fontsize=10, ha='center', va='center',
        transform=ax.transAxes, color='grey', alpha=0.5)
ax.text(0.8, 0.43, '91% Horizontal', fontsize=12, ha='left', va='center',
        transform=ax.transAxes, color='k')
ax.text(0.8, 0.34, '9% Vertical', fontsize=12, ha='left', va='center',
        transform=ax.transAxes, color='k')
ax.text(0.8, 0.53, 'June 2022:', fontsize=12, ha='left', va='center',
        transform=ax.transAxes, color='k')

fig.set_facecolor("white")
fig.tight_layout()
            &lt;/code&gt;
        &lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;div id="Continued discussion: Dead DUC wells"&gt;&lt;/div&gt;&lt;h2 id='4.-Continued-discussion:-"Dead"-DUC-wells'&gt;4. Continued discussion: "Dead" DUC wells&lt;a class="anchor-link" href='#4.-Continued-discussion:-"Dead"-DUC-wells'&gt;Â¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;DUC wells are considered to be a working oil field capital because the wells can be turned on line for production for cheap. However, the empirical evidences suggests that the DUC wells may no longer function as a working capital if completion is delayed for too long. The empirical evidence presented in &lt;a class="internal-link" href="#fig-8"&gt;Figure 8&lt;/a&gt; reveals that 95% of the wells in Anadarko are completed within 309 days afterd drilled, and Appalachia wells within 956 days. Failing to complete within this time frame may give birth to "dead" DUCs - wells that will never be completed. The expensive drilling cost the operator paid would be wasted.&lt;/p&gt;
&lt;p&gt;Two main causes for the birth of dead DUCs include costs associated with extending oil and gas lease and degrading economics with increasing DUC time due to reservoir depletion. In another study conducted in my next article, I demonstrate and quantify the impact of delay in completion since drilled on production by normalizing EURs with lateral length and completion size.&lt;/p&gt;
&lt;p&gt;Check out my next article &lt;a href="https://aegis4048.github.io/quantifying_the_impact_of_completion_delay_since_drilled_on_production" target="_blank"&gt;Quantifying The Impact Of Completion Delay Since Drilled On Production&lt;/a&gt; for more information.&lt;/p&gt;
&lt;div class="row" id="fig-8" style="margin-top: 15px;"&gt;
&lt;div class="col"&gt;&lt;img src="jupyter_images/Time Limit Until Completion.png"/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="col-12 fig-title"&gt;&lt;p class="image-description"&gt;&lt;strong&gt;Figure 8:&lt;/strong&gt; 95% Box plot of gap time between drilling and completion. The plot shows the time limit until completion for each basin. Each dot (very small, 99.5% transparency) represent one well of a basin. Upper whisker and the numeric annotation above it represent 95% upper limit. This means that wells with DUC time longer than the annotated number have less then 95% chance of ever being completed. Box plot for "All Regions" represent weighted average of all basins.&lt;/p&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="oil-and-gas"></category><category term="oil"></category><category term="gas"></category><category term="DUC"></category><category term="drilling"></category><category term="horizontals"></category><category term="verticals"></category><category term="completion"></category><category term="production"></category><category term="recent-trend"></category><category term="energy-shortage"></category><category term="EIA"></category><category term="DrillingInfo"></category><category term="Enverus"></category><category term="DPR"></category></entry></feed>